(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a2d6889"],{"058a":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return c}));let r=[];const i=()=>{for(let t=0;t<r.length;t++)r[t]();r=[]},o=t=>{r.push(t),1===r.length&&setTimeout(i,0)},s=t=>class{constructor(t){this._=t}destroy(){t(this._)}},a=s(clearTimeout),c=(t,e)=>new a(setTimeout(e,t));s(clearInterval),s(t=>"undefined"!==typeof requestAnimationFrame&&cancelAnimationFrame(t)),s(t=>"undefined"!==typeof cancelIdleCallback&&cancelIdleCallback(t))},"0e0a":function(t,e,n){"use strict";n("70ee")},1458:function(t,e,n){},"15ab":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACASURBVHgB5ZDRCYAwDERPEXUMP7NGR3ES3cRRrFv0s2PojzWtrYgIWhAEfZCQht5BDnibxDbKqYlSpRjUqKQdM2/TIobZ/Zf4Bn8MkUqqbIV3dkcAg47PrN3CoOeuucRmQAX1Z2I1KeHHygtXghlsnhdw2poFYicWbhfL8fbHWABzRySedN6nGAAAAABJRU5ErkJggg=="},"1b25":function(t,e,n){"use strict";n.d(e,"e",(function(){return a})),n.d(e,"f",(function(){return c})),n.d(e,"l",(function(){return u})),n.d(e,"h",(function(){return h})),n.d(e,"k",(function(){return d})),n.d(e,"i",(function(){return p})),n.d(e,"j",(function(){return f})),n.d(e,"g",(function(){return w})),n.d(e,"b",(function(){return A})),n.d(e,"d",(function(){return D})),n.d(e,"a",(function(){return C})),n.d(e,"c",(function(){return k}));var r=n("d72c"),i=n("c77f"),o=n("ca0e");class s{constructor(t){this.arr=t,this.pos=0}}const a=t=>new s(t),c=t=>t.pos!==t.arr.length,l=(t,e)=>{const n=r["c"](t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},u=t=>l(t,d(t)),h=t=>t.arr[t.pos++],d=t=>{let e=0,n=0;while(1){const r=t.arr[t.pos++];if(e|=(r&i["k"])<<n,n+=7,r<i["g"])return e>>>0;if(n>35)throw new Error("Integer out of range!")}},p=t=>{let e=t.arr[t.pos++],n=e&i["j"],r=6;const o=(e&i["f"])>0?-1:1;if(0===(e&i["g"]))return o*n;while(1){if(e=t.arr[t.pos++],n|=(e&i["k"])<<r,r+=7,e<i["g"])return o*(n>>>0);if(r>41)throw new Error("Integer out of range!")}},f=t=>{let e=d(t);if(0===e)return"";{let n=String.fromCodePoint(h(t));if(--e<100)while(e--)n+=String.fromCodePoint(h(t));else while(e>0){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},g=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},m=t=>g(t,4).getFloat32(0,!1),v=t=>g(t,8).getFloat64(0,!1),y=t=>g(t,8).getBigInt64(0,!1),b=[t=>{},t=>null,p,m,v,y,t=>!1,t=>!0,f,t=>{const e=d(t),n={};for(let r=0;r<e;r++){const e=f(t);n[e]=w(t)}return n},t=>{const e=d(t),n=[];for(let r=0;r<e;r++)n.push(w(t));return n},u],w=t=>b[127-h(t)](t);class A extends s{constructor(t,e){super(t),this.reader=e,this.s=null,this.count=0}read(){return 0===this.count&&(this.s=this.reader(this),c(this)?this.count=d(this)+1:this.count=-1),this.count--,this.s}}class D extends s{constructor(t){super(t),this.s=0,this.count=0}read(){if(0===this.count){this.s=p(this);const t=o["d"](this.s);this.count=1,t&&(this.s=-this.s,this.count=d(this)+2)}return this.count--,this.s}}class C extends s{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(0===this.count){const t=p(this),e=1&t;this.diff=t>>1,this.count=1,e&&(this.count=d(this)+2)}return this.s+=this.diff,this.count--,this.s}}class k{constructor(t){this.decoder=new D(t),this.str=f(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),e=this.str.slice(this.spos,t);return this.spos=t,e}}},"1d2f":function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c}));Object.assign;const r=Object.keys,i=(t,e)=>{const n=[];for(const r in t)n.push(e(t[r],r));return n},o=t=>r(t).length,s=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},a=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),c=(t,e)=>t===e||o(t)===o(e)&&s(t,(t,n)=>(void 0!==t||a(e,n))&&e[n]===t)},"1d8c":function(t,e,n){"use strict";(function(t){n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return p}));var r=n("2309"),i=n("5da9"),o=n("e394"),s=n("c823");const a="undefined"!==typeof t&&t.release&&/node|io\.js/.test(t.release.name),c="undefined"!==typeof window&&!a;"undefined"!==typeof navigator&&/Mac/.test(navigator.platform);let l;const u=[],h=()=>{if(void 0===l)if(a){l=r["c"]();const e=t.argv;let n=null;for(let t=0;t<e.length;t++){const r=e[t];"-"===r[0]?(null!==n&&l.set(n,""),n=r):null!==n?(l.set(n,r),n=null):u.push(r)}null!==n&&l.set(n,"")}else"object"===typeof location?(l=r["c"](),(location.search||"?").slice(1).split("&").forEach(t=>{if(0!==t.length){const[e,n]=t.split("=");l.set("--"+i["a"](e,"-"),n),l.set("-"+i["a"](e,"-"),n)}})):l=r["c"]();return l},d=t=>h().has(t),p=t=>a?o["a"](Object({NODE_ENV:"production",VUE_APP_API_URL:"http://localhost:3001",VUE_APP_TINY_API_KEY:"kefffhm4cjnw3ct3tuopcsd6dyfuprfcfo1giwnzv7hj3v25",VUE_APP_CODOX_TINYMCE_API_KEY:"2242e59f-ca56-4163-ab05-8c22e6bf2780",VUE_APP_INTERCOM_APP_ID:"rqykcrq0",VUE_APP_HOTJAR_SITE_ID:"2403607",VUE_APP_GOOGLE_ANALYTICS_ID:"G-1KNG2RNTQ6",VUE_APP_GTM_ID:"GTM-PMZND6X",VUE_APP_AMPLITUDE_API_KEY:"d092d4bbc004a77f4608a3dc8b2f43e8",VUE_APP_STRIPE_TEST_PUBLISHABLE_KEY:"pk_test_51AL0N7BGZzvzQJFhpgU7E4loSdF3YrT1qpXCIR2sHm1UpOcjWnCAgiSxA17eHaOllCubpuyH6Dc6Y24nKPPpOaRp00ZTWi04Uq",VUE_APP_STRIPE_LIVE_PUBLISHABLE_KEY:"pk_live_51AL0N7BGZzvzQJFhVVCvZIKVchVPlMej91WC6XOcolkYe5s6xUk2UEk6gPFBugOEdhHcjhpQ8Cm40C6FkSdv2Wvn00nckwvDYk",BASE_URL:"/"})[t.toUpperCase()]):o["a"](s["b"].getItem(t)),f=t=>d("--"+t)||null!==p(t);f("production")}).call(this,n("4362"))},"1e58":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o}));const r=t=>new Error(t),i=()=>{throw r("Method unimplemented")},o=()=>{throw r("Unexpected case")}},2163:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return a}));n("fca1");var r=n("1d2f");const i=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&i(t,e,n+1)}},o=()=>{},s=(t,e)=>t===e,a=(t,e)=>{if(null==t||null==e)return s(t,e);if(t.constructor!==e.constructor)return!1;if(t===e)return!0;switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break;case Set:if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break;case Map:if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!a(t.get(n),e.get(n)))return!1;break;case Object:if(r["d"](t)!==r["d"](e))return!1;for(const n in t)if(!r["b"](t,n)||!a(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!a(t[n],e[n]))return!1;break;default:return!1}return!0}},2309:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return a}));const r=()=>new Map,i=t=>{const e=r();return t.forEach((t,n)=>{e.set(n,t)}),e},o=(t,e,n)=>{let r=t.get(e);return void 0===r&&t.set(e,r=n()),r},s=(t,e)=>{const n=[];for(const[r,i]of t)n.push(e(i,r));return n},a=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1}},"23cc":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADASURBVHgB1VKxDcJADLQdIiizRJQoVTZBTADZACZgBTaADVAmYAS+SpMl6KPY2JEegZTCFYhz49e/z77zA/wa6HlUpVXNyOt4HmVs+6EPli/ACQTcC0pmeaKhmAjIU9wNXRCSw9ydi8AkgMARGBoUfLzfuSRo9zMxbWwSJQvos+7bMJ15mtcxL5bF3VP3MtH2TEi3clVumfiacNJ4CD5MRMRM3b6o2zszzEMwu0b9MKcoxz0BCbWsradJNFKN/8ATmmI5I/+AZKwAAAAASUVORK5CYII="},"26ea":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAECSURBVHgBrVPBjcIwEJzlCHfPlOAPwvBKCXRwdHDXAVABogOoAKgASqADeMILOoBnECLLOAIEKCQkYqTIsdcz3p21gRQ0vEaADJReBQI/8KNSNEVRgTAMWxyMLdsmigio6q+o7PGFHvIK2B9rBNKiSIfTppvnEnAkftvVcTXhOEeEv3wCSoJiHP8L+grtGN/4SVsFCemTvGH9SxXdXzNyIuvDevi8v4wX6ZMwo9DlFJopcF0ZIgu179rUevahZncn6pX6rupVMy9WjKR60zrxNijybyt2dL92MzEOCEyGhosb+tOloQO3cDNRhK6rbtPYNDNgZ4ycZIEicK+TJrfxSZwB805KfYV4zy8AAAAASUVORK5CYII="},"28e1":function(t,e,n){"use strict";n("7d93")},"2bfc":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADySURBVHgBnVLJDcIwENyNOSJe7oB8EBEvOoEOgAqgA0QlQAdJB5TAj0h8KCE/UFC8jImInOOBMg8f653xetZEHcB2CP0wYOGFiOhGhkeP5JWcqyELQyshWbaqGl6Gg/DYJFkIXZIsOXjixW7Cc/TcWK5L9OrKwhK4e//la4itmVhPh9OtjfXqpFt2izBFDTGSK96tW0mT/mSuRJWG5Jyn9/f96uZUSHBxDck9lo9fTJEKZoPZzsCtVhLiY4wna0gpBAOMGF00p0DDiH/wvYmZU7dPUC8TcDZHaRqztm0pSbA5Rmm6TRW/JILdtsmpKImpKz763FKfifFCFgAAAABJRU5ErkJggg=="},"2e30":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return S}));var r=n("47db"),i=n("69a7"),o=n("dbda"),s=n("1b25"),a=n("55a9"),c=n("6dde"),l=n("f248"),u=n("3edb"),h=n("e6c4"),d=n("ca0e"),p=n("c757");const f=0,g=3,m=1,v=2,y=[];y[f]=(t,e,n,r,i)=>{o["n"](t,f);const s=a["b"](e,t,n.doc,n);r&&s===a["a"]&&!n.synced&&(n.synced=!0)},y[g]=(t,e,n,r,i)=>{o["n"](t,m),o["o"](t,l["c"](n.awareness,Array.from(n.awareness.getStates().keys())))},y[m]=(t,e,n,r,i)=>{l["b"](n.awareness,s["l"](e),n)},y[v]=(t,e,n,r,i)=>{c["a"](e,n.doc,D)};const b=1200,w=2500,A=3e4,D=(t,e)=>console.warn(`Permission denied to access ${t.url}.\n${e}`),C=(t,e,n)=>{const r=s["e"](e),i=o["e"](),a=s["k"](r),c=t.messageHandlers[a];return c?c(i,r,t,n,a):console.error("Unable to compute message"),i},k=t=>{if(t.shouldConnect&&null===t.ws){const e=new t._WS(t.url);e.binaryType="arraybuffer",t.ws=e,t.wsconnecting=!0,t.wsconnected=!1,t.synced=!1,e.onmessage=n=>{t.wsLastMessageReceived=i["a"]();const r=C(t,new Uint8Array(n.data),!0);o["f"](r)>1&&e.send(o["g"](r))},e.onclose=()=>{t.ws=null,t.wsconnecting=!1,t.wsconnected?(t.wsconnected=!1,t.synced=!1,l["d"](t.awareness,Array.from(t.awareness.getStates().keys()).filter(e=>e!==t.doc.clientID),t),t.emit("status",[{status:"disconnected"}])):t.wsUnsuccessfulReconnects++,setTimeout(k,d["g"](d["e"](t.wsUnsuccessfulReconnects+1)*b,w),t)},e.onopen=()=>{t.wsLastMessageReceived=i["a"](),t.wsconnecting=!1,t.wsconnected=!0,t.wsUnsuccessfulReconnects=0,t.emit("status",[{status:"connected"}]);const n=o["e"]();if(o["n"](n,f),a["c"](n,t.doc),e.send(o["g"](n)),null!==t.awareness.getLocalState()){const n=o["e"]();o["n"](n,m),o["o"](n,l["c"](t.awareness,[t.doc.clientID])),e.send(o["g"](n))}},t.emit("status",[{status:"connecting"}])}},E=(t,e)=>{t.wsconnected&&t.ws.send(e),t.bcconnected&&t.mux(()=>{r["a"](t.bcChannel,e)})};class S extends h["a"]{constructor(e,n,s,{connect:c=!0,awareness:h=new l["a"](s),params:d={},WebSocketPolyfill:g=WebSocket,resyncInterval:v=-1}={}){super();while("/"===e[e.length-1])e=e.slice(0,e.length-1);const b=p["a"](d);this.bcChannel=e+"/"+n,this.url=e+"/"+n+(0===b.length?"":"?"+b),this.roomname=n,this.doc=s,this._WS=g,this.awareness=h,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.wsUnsuccessfulReconnects=0,this.messageHandlers=y.slice(),this.mux=u["a"](),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=c,this._resyncInterval=0,v>0&&(this._resyncInterval=setInterval(()=>{if(this.ws){const t=o["e"]();o["n"](t,f),a["c"](t,s),this.ws.send(o["g"](t))}},v)),this._bcSubscriber=t=>{this.mux(()=>{const e=C(this,new Uint8Array(t),!1);o["f"](e)>1&&r["a"](this.bcChannel,o["g"](e))})},this._updateHandler=(t,e)=>{if(e!==this){const e=o["e"]();o["n"](e,f),a["e"](e,t),E(this,o["g"](e))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:t,updated:e,removed:n},r)=>{const i=t.concat(e).concat(n),s=o["e"]();o["n"](s,m),o["o"](s,l["c"](h,i)),E(this,o["g"](s))},this._beforeUnloadHandler=()=>{l["d"](this.awareness,[s.clientID],"window unload")},"undefined"!==typeof window?window.addEventListener("beforeunload",this._beforeUnloadHandler):"undefined"!==typeof t&&t.on("exit",()=>this._beforeUnloadHandler),h.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval(()=>{this.wsconnected&&A<i["a"]()-this.wsLastMessageReceived&&this.ws.close()},A/10),c&&this.connect()}get synced(){return this._synced}set synced(t){this._synced!==t&&(this._synced=t,this.emit("synced",[t]),this.emit("sync",[t]))}destroy(){0!==this._resyncInterval&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),"undefined"!==typeof window?window.removeEventListener("beforeunload",this._beforeUnloadHandler):"undefined"!==typeof t&&t.off("exit",()=>this._beforeUnloadHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){this.bcconnected||(r["b"](this.bcChannel,this._bcSubscriber),this.bcconnected=!0),this.mux(()=>{const t=o["e"]();o["n"](t,f),a["c"](t,this.doc),r["a"](this.bcChannel,o["g"](t));const e=o["e"]();o["n"](e,f),a["d"](e,this.doc),r["a"](this.bcChannel,o["g"](e));const n=o["e"]();o["n"](n,g),r["a"](this.bcChannel,o["g"](n));const i=o["e"]();o["n"](i,m),o["o"](i,l["c"](this.awareness,[this.doc.clientID])),r["a"](this.bcChannel,o["g"](i))})}disconnectBc(){const t=o["e"]();o["n"](t,m),o["o"](t,l["c"](this.awareness,[this.doc.clientID],new Map)),E(this,o["g"](t)),this.bcconnected&&(r["c"](this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.wsconnected||null!==this.ws||(k(this),this.connectBc())}}}).call(this,n("4362"))},3650:function(t,e,n){"use strict";n("f433")},"3edb":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else void 0!==n&&n()}}},4113:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));const r=t=>({[Symbol.iterator](){return this},next:t}),i=(t,e)=>r(()=>{let n;do{n=t.next()}while(!n.done&&!e(n.value));return n}),o=(t,e)=>r(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}})},4384:function(t,e,n){},"47db":function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return h})),n.d(e,"a",(function(){return d}));var r=n("2309"),i=n("d72c"),o=n("c823");const s=new Map;class a{constructor(t){this.room=t,this.onmessage=null,o["a"](e=>e.key===t&&null!==this.onmessage&&this.onmessage({data:i["d"](e.newValue||"")}))}postMessage(t){o["b"].setItem(this.room,i["e"](i["b"](t)))}}const c="undefined"===typeof BroadcastChannel?a:BroadcastChannel,l=t=>r["e"](s,t,()=>{const e=new Set,n=new c(t);return n.onmessage=t=>e.forEach(e=>e(t.data)),{bc:n,subs:e}}),u=(t,e)=>l(t).subs.add(e),h=(t,e)=>l(t).subs.delete(e),d=(t,e)=>{const n=l(t);n.bc.postMessage(e),n.subs.forEach(t=>t(e))}},"48f7":function(t,e,n){"use strict";n.d(e,"a",(function(){return w})),n.d(e,"b",(function(){return A})),n.d(e,"c",(function(){return D}));const r="proposal-intro",i="proposal-summary",o="creative-rationale",s="simplify",a="speech-intro",c="blog-intro",l="blog-outline",u="essay-intro",h="essay-outline",d="logline",p="blurb",f="conclusion",g="plot-summary",m="character-sketch",v="freestyle",y="reframer",b="bullet-point",w={SPEECH_INTRO:a,PROPOSAL_INTRO:r,PROPOSAL_SUMMARY:i,CREATIVE_RATIONALE:o,SIMPLIFY:s,BLOG_INTRO:c,BLOG_OUTLINE:l,ESSAY_INTRO:u,ESSAY_OUTLINE:h,LOGLINE:d,BLURB:p,CONCLUSION:f,PLOT_SUMMARY:g,CHARACTER_SKETCH:m,FREESTYLE:v,REFRAMER:y,BULLET_POINT:b},A={[l]:"Outline",[c]:"Introduction",[b]:"Bullet Points",[v]:"Paragraph",[f]:"Conclusion",[p]:"Blurb",[m]:"Character Sketch",[o]:"Creative Rationale",[f]:"Conclusion",[u]:"Essay Intro",[h]:"Essay Outline",[d]:"Logline",[g]:"Plot Summary",[r]:"Proposal Intro",[i]:"Proposal Summary",[s]:"Simplify",[a]:"Speech Intro",[y]:"Reframe"},D={[l]:"Give me an outline for {e.g AN ARTICLE ABOUT THE IMPORTANCE OF DREAMING BIG}",[c]:"Give me an introduction for {e.g. AN ARTICLE ABOUT DREAMING BIG}. The tone should be {e.g. POSITIVE}",[v]:"Give me a paragraph about {e.g. THE BENEFITS OF DREAMING BIG}",[f]:"Give me a conclusion for {e.g. AN ARTICLE ABOUT DREAMING BIG}",[a]:"Give me a speech about {e.g HOW TO ACTIVATE YOUR DREAMS}",[r]:"Give me a intro for a proposal about {e.g. COMMERCIALIZING THE IDEA OF DREAMING BIG}",[i]:"Give me a proposal summary outlining {e.g. A BETTER WAY TO DREAM BIG}",[o]:"Give me a creative rationale for { e.g A CAMPAIGN ABOUT DREAMING BIG}",[m]:"Give me a character in a story about {e.g. A DREAM DEFERRED}",[s]:"Give me a simple way to explain {e.g. NUCLEAR FISSION SO THAT A 5-YEAR OLD WILL UNDERSTAND}",[u]:'Give me an essay intro about {e.g. THE PLAY "A RAISIN IN THE SUN"}',[h]:'Give me an outline for an essay about { e.g. THE PLAY "A RAISIN IN THE SUN"}',[d]:"Give me a logline for a film about {e.g. THE GIRL WHO DARED TO DREAM BIG} ",[p]:"Give me a blurb for a book about {e.g. DREAMING BIG}",[g]:"Give me a plot for a story about {e.g. A DREAM DEFERRED}",[y]:"Give me a way to reframe {e.g. AN ARGUMENT AGAINST THE IMPORTANCE OF DREAMING BIG}",[b]:"Give me bullet points for {e.g. A PRESENTATION ABOUT THE IMPORTANCE OF DREAMING BIG}"}},"4aa6":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=()=>new Set},"4e46":function(t,e,n){},"4f9a":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-fluid"},[n("writing-toolbar",{ref:"writing_toolbar",attrs:{baseData:t.baseData,answers:t.articles,past_answers:[],tool_type:t.tool_type}}),n("div",{staticClass:"article-container artical-wrappre"},[n("div",{staticClass:"article-editor"},[n("div",{staticClass:"search-container"},[n("b-tabs",{staticClass:"mwidth_50",attrs:{"content-class":"compose-tab-body bg-white p-3 hideoutline",fill:""},model:{value:t.selectedTab,callback:function(e){t.selectedTab=e},expression:"selectedTab"}},[n("b-tab",{staticClass:"smalltabs-article-compose",attrs:{title:"COMPOSE",active:0===t.selectedTab}},[n("b-tabs",{attrs:{"content-class":"mt-3"}},[n("b-tab",{attrs:{title:"First Draft"}},[n("generate-form",{on:{generated:t.generatedArticle}})],1),n("b-tab",{attrs:{title:"Free Style",active:""}},[n("generate-free-from",{on:{generated:t.generatedArticle}})],1)],1)],1),n("b-tab",{staticClass:"smalltabs-article",attrs:{title:"RESEARCH HUB",active:1===t.selectedTab}},[n("b-tabs",{attrs:{"content-class":"mt-3"}},[n("b-tab",{attrs:{title:"News",active:""}},[n("news-tab",{attrs:{query:t.articleTitle}})],1),n("b-tab",{attrs:{title:"Research"}},[n("semantic-scholar-info-tab",{attrs:{query:t.articleTitle}})],1),n("b-tab",{attrs:{title:"Facts"}},[n("fact-search-tab",{attrs:{query:t.articleTitle}})],1)],1)],1)],1)],1),n("div",{staticClass:"edit-container"},[n("article-editor",{ref:"articleEditor",attrs:{articles:t.articles}})],1)])])],1)},i=[],o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"companion-tab news-container custm-reserach"},[r("div",{staticClass:"searchbar-topp"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],attrs:{type:"text",placeholder:"Search verified sources"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),r("img",{attrs:{src:n("7a49")}})]),t.loading?r("div",{staticClass:"d-flex p-5 justify-content-center"},[r("b-spinner",{attrs:{variant:"primary",label:"Spinning"}})],1):t._e(),t._l(t.results,(function(e,i){return r("div",{key:i,staticClass:"item-info"},[r("div",{staticClass:"add-to-notes"},[r("article-actions",{on:{addToNotes:function(n){return t.addToNotes(e)},addToDocument:function(n){return t.addToDocument(e)},copyToClipboard:function(n){return t.copyToClipboard(e)}}})],1),r("div",{staticClass:"item-title"},[t._v(t._s(e.title))]),r("div",{staticClass:"truncated"},[t._v(" "+t._s(e.summary)+" ")]),r("div",{staticClass:"item-property linkks"},[r("a",{attrs:{href:e.link,target:"_blank"}},[t._v(t._s(e.link))]),r("img",{attrs:{src:n("7ff2")}})])])}))],2)},s=[],a=n("c0dc"),c=n("cf45"),l=n("5752"),u={components:{ArticleActions:l["a"]},name:"NewsTab",props:{query:String},data(){return{results:[],loading:!1}},mounted(){this.loadData()},methods:{addToDocument(t){this.$root.$emit("addToDocument",{slug:t.title,text:t.summary,authors:t.author,url:t.link,year:t.published_date,publishedAt:(new Date).toLocaleDateString()})},addToNotes(t){this.$root.$emit("addToNotes",{slug:t.title,category:"Article",text:t.summary,authors:t.author,url:t.link,year:t.published_date,publishedAt:(new Date).toLocaleDateString(),baseData:{type:"Article"}})},copyToClipboard(t){Object(c["a"])(t.summary)},async loadData(){try{if(this.results=[],this.loading=!0,this.query){const{data:{results:t}}=await Object(a["a"])().post("/doc/news-info",{query:this.query||""});this.results=t}}catch(t){}this.loading=!1}},watch:{query:function(){this.loadData()}}},h=u,d=n("2877"),p=Object(d["a"])(h,o,s,!1,null,null,null),f=p.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"editor-area"},[n("b-tabs",{attrs:{"content-class":"bg-white"},scopedSlots:t._u([{key:"tabs-end",fn:function(){return[n("b-nav-item",{attrs:{role:"presentation",href:"#"},on:{click:function(e){return e.preventDefault(),t.addNewArticle.apply(null,arguments)}}},[n("b",[t._v("+")])])]},proxy:!0}]),model:{value:t.selectedTab,callback:function(e){t.selectedTab=e},expression:"selectedTab"}},t._l(t.articles,(function(e,r){return n("b-tab",{key:r,attrs:{active:r===t.articles.length-1},scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"draft-header"},[t._v(" "+t._s(e.baseData.title)+" "),n("span",{staticClass:"material-icons-outlined close-btn",on:{click:function(e){return t.removeArticleFromList(r)}}},[t._v(" close ")])])]},proxy:!0}],null,!0)},[n("div",{ref:"articleContainer",refInFor:!0},[n("tiptap-rich-editor",{attrs:{docId:e._id,title:e.baseData.title,cites:e.cites,baseData:e.baseData,ownerId:e.ownerId},model:{value:e.text,callback:function(n){t.$set(e,"text",n)},expression:"item.text"}})],1)])})),1)],1),n("add-collaborator-modal")],1)},m=[],v=n("2f62"),y=n("0aa0"),b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tiptap-editor-wrapper"},[t.editor?r("bubble-menu",{attrs:{editor:t.editor}},[r("div",{staticClass:"article-tool"},[r("b-button-group",[r("button",{staticClass:"btn",attrs:{type:"button"},on:{click:t.addTextToNotes}},[r("img",{attrs:{src:n("f4a0")}}),r("span",[t._v("Save To Notes")])]),r("button",{staticClass:"btn",attrs:{type:"button"},on:{click:t.copyToClipboard}},[r("img",{attrs:{src:n("7f35")}}),r("span",[t._v("Copy")])]),r("button",{staticClass:"btn",attrs:{type:"button",id:"smart_menu_more"},on:{click:function(e){t.show=!t.show}}},[r("img",{attrs:{src:n("fd28")}})])])],1)]):t._e(),t.editor?r("tiptap-toolbar",{attrs:{editor:t.editor,editing:t.editing},on:{downloadDoc:t.downloadDoc,downloadPdf:t.downloadPdf,downloadDocx:t.downloadDocx}}):t._e(),r("div",{staticClass:"tiptap-editor"},[r("editor-content",{attrs:{editor:t.editor}}),"<p></p>"===t.value?r("div",{staticClass:"editor-placeholder"},[t._v(" Start typing or use Compose Tab. ")]):t._e(),t.cites.length>0?r("div",{staticClass:"cites"},[r("div",[t._v("------------------------------------")]),t._l(t.cites,(function(e,n){return r("div",{key:n,staticClass:"cite-item"},[r("div",[r("sup",{staticClass:"font-weight-bold mr-2"},[t._v(t._s(n+1))]),e.authors?r("span",[t._v(t._s(e.authors)+".")]):t._e(),e.year?r("span",[t._v("("+t._s(e.year)+").")]):t._e(),e.slug?r("i",[t._v('"'+t._s(e.slug)+'"')]):t._e(),t._v(". "),e.url?r("a",{staticClass:"d-inline",attrs:{href:e.url}},[t._v(t._s(e.url))]):t._e(),t._v(" "+t._s(e.publishedAt)+" ")])])}))],2):t._e()],1),r("div",{staticClass:"d-flex align-items-center justify-content-between mt-3"},[r("div",[r("collaborators",{attrs:{collaborators:t.users}})],1),r("div",[r("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"icon-bttn",attrs:{size:"sm",variant:"secondary",title:"Save",disabled:!t.isChanged},on:{click:function(e){return t.saveArticle()}}},[r("img",{attrs:{src:n("2bfc")}})]),r("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mr-2 icon-bttn",attrs:{size:"sm",variant:"secondary",disabled:t.loading||!t.baseData.documentType||!t.baseData.title||!t.baseData.domain,title:"New Draft"},on:{click:function(e){return t.refreshArticle()}}},[r("img",{attrs:{src:n("bfc0")}}),t.loading?r("b-spinner",{staticClass:"refresh"}):t._e()],1)],1)]),r("b-popover",{ref:"popover",attrs:{show:t.show,target:"smart_menu_more",placement:"top"},on:{"update:show":function(e){t.show=e}}},[r("b-button-group",{staticStyle:{display:"flex","flex-direction":"column"}},[r("button",{staticClass:"btn",attrs:{type:"button",disabled:t.rewriting},on:{click:t.rewriteArticle}},[r("img",{attrs:{src:n("15ab")}}),r("span",[t._v(t._s(t.rewriting?"Rewriting":"Rewrite"))])]),r("button",{staticClass:"btn",attrs:{type:"button",disabled:t.expanding},on:{click:t.expandArticle}},[r("img",{attrs:{src:n("23cc")}}),r("span",[t._v(t._s(t.expanding?"Expanding":"Expand"))])]),r("button",{staticClass:"btn",attrs:{type:"button",disabled:t.shortening},on:{click:t.shortenArticle}},[r("img",{attrs:{src:n("7b62")}}),r("span",[t._v(t._s(t.shortening?"Shortening":"Shorten"))])]),r("button",{staticClass:"btn",attrs:{type:"button",disabled:t.writing},on:{click:t.free_write}},[r("img",{attrs:{src:n("26ea")}}),r("span",[t._v(t._s(t.writing?"Writing":"Free write"))])])])],1)],1)},w=[],A=n("1ab4"),D=n("9980");function C(t){this.j={},this.jr=[],this.jd=null,this.t=t}C.prototype={accepts:function(){return!!this.t},tt:function(t,e){if(e&&e.j)return this.j[t]=e,e;var n=e,r=this.j[t];if(r)return n&&(r.t=n),r;r=k();var i=T(this,t);return i?(Object.assign(r.j,i.j),r.jr.append(i.jr),r.jr=i.jd,r.t=n||i.t):r.t=n,this.j[t]=r,r}};var k=function(){return new C},E=function(t){return new C(t)},S=function(t,e,n){t.j[e]||(t.j[e]=n)},x=function(t,e,n){t.jr.push([e,n])},T=function(t,e){var n=t.j[e];if(n)return n;for(var r=0;r<t.jr.length;r++){var i=t.jr[r][0],o=t.jr[r][1];if(i.test(e))return o}return t.jd},_=function(t,e,n){for(var r=0;r<e.length;r++)S(t,e[r],n)},M=function(t,e){for(var n=0;n<e.length;n++){var r=e[n][0],i=e[n][1];S(t,r,i)}},O=function(t,e,n,r){var i,o=0,s=e.length;while(o<s&&(i=t.j[e[o]]))t=i,o++;if(o>=s)return[];while(o<s-1)i=r(),S(t,e[o],i),t=i,o++;S(t,e[s-1],n)},N="DOMAIN",F="LOCALHOST",I="TLD",R="NUM",B="PROTOCOL",L="MAILTO",j="WS",P="NL",z="OPENBRACE",U="OPENBRACKET",H="OPENANGLEBRACKET",$="OPENPAREN",J="CLOSEBRACE",V="CLOSEBRACKET",q="CLOSEANGLEBRACKET",G="CLOSEPAREN",W="AMPERSAND",K="APOSTROPHE",Q="ASTERISK",Y="AT",X="BACKSLASH",Z="BACKTICK",tt="CARET",et="COLON",nt="COMMA",rt="DOLLAR",it="DOT",ot="EQUALS",st="EXCLAMATION",at="HYPHEN",ct="PERCENT",lt="PIPE",ut="PLUS",ht="POUND",dt="QUERY",pt="QUOTE",ft="SEMI",gt="SLASH",mt="TILDE",vt="UNDERSCORE",yt="SYM",bt=Object.freeze({__proto__:null,DOMAIN:N,LOCALHOST:F,TLD:I,NUM:R,PROTOCOL:B,MAILTO:L,WS:j,NL:P,OPENBRACE:z,OPENBRACKET:U,OPENANGLEBRACKET:H,OPENPAREN:$,CLOSEBRACE:J,CLOSEBRACKET:V,CLOSEANGLEBRACKET:q,CLOSEPAREN:G,AMPERSAND:W,APOSTROPHE:K,ASTERISK:Q,AT:Y,BACKSLASH:X,BACKTICK:Z,CARET:tt,COLON:et,COMMA:nt,DOLLAR:rt,DOT:it,EQUALS:ot,EXCLAMATION:st,HYPHEN:at,PERCENT:ct,PIPE:lt,PLUS:ut,POUND:ht,QUERY:dt,QUOTE:pt,SEMI:ft,SLASH:gt,TILDE:mt,UNDERSCORE:vt,SYM:yt}),wt="aaa aarp abarth abb abbott abbvie abc able abogado abudhabi ac academy accenture accountant accountants aco actor ad adac ads adult ae aeg aero aetna af afamilycompany afl africa ag agakhan agency ai aig airbus airforce airtel akdn al alfaromeo alibaba alipay allfinanz allstate ally alsace alstom am amazon americanexpress americanfamily amex amfam amica amsterdam analytics android anquan anz ao aol apartments app apple aq aquarelle ar arab aramco archi army arpa art arte as asda asia associates at athleta attorney au auction audi audible audio auspost author auto autos avianca aw aws ax axa az azure ba baby baidu banamex bananarepublic band bank bar barcelona barclaycard barclays barefoot bargains baseball basketball bauhaus bayern bb bbc bbt bbva bcg bcn bd be beats beauty beer bentley berlin best bestbuy bet bf bg bh bharti bi bible bid bike bing bingo bio biz bj black blackfriday blockbuster blog bloomberg blue bm bms bmw bn bnpparibas bo boats boehringer bofa bom bond boo book booking bosch bostik boston bot boutique box br bradesco bridgestone broadway broker brother brussels bs bt budapest bugatti build builders business buy buzz bv bw by bz bzh ca cab cafe cal call calvinklein cam camera camp cancerresearch canon capetown capital capitalone car caravan cards care career careers cars casa case cash casino cat catering catholic cba cbn cbre cbs cc cd center ceo cern cf cfa cfd cg ch chanel channel charity chase chat cheap chintai christmas chrome church ci cipriani circle cisco citadel citi citic city cityeats ck cl claims cleaning click clinic clinique clothing cloud club clubmed cm cn co coach codes coffee college cologne com comcast commbank community company compare computer comsec condos construction consulting contact contractors cooking cookingchannel cool coop corsica country coupon coupons courses cpa cr credit creditcard creditunion cricket crown crs cruise cruises csc cu cuisinella cv cw cx cy cymru cyou cz dabur dad dance data date dating datsun day dclk dds de deal dealer deals degree delivery dell deloitte delta democrat dental dentist desi design dev dhl diamonds diet digital direct directory discount discover dish diy dj dk dm dnp do docs doctor dog domains dot download drive dtv dubai duck dunlop dupont durban dvag dvr dz earth eat ec eco edeka edu education ee eg email emerck energy engineer engineering enterprises epson equipment er ericsson erni es esq estate et etisalat eu eurovision eus events exchange expert exposed express extraspace fage fail fairwinds faith family fan fans farm farmers fashion fast fedex feedback ferrari ferrero fi fiat fidelity fido film final finance financial fire firestone firmdale fish fishing fit fitness fj fk flickr flights flir florist flowers fly fm fo foo food foodnetwork football ford forex forsale forum foundation fox fr free fresenius frl frogans frontdoor frontier ftr fujitsu fujixerox fun fund furniture futbol fyi ga gal gallery gallo gallup game games gap garden gay gb gbiz gd gdn ge gea gent genting george gf gg ggee gh gi gift gifts gives giving gl glade glass gle global globo gm gmail gmbh gmo gmx gn godaddy gold goldpoint golf goo goodyear goog google gop got gov gp gq gr grainger graphics gratis green gripe grocery group gs gt gu guardian gucci guge guide guitars guru gw gy hair hamburg hangout haus hbo hdfc hdfcbank health healthcare help helsinki here hermes hgtv hiphop hisamitsu hitachi hiv hk hkt hm hn hockey holdings holiday homedepot homegoods homes homesense honda horse hospital host hosting hot hoteles hotels hotmail house how hr hsbc ht hu hughes hyatt hyundai ibm icbc ice icu id ie ieee ifm ikano il im imamat imdb immo immobilien in inc industries infiniti info ing ink institute insurance insure int international intuit investments io ipiranga iq ir irish is ismaili ist istanbul it itau itv iveco jaguar java jcb je jeep jetzt jewelry jio jll jm jmp jnj jo jobs joburg jot joy jp jpmorgan jprs juegos juniper kaufen kddi ke kerryhotels kerrylogistics kerryproperties kfh kg kh ki kia kim kinder kindle kitchen kiwi km kn koeln komatsu kosher kp kpmg kpn kr krd kred kuokgroup kw ky kyoto kz la lacaixa lamborghini lamer lancaster lancia land landrover lanxess lasalle lat latino latrobe law lawyer lb lc lds lease leclerc lefrak legal lego lexus lgbt li lidl life lifeinsurance lifestyle lighting like lilly limited limo lincoln linde link lipsy live living lixil lk llc llp loan loans locker locus loft lol london lotte lotto love lpl lplfinancial lr ls lt ltd ltda lu lundbeck luxe luxury lv ly ma macys madrid maif maison makeup man management mango map market marketing markets marriott marshalls maserati mattel mba mc mckinsey md me med media meet melbourne meme memorial men menu merckmsd mg mh miami microsoft mil mini mint mit mitsubishi mk ml mlb mls mm mma mn mo mobi mobile moda moe moi mom monash money monster mormon mortgage moscow moto motorcycles mov movie mp mq mr ms msd mt mtn mtr mu museum mutual mv mw mx my mz na nab nagoya name nationwide natura navy nba nc ne nec net netbank netflix network neustar new news next nextdirect nexus nf nfl ng ngo nhk ni nico nike nikon ninja nissan nissay nl no nokia northwesternmutual norton now nowruz nowtv np nr nra nrw ntt nu nyc nz obi observer off office okinawa olayan olayangroup oldnavy ollo om omega one ong onl online onyourside ooo open oracle orange org organic origins osaka otsuka ott ovh pa page panasonic paris pars partners parts party passagens pay pccw pe pet pf pfizer pg ph pharmacy phd philips phone photo photography photos physio pics pictet pictures pid pin ping pink pioneer pizza pk pl place play playstation plumbing plus pm pn pnc pohl poker politie porn post pr pramerica praxi press prime pro prod productions prof progressive promo properties property protection pru prudential ps pt pub pw pwc py qa qpon quebec quest qvc racing radio raid re read realestate realtor realty recipes red redstone redumbrella rehab reise reisen reit reliance ren rent rentals repair report republican rest restaurant review reviews rexroth rich richardli ricoh ril rio rip rmit ro rocher rocks rodeo rogers room rs rsvp ru rugby ruhr run rw rwe ryukyu sa saarland safe safety sakura sale salon samsclub samsung sandvik sandvikcoromant sanofi sap sarl sas save saxo sb sbi sbs sc sca scb schaeffler schmidt scholarships school schule schwarz science scjohnson scot sd se search seat secure security seek select sener services ses seven sew sex sexy sfr sg sh shangrila sharp shaw shell shia shiksha shoes shop shopping shouji show showtime si silk sina singles site sj sk ski skin sky skype sl sling sm smart smile sn sncf so soccer social softbank software sohu solar solutions song sony soy spa space sport spot spreadbetting sr srl ss st stada staples star statebank statefarm stc stcgroup stockholm storage store stream studio study style su sucks supplies supply support surf surgery suzuki sv swatch swiftcover swiss sx sy sydney systems sz tab taipei talk taobao target tatamotors tatar tattoo tax taxi tc tci td tdk team tech technology tel temasek tennis teva tf tg th thd theater theatre tiaa tickets tienda tiffany tips tires tirol tj tjmaxx tjx tk tkmaxx tl tm tmall tn to today tokyo tools top toray toshiba total tours town toyota toys tr trade trading training travel travelchannel travelers travelersinsurance trust trv tt tube tui tunes tushu tv tvs tw tz ua ubank ubs ug uk unicom university uno uol ups us uy uz va vacations vana vanguard vc ve vegas ventures verisign versicherung vet vg vi viajes video vig viking villas vin vip virgin visa vision viva vivo vlaanderen vn vodka volkswagen volvo vote voting voto voyage vu vuelos wales walmart walter wang wanggou watch watches weather weatherchannel webcam weber website wed wedding weibo weir wf whoswho wien wiki williamhill win windows wine winners wme wolterskluwer woodside work works world wow ws wtc wtf xbox xerox xfinity xihuan xin xxx xyz yachts yahoo yamaxun yandex ye yodobashi yoga yokohama you youtube yt yun za zappos zara zero zip zm zone zuerich zw vermögensberater-ctb vermögensberatung-pwb ελ ευ бг бел дети ею католик ком қаз мкд мон москва онлайн орг рус рф сайт срб укр გე հայ ישראל קום ابوظبي اتصالات ارامكو الاردن البحرين الجزائر السعودية العليان المغرب امارات ایران بارت بازار بھارت بيتك پاکستان ڀارت تونس سودان سورية شبكة عراق عرب عمان فلسطين قطر كاثوليك كوم مصر مليسيا موريتانيا موقع همراه कॉम नेट भारत भारतम् भारोत संगठन বাংলা ভারত ভাৰত ਭਾਰਤ ભારત ଭାରତ இந்தியா இலங்கை சிங்கப்பூர் భారత్ ಭಾರತ ഭാരതം ලංකා คอม ไทย ລາວ 닷넷 닷컴 삼성 한국 アマゾン グーグル クラウド コム ストア セール ファッション ポイント みんな 世界 中信 中国 中國 中文网 亚马逊 企业 佛山 信息 健康 八卦 公司 公益 台湾 台灣 商城 商店 商标 嘉里 嘉里大酒店 在线 大众汽车 大拿 天主教 娱乐 家電 广东 微博 慈善 我爱你 手机 招聘 政务 政府 新加坡 新闻 时尚 書籍 机构 淡马锡 游戏 澳門 点看 移动 组织机构 网址 网店 网站 网络 联通 诺基亚 谷歌 购物 通販 集团 電訊盈科 飞利浦 食品 餐厅 香格里拉 香港".split(" "),At=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,Dt=/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/,Ct=/\uFE0F/,kt=/\d/,Et=/\s/;function St(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=k(),n=E(R),r=E(N),i=k(),o=E(j),s=[[kt,r],[At,r],[Dt,r],[Ct,r]],a=function(){var t=E(N);return t.j={"-":i},t.jr=[].concat(s),t},c=function(t){var e=a();return e.t=t,e};M(e,[["'",E(K)],["{",E(z)],["[",E(U)],["<",E(H)],["(",E($)],["}",E(J)],["]",E(V)],[">",E(q)],[")",E(G)],["&",E(W)],["*",E(Q)],["@",E(Y)],["`",E(Z)],["^",E(tt)],[":",E(et)],[",",E(nt)],["$",E(rt)],[".",E(it)],["=",E(ot)],["!",E(st)],["-",E(at)],["%",E(ct)],["|",E(lt)],["+",E(ut)],["#",E(ht)],["?",E(dt)],['"',E(pt)],["/",E(gt)],[";",E(ft)],["~",E(mt)],["_",E(vt)],["\\",E(X)]]),S(e,"\n",E(P)),x(e,Et,o),S(o,"\n",k()),x(o,Et,o);for(var l=0;l<wt.length;l++)O(e,wt[l],c(I),a);var u=a(),h=a(),d=a(),p=a();O(e,"file",u,a),O(e,"ftp",h,a),O(e,"http",d,a),O(e,"mailto",p,a);var f=a(),g=E(B),m=E(L);S(h,"s",f),S(h,":",g),S(d,"s",f),S(d,":",g),S(u,":",g),S(f,":",g),S(p,":",m);for(var v=a(),y=0;y<t.length;y++)O(e,t[y],v,a);return S(v,":",g),O(e,"localhost",c(F),a),x(e,kt,n),x(e,At,r),x(e,Dt,r),x(e,Ct,r),x(n,kt,n),x(n,At,r),x(n,Dt,r),x(n,Ct,r),S(n,"-",i),S(r,"-",i),S(i,"-",i),x(r,kt,r),x(r,At,r),x(r,Dt,r),x(r,Ct,r),x(i,kt,r),x(i,At,r),x(i,Dt,r),x(i,Ct,r),e.jd=E(yt),e}function xt(t,e){var n=Tt(e.replace(/[A-Z]/g,(function(t){return t.toLowerCase()}))),r=n.length,i=[],o=0,s=0;while(s<r){var a=t,c=null,l=0,u=null,h=-1,d=-1;while(s<r&&(c=T(a,n[s])))a=c,a.accepts()?(h=0,d=0,u=a):h>=0&&(h+=n[s].length,d++),l+=n[s].length,o+=n[s].length,s++;o-=h,s-=d,l-=h,i.push({t:u.t,v:e.substr(o-l,l),s:o-l,e:o})}return i}function Tt(t){var e=[],n=t.length,r=0;while(r<n){var i=t.charCodeAt(r),o=void 0,s=i<55296||i>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}function _t(t){return _t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(t)}var Mt={defaultProtocol:"http",events:null,format:Nt,formatHref:Nt,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:0,className:null,attributes:null,ignoreTags:[]};function Ot(t){t=t||{},this.defaultProtocol="defaultProtocol"in t?t.defaultProtocol:Mt.defaultProtocol,this.events="events"in t?t.events:Mt.events,this.format="format"in t?t.format:Mt.format,this.formatHref="formatHref"in t?t.formatHref:Mt.formatHref,this.nl2br="nl2br"in t?t.nl2br:Mt.nl2br,this.tagName="tagName"in t?t.tagName:Mt.tagName,this.target="target"in t?t.target:Mt.target,this.rel="rel"in t?t.rel:Mt.rel,this.validate="validate"in t?t.validate:Mt.validate,this.truncate="truncate"in t?t.truncate:Mt.truncate,this.className="className"in t?t.className:Mt.className,this.attributes=t.attributes||Mt.attributes,this.ignoreTags=[];for(var e=("ignoreTags"in t?t.ignoreTags:Mt.ignoreTags),n=0;n<e.length;n++)this.ignoreTags.push(e[n].toUpperCase())}function Nt(t){return t}Ot.prototype={resolve:function(t){var e=t.toHref(this.defaultProtocol);return{formatted:this.get("format",t.toString(),t),formattedHref:this.get("formatHref",e,t),tagName:this.get("tagName",e,t),className:this.get("className",e,t),target:this.get("target",e,t),rel:this.get("rel",e,t),events:this.getObject("events",e,t),attributes:this.getObject("attributes",e,t),truncate:this.get("truncate",e,t)}},check:function(t){return this.get("validate",t.toString(),t)},get:function(t,e,n){var r,i=this[t];if(!i)return i;switch(_t(i)){case"function":return i(e,n.t);case"object":return r=n.t in i?i[n.t]:Mt[t],"function"===typeof r?r(e,n.t):r}return i},getObject:function(t,e,n){var r=this[t];return"function"===typeof r?r(e,n.t):r}};function Ft(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.create(t.prototype);for(var i in n)r[i]=n[i];return r.constructor=e,e.prototype=r,e}function It(){}function Rt(t,e){function n(e,n){this.t=t,this.v=e,this.tk=n}return Ft(It,n,e),n}It.prototype={t:"token",isLink:!1,toString:function(){return this.v},toHref:function(){return this.toString()},startIndex:function(){return this.tk[0].s},endIndex:function(){return this.tk[this.tk.length-1].e},toObject:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt.defaultProtocol;return{type:this.t,value:this.v,isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}}};var Bt=Rt("email",{isLink:!0}),Lt=Rt("email",{isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),jt=Rt("text"),Pt=Rt("nl"),zt=Rt("url",{isLink:!0,toHref:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt.defaultProtocol,e=this.tk,n=!1,r=!1,i=[],o=0;while(e[o].t===B)n=!0,i.push(e[o].v),o++;while(e[o].t===gt)r=!0,i.push(e[o].v),o++;for(;o<e.length;o++)i.push(e[o].v);return i=i.join(""),n||r||(i="".concat(t,"://").concat(i)),i},hasProtocol:function(){return this.tk[0].t===B}}),Ut=Object.freeze({__proto__:null,MultiToken:It,Base:It,createTokenClass:Rt,MailtoEmail:Bt,Email:Lt,Text:jt,Nl:Pt,Url:zt});function Ht(){var t=k(),e=k(),n=k(),r=k(),i=k(),o=k(),s=k(),a=E(zt),c=k(),l=E(zt),u=E(zt),h=k(),d=k(),p=k(),f=k(),g=k(),m=E(zt),v=E(zt),y=E(zt),b=E(zt),w=k(),A=k(),D=k(),C=k(),x=k(),T=k(),M=E(Lt),O=k(),j=E(Lt),bt=E(Bt),wt=k(),At=k(),Dt=k(),Ct=k(),kt=E(Pt);S(t,P,kt),S(t,B,e),S(t,L,n),S(e,gt,r),S(r,gt,i),S(t,I,o),S(t,N,o),S(t,F,a),S(t,R,o),S(i,I,u),S(i,N,u),S(i,R,u),S(i,F,u),S(o,it,s),S(x,it,T),S(s,I,a),S(s,N,o),S(s,R,o),S(s,F,o),S(T,I,M),S(T,N,x),S(T,R,x),S(T,F,x),S(a,it,s),S(M,it,T),S(a,et,c),S(a,gt,u),S(c,R,l),S(l,gt,u),S(M,et,O),S(O,R,j);var Et=[W,Q,Y,X,Z,tt,rt,N,ot,at,F,R,ct,lt,ut,ht,B,gt,yt,mt,I,vt],St=[K,q,J,V,G,et,nt,it,st,H,z,U,$,dt,pt,ft];S(u,z,d),S(u,U,p),S(u,H,f),S(u,$,g),S(h,z,d),S(h,U,p),S(h,H,f),S(h,$,g),S(d,J,u),S(p,V,u),S(f,q,u),S(g,G,u),S(m,J,u),S(v,V,u),S(y,q,u),S(b,G,u),S(w,J,u),S(A,V,u),S(D,q,u),S(C,G,u),_(d,Et,m),_(p,Et,v),_(f,Et,y),_(g,Et,b),_(d,St,w),_(p,St,A),_(f,St,D),_(g,St,C),_(m,Et,m),_(v,Et,v),_(y,Et,y),_(b,Et,b),_(m,St,m),_(v,St,v),_(y,St,y),_(b,St,b),_(w,Et,m),_(A,Et,v),_(D,Et,y),_(C,Et,b),_(w,St,w),_(A,St,A),_(D,St,D),_(C,St,C),_(u,Et,u),_(h,Et,u),_(u,St,h),_(h,St,h),S(n,I,bt),S(n,N,bt),S(n,R,bt),S(n,F,bt),_(bt,Et,bt),_(bt,St,wt),_(wt,Et,bt),_(wt,St,wt);var xt=[W,K,Q,X,Z,tt,J,rt,N,ot,at,R,z,ct,lt,ut,ht,dt,gt,yt,mt,I,vt];return _(o,xt,At),S(o,Y,Dt),_(a,xt,At),S(a,Y,Dt),_(s,xt,At),_(At,xt,At),S(At,Y,Dt),S(At,it,Ct),_(Ct,xt,At),S(Dt,I,x),S(Dt,N,x),S(Dt,R,x),S(Dt,F,M),t}function $t(t,e,n){var r=n.length,i=0,o=[],s=[];while(i<r){var a=t,c=null,l=null,u=0,h=null,d=-1;while(i<r&&!(c=T(a,n[i].t)))s.push(n[i++]);while(i<r&&(l=c||T(a,n[i].t)))c=null,a=l,a.accepts()?(d=0,h=a):d>=0&&d++,i++,u++;if(d<0)for(var p=i-u;p<i;p++)s.push(n[p]);else{s.length>0&&(o.push(Jt(jt,e,s)),s=[]),i-=d,u-=d;var f=h.t,g=n.slice(i-u,i);o.push(Jt(f,e,g))}}return s.length>0&&o.push(Jt(jt,e,s)),o}function Jt(t,e,n){var r=n[0].s,i=n[n.length-1].e,o=e.substr(r,i-r);return new t(o,n)}"undefined"!==typeof console&&console&&console.warn;var Vt={scanner:null,parser:null,pluginQueue:[],customProtocols:[],initialized:!1};function qt(){Vt.scanner={start:St(Vt.customProtocols),tokens:bt},Vt.parser={start:Ht(),tokens:Ut};for(var t={createTokenClass:Rt},e=0;e<Vt.pluginQueue.length;e++)Vt.pluginQueue[e][1]({scanner:Vt.scanner,parser:Vt.parser,utils:t});Vt.initialized=!0}function Gt(t){return Vt.initialized||qt(),$t(Vt.parser.start,t,xt(Vt.scanner.start,t))}function Wt(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Gt(t),r=[],i=0;i<n.length;i++){var o=n[i];!o.isLink||e&&o.t!==e||r.push(o.toObject())}return r}function Kt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Gt(t);return 1===n.length&&n[0].isLink&&(!e||n[0].t===e)}var Qt=n("5313");function Yt(t){return new Qt["d"]({key:new Qt["e"]("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(t=>t.docChanged)&&!n.doc.eq(r.doc),o=e.some(t=>t.getMeta("preventAutolink"));if(!i||o)return;const{tr:s}=r,a=Object(D["g"])(n.doc,e),{mapping:c}=a,l=Object(D["m"])(a);return l.forEach(({oldRange:e,newRange:i})=>{Object(D["p"])(e.from,e.to,n.doc).filter(e=>e.mark.type===t.type).forEach(e=>{const i=c.map(e.from),o=c.map(e.to),a=Object(D["p"])(i,o,r.doc).filter(e=>e.mark.type===t.type);if(!a.length)return;const l=a[0],u=n.doc.textBetween(e.from,e.to,void 0," "),h=r.doc.textBetween(l.from,l.to,void 0," "),d=Kt(u),p=Kt(h);d&&!p&&s.removeMark(l.from,l.to,t.type)}),Object(D["j"])(r.doc,i,t=>t.isTextblock).forEach(e=>{const n=r.doc.textBetween(e.pos,e.pos+e.node.nodeSize,void 0," ");Wt(n).filter(t=>t.isLink).map(t=>({...t,from:e.pos+t.start+1,to:e.pos+t.end+1})).filter(t=>{const e=i.from>=t.from&&i.from<=t.to,n=i.to>=t.from&&i.to<=t.to;return e||n}).forEach(e=>{s.addMark(e.from,e.to,t.type.create({href:e.href}))})})}),s.steps.length?s:void 0}})}function Xt(t){return new Qt["d"]({key:new Qt["e"]("handleClickLink"),props:{handleClick:(e,n,r)=>{var i;const o=Object(D["l"])(e.state,t.type.name),s=null===(i=r.target)||void 0===i?void 0:i.closest("a");return!(!s||!o.href)&&(window.open(o.href,o.target),!0)}}})}function Zt(t){return new Qt["d"]({key:new Qt["e"]("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:i}=e,{selection:o}=i,{empty:s}=o;if(s)return!1;let a="";r.content.forEach(t=>{a+=t.textContent});const c=Wt(a).find(t=>t.isLink&&t.value===a);return!(!a||!c)&&(t.editor.commands.setMark(t.type,{href:c.href}),!0)}}})}const te=D["c"].create({name:"link",priority:1e3,keepOnSplit:!1,inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow"}}},addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target}}},parseHTML(){return[{tag:"a[href]"}]},renderHTML({HTMLAttributes:t}){return["a",Object(D["u"])(this.options.HTMLAttributes,t),0]},addCommands(){return{setLink:t=>({chain:e})=>e().setMark(this.name,t).setMeta("preventAutolink",!0).run(),toggleLink:t=>({chain:e})=>e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Object(D["t"])({find:t=>Wt(t).filter(t=>t.isLink).map(t=>({text:t.value,index:t.start,data:t})),type:this.type,getAttributes:t=>{var e;return{href:null===(e=t.data)||void 0===e?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[];return this.options.autolink&&t.push(Yt({type:this.type})),this.options.openOnClick&&t.push(Xt({type:this.type})),this.options.linkOnPaste&&t.push(Zt({editor:this.editor,type:this.type})),t}});var ee=n("5924"),ne=n("4377"),re=n("1d91"),ie=n("7eb1"),oe=n("1037");const se=/(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))/,ae=D["d"].create({name:"image",addOptions(){return{inline:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",Object(D["u"])(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[Object(D["v"])({find:se,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}});var ce,le,ue=n("ed4b"),he=n("7eea"),de=n("dce4"),pe=n("2684"),fe=n("bf38"),ge=n("c088"),me=n("2718"),ve=n("64fe"),ye=n("4674"),be=n("e3ff"),we=n("14b4"),Ae=n("ecb0"),De=n("77d4"),Ce=n("304a"),ke=n("7f06"),Ee=n("576a"),Se=n("0ac0");if("undefined"!=typeof WeakMap){var xe=new WeakMap;ce=function(t){return xe.get(t)},le=function(t,e){return xe.set(t,e),e}}else{var Te=[],_e=10,Me=0;ce=function(t){for(var e=0;e<Te.length;e+=2)if(Te[e]==t)return Te[e+1]},le=function(t,e){return Me==_e&&(Me=0),Te[Me++]=t,Te[Me++]=e}}var Oe=function(t,e,n,r){this.left=t,this.top=e,this.right=n,this.bottom=r},Ne=function(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r};function Fe(t){if("table"!=t.type.spec.tableRole)throw new RangeError("Not a table node: "+t.type.name);for(var e=Ie(t),n=t.childCount,r=[],i=0,o=null,s=[],a=0,c=e*n;a<c;a++)r[a]=0;for(var l=0,u=0;l<n;l++){var h=t.child(l);u++;for(var d=0;;d++){while(i<r.length&&0!=r[i])i++;if(d==h.childCount)break;for(var p=h.child(d),f=p.attrs,g=f.colspan,m=f.rowspan,v=f.colwidth,y=0;y<m;y++){if(y+l>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:u,n:m-y});break}for(var b=i+y*e,w=0;w<g;w++){0==r[b+w]?r[b+w]=u:(o||(o=[])).push({type:"collision",row:l,pos:u,n:g-w});var A=v&&v[w];if(A){var D=(b+w)%e*2,C=s[D];null==C||C!=A&&1==s[D+1]?(s[D]=A,s[D+1]=1):C==A&&s[D+1]++}}}i+=g,u+=p.nodeSize}var k=(l+1)*e,E=0;while(i<k)0==r[i++]&&E++;E&&(o||(o=[])).push({type:"missing",row:l,n:E}),u++}for(var S=new Ne(e,n,r,o),x=!1,T=0;!x&&T<s.length;T+=2)null!=s[T]&&s[T+1]<n&&(x=!0);return x&&Re(S,s,t),S}function Ie(t){for(var e=-1,n=!1,r=0;r<t.childCount;r++){var i=t.child(r),o=0;if(n)for(var s=0;s<r;s++)for(var a=t.child(s),c=0;c<a.childCount;c++){var l=a.child(c);s+l.attrs.rowspan>r&&(o+=l.attrs.colspan)}for(var u=0;u<i.childCount;u++){var h=i.child(u);o+=h.attrs.colspan,h.attrs.rowspan>1&&(n=!0)}-1==e?e=o:e!=o&&(e=Math.max(e,o))}return e}function Re(t,e,n){t.problems||(t.problems=[]);for(var r=0,i={};r<t.map.length;r++){var o=t.map[r];if(!i[o]){i[o]=!0;for(var s=n.nodeAt(o),a=null,c=0;c<s.attrs.colspan;c++){var l=(r+c)%t.width,u=e[2*l];null==u||s.attrs.colwidth&&s.attrs.colwidth[c]==u||((a||(a=Be(s.attrs)))[c]=u)}a&&t.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:a})}}}function Be(t){if(t.colwidth)return t.colwidth.slice();for(var e=[],n=0;n<t.colspan;n++)e.push(0);return e}function Le(t){var e=t.cached.tableNodeTypes;if(!e)for(var n in e=t.cached.tableNodeTypes={},t.nodes){var r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}return e}Ne.prototype.findCell=function(t){for(var e=0;e<this.map.length;e++){var n=this.map[e];if(n==t){for(var r=e%this.width,i=e/this.width|0,o=r+1,s=i+1,a=1;o<this.width&&this.map[e+a]==n;a++)o++;for(var c=1;s<this.height&&this.map[e+this.width*c]==n;c++)s++;return new Oe(r,i,o,s)}}throw new RangeError("No cell with offset "+t+" found")},Ne.prototype.colCount=function(t){for(var e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError("No cell with offset "+t+" found")},Ne.prototype.nextCell=function(t,e,n){var r=this.findCell(t),i=r.left,o=r.right,s=r.top,a=r.bottom;return"horiz"==e?(n<0?0==i:o==this.width)?null:this.map[s*this.width+(n<0?i-1:o)]:(n<0?0==s:a==this.height)?null:this.map[i+this.width*(n<0?s-1:a)]},Ne.prototype.rectBetween=function(t,e){var n=this.findCell(t),r=n.left,i=n.right,o=n.top,s=n.bottom,a=this.findCell(e),c=a.left,l=a.right,u=a.top,h=a.bottom;return new Oe(Math.min(r,c),Math.min(o,u),Math.max(i,l),Math.max(s,h))},Ne.prototype.cellsInRect=function(t){for(var e=[],n={},r=t.top;r<t.bottom;r++)for(var i=t.left;i<t.right;i++){var o=r*this.width+i,s=this.map[o];n[s]||(n[s]=!0,i==t.left&&i&&this.map[o-1]==s||r==t.top&&r&&this.map[o-this.width]==s||e.push(s))}return e},Ne.prototype.positionAt=function(t,e,n){for(var r=0,i=0;;r++){var o=i+n.child(r).nodeSize;if(r==t){var s=e+t*this.width,a=(t+1)*this.width;while(s<a&&this.map[s]<i)s++;return s==a?o-1:this.map[s]}i=o}},Ne.get=function(t){return ce(t)||le(t,Fe(t))};var je=new Qt["e"]("selectingCells");function Pe(t){for(var e=t.depth-1;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return t.node(0).resolve(t.before(e+1));return null}function ze(t){for(var e=t.depth;e>0;e--){var n=t.node(e).type.spec.tableRole;if("cell"===n||"header_cell"===n)return t.node(e)}return null}function Ue(t){for(var e=t.selection.$head,n=e.depth;n>0;n--)if("row"==e.node(n).type.spec.tableRole)return!0;return!1}function He(t){var e=t.selection;return e.$anchorCell?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:e.node&&"cell"==e.node.type.spec.tableRole?e.$anchor:Pe(e.$head)||$e(e.$head)}function $e(t){for(var e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){var r=e.type.spec.tableRole;if("cell"==r||"header_cell"==r)return t.doc.resolve(n)}for(var i=t.nodeBefore,o=t.pos;i;i=i.lastChild,o--){var s=i.type.spec.tableRole;if("cell"==s||"header_cell"==s)return t.doc.resolve(o-i.nodeSize)}}function Je(t){return"row"==t.parent.type.spec.tableRole&&t.nodeAfter}function Ve(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function qe(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function Ge(t,e,n){var r=t.start(-1),i=Ne.get(t.node(-1)),o=i.nextCell(t.pos-r,e,n);return null==o?null:t.node(0).resolve(r+o)}function We(t,e,n){var r={};for(var i in t)r[i]=t[i];return r[e]=n,r}function Ke(t,e,n){void 0===n&&(n=1);var r=We(t,"colspan",t.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some((function(t){return t>0}))||(r.colwidth=null)),r}function Qe(t,e,n){void 0===n&&(n=1);var r=We(t,"colspan",t.colspan+n);if(r.colwidth){r.colwidth=r.colwidth.slice();for(var i=0;i<n;i++)r.colwidth.splice(e,0,0)}return r}function Ye(t,e,n){for(var r=Le(e.type.schema).header_cell,i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0}var Xe=function(t){function e(e,n){void 0===n&&(n=e);var r=e.node(-1),i=Ne.get(r),o=e.start(-1),s=i.rectBetween(e.pos-o,n.pos-o),a=e.node(0),c=i.cellsInRect(s).filter((function(t){return t!=n.pos-o}));c.unshift(n.pos-o);var l=c.map((function(t){var e=r.nodeAt(t),n=t+o+1;return new Qt["g"](a.resolve(n),a.resolve(n+e.content.size))}));t.call(this,l[0].$from,l[0].$to,l),this.$anchorCell=e,this.$headCell=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t,n){var r=t.resolve(n.map(this.$anchorCell.pos)),i=t.resolve(n.map(this.$headCell.pos));if(Je(r)&&Je(i)&&qe(r,i)){var o=this.$anchorCell.node(-1)!=r.node(-1);return o&&this.isRowSelection()?e.rowSelection(r,i):o&&this.isColSelection()?e.colSelection(r,i):new e(r,i)}return Qt["h"].between(r,i)},e.prototype.content=function(){for(var t=this.$anchorCell.node(-1),e=Ne.get(t),n=this.$anchorCell.start(-1),r=e.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),i={},o=[],s=r.top;s<r.bottom;s++){for(var a=[],c=s*e.width+r.left,l=r.left;l<r.right;l++,c++){var u=e.map[c];if(!i[u]){i[u]=!0;var h=e.findCell(u),d=t.nodeAt(u),p=r.left-h.left,f=h.right-r.right;if(p>0||f>0){var g=d.attrs;p>0&&(g=Ke(g,0,p)),f>0&&(g=Ke(g,g.colspan-f,f)),d=h.left<r.left?d.type.createAndFill(g):d.type.create(g,d.content)}if(h.top<r.top||h.bottom>r.bottom){var m=We(d.attrs,"rowspan",Math.min(h.bottom,r.bottom)-Math.max(h.top,r.top));d=h.top<r.top?d.type.createAndFill(m):d.type.create(m,d.content)}a.push(d)}}o.push(t.child(s).copy(Ce["c"].from(a)))}var v=this.isColSelection()&&this.isRowSelection()?t:o;return new Ce["j"](Ce["c"].from(v),1,1)},e.prototype.replace=function(e,n){void 0===n&&(n=Ce["j"].empty);for(var r=e.steps.length,i=this.ranges,o=0;o<i.length;o++){var s=i[o],a=s.$from,c=s.$to,l=e.mapping.slice(r);e.replace(l.map(a.pos),l.map(c.pos),o?Ce["j"].empty:n)}var u=t.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);u&&e.setSelection(u)},e.prototype.replaceWith=function(t,e){this.replace(t,new Ce["j"](Ce["c"].from(e),0,0))},e.prototype.forEachCell=function(t){for(var e=this.$anchorCell.node(-1),n=Ne.get(e),r=this.$anchorCell.start(-1),i=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),o=0;o<i.length;o++)t(e.nodeAt(i[o]),r+i[o])},e.prototype.isColSelection=function(){var t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;var n=t+this.$anchorCell.nodeAfter.attrs.rowspan,r=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount},e.colSelection=function(t,n){void 0===n&&(n=t);var r=Ne.get(t.node(-1)),i=t.start(-1),o=r.findCell(t.pos-i),s=r.findCell(n.pos-i),a=t.node(0);return o.top<=s.top?(o.top>0&&(t=a.resolve(i+r.map[o.left])),s.bottom<r.height&&(n=a.resolve(i+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(n=a.resolve(i+r.map[s.left])),o.bottom<r.height&&(t=a.resolve(i+r.map[r.width*(r.height-1)+o.right-1]))),new e(t,n)},e.prototype.isRowSelection=function(){var t=Ne.get(this.$anchorCell.node(-1)),e=this.$anchorCell.start(-1),n=t.colCount(this.$anchorCell.pos-e),r=t.colCount(this.$headCell.pos-e);if(Math.min(n,r)>0)return!1;var i=n+this.$anchorCell.nodeAfter.attrs.colspan,o=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,o)==t.width},e.prototype.eq=function(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos},e.rowSelection=function(t,n){void 0===n&&(n=t);var r=Ne.get(t.node(-1)),i=t.start(-1),o=r.findCell(t.pos-i),s=r.findCell(n.pos-i),a=t.node(0);return o.left<=s.left?(o.left>0&&(t=a.resolve(i+r.map[o.top*r.width])),s.right<r.width&&(n=a.resolve(i+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(n=a.resolve(i+r.map[s.top*r.width])),o.right<r.width&&(t=a.resolve(i+r.map[r.width*(o.top+1)-1]))),new e(t,n)},e.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},e.fromJSON=function(t,n){return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,n,r){return void 0===r&&(r=n),new e(t.resolve(n),t.resolve(r))},e.prototype.getBookmark=function(){return new Ze(this.$anchorCell.pos,this.$headCell.pos)},e}(Qt["f"]);Xe.prototype.visible=!1,Qt["f"].jsonID("cell",Xe);var Ze=function(t,e){this.anchor=t,this.head=e};function tn(t){if(!(t.selection instanceof Xe))return null;var e=[];return t.selection.forEachCell((function(t,n){e.push(Ee["a"].node(n,n+t.nodeSize,{class:"selectedCell"}))})),Ee["b"].create(t.doc,e)}function en(t){var e=t.$from,n=t.$to;if(e.pos==n.pos||e.pos<e.pos-6)return!1;for(var r=e.pos,i=n.pos,o=e.depth;o>=0;o--,r++)if(e.after(o+1)<e.end(o))break;for(var s=n.depth;s>=0;s--,i--)if(n.before(s+1)>n.start(s))break;return r==i&&/row|table/.test(e.node(o).type.spec.tableRole)}function nn(t){for(var e,n,r=t.$from,i=t.$to,o=r.depth;o>0;o--){var s=r.node(o);if("cell"===s.type.spec.tableRole||"header_cell"===s.type.spec.tableRole){e=s;break}}for(var a=i.depth;a>0;a--){var c=i.node(a);if("cell"===c.type.spec.tableRole||"header_cell"===c.type.spec.tableRole){n=c;break}}return e!==n&&0===i.parentOffset}function rn(t,e,n){var r,i,o=(e||t).selection,s=(e||t).doc;if(o instanceof Qt["c"]&&(i=o.node.type.spec.tableRole)){if("cell"==i||"header_cell"==i)r=Xe.create(s,o.from);else if("row"==i){var a=s.resolve(o.from+1);r=Xe.rowSelection(a,a)}else if(!n){var c=Ne.get(o.node),l=o.from+1,u=l+c.map[c.width*c.height-1];r=Xe.create(s,l+1,u)}}else o instanceof Qt["h"]&&en(o)?r=Qt["h"].create(s,o.from):o instanceof Qt["h"]&&nn(o)&&(r=Qt["h"].create(s,o.$from.start(),o.$from.end()));return r&&(e||(e=t.tr)).setSelection(r),e}function on(t){if(!t.size)return null;var e=t.content,n=t.openStart,r=t.openEnd;while(1==e.childCount&&(n>0&&r>0||"table"==e.firstChild.type.spec.tableRole))n--,r--,e=e.firstChild.content;var i=e.firstChild,o=i.type.spec.tableRole,s=i.type.schema,a=[];if("row"==o)for(var c=0;c<e.childCount;c++){var l=e.child(c).content,u=c?0:Math.max(0,n-1),h=c<e.childCount-1?0:Math.max(0,r-1);(u||h)&&(l=an(Le(s).row,new Ce["j"](l,u,h)).content),a.push(l)}else{if("cell"!=o&&"header_cell"!=o)return null;a.push(n||r?an(Le(s).row,new Ce["j"](e,n,r)).content:e)}return sn(s,a)}function sn(t,e){for(var n=[],r=0;r<e.length;r++)for(var i=e[r],o=i.childCount-1;o>=0;o--)for(var s=i.child(o).attrs,a=s.rowspan,c=s.colspan,l=r;l<r+a;l++)n[l]=(n[l]||0)+c;for(var u=0,h=0;h<n.length;h++)u=Math.max(u,n[h]);for(var d=0;d<n.length;d++)if(d>=e.length&&e.push(Ce["c"].empty),n[d]<u){for(var p=Le(t).cell.createAndFill(),f=[],g=n[d];g<u;g++)f.push(p);e[d]=e[d].append(Ce["c"].from(f))}return{height:e.length,width:u,rows:e}}function an(t,e){var n=t.createAndFill(),r=new Se["d"](n).replace(0,n.content.size,e);return r.doc}function cn(t,e,n){var r=t.width,i=t.height,o=t.rows;if(r!=e){for(var s=[],a=[],c=0;c<o.length;c++){for(var l=o[c],u=[],h=s[c]||0,d=0;h<e;d++){var p=l.child(d%l.childCount);h+p.attrs.colspan>e&&(p=p.type.create(Ke(p.attrs,p.attrs.colspan,h+p.attrs.colspan-e),p.content)),u.push(p),h+=p.attrs.colspan;for(var f=1;f<p.attrs.rowspan;f++)s[c+f]=(s[c+f]||0)+p.attrs.colspan}a.push(Ce["c"].from(u))}o=a,r=e}if(i!=n){for(var g=[],m=0,v=0;m<n;m++,v++){for(var y=[],b=o[v%i],w=0;w<b.childCount;w++){var A=b.child(w);m+A.attrs.rowspan>n&&(A=A.type.create(We(A.attrs,"rowspan",Math.max(1,n-A.attrs.rowspan)),A.content)),y.push(A)}g.push(Ce["c"].from(y))}o=g,i=n}return{width:r,height:i,rows:o}}function ln(t,e,n,r,i,o,s){var a,c,l=t.doc.type.schema,u=Le(l);if(i>e.width)for(var h=0,d=0;h<e.height;h++){var p=n.child(h);d+=p.nodeSize;var f=[],g=void 0;g=null==p.lastChild||p.lastChild.type==u.cell?a||(a=u.cell.createAndFill()):c||(c=u.header_cell.createAndFill());for(var m=e.width;m<i;m++)f.push(g);t.insert(t.mapping.slice(s).map(d-1+r),f)}if(o>e.height){for(var v=[],y=0,b=(e.height-1)*e.width;y<Math.max(e.width,i);y++){var w=!(y>=e.width)&&n.nodeAt(e.map[b+y]).type==u.header_cell;v.push(w?c||(c=u.header_cell.createAndFill()):a||(a=u.cell.createAndFill()))}for(var A=u.row.create(null,Ce["c"].from(v)),D=[],C=e.height;C<o;C++)D.push(A);t.insert(t.mapping.slice(s).map(r+n.nodeSize-2),D)}return!(!a&&!c)}function un(t,e,n,r,i,o,s,a){if(0==s||s==e.height)return!1;for(var c=!1,l=i;l<o;l++){var u=s*e.width+l,h=e.map[u];if(e.map[u-e.width]==h){c=!0;var d=n.nodeAt(h),p=e.findCell(h),f=p.top,g=p.left;t.setNodeMarkup(t.mapping.slice(a).map(h+r),null,We(d.attrs,"rowspan",s-f)),t.insert(t.mapping.slice(a).map(e.positionAt(s,g,n)),d.type.createAndFill(We(d.attrs,"rowspan",f+d.attrs.rowspan-s))),l+=d.attrs.colspan-1}}return c}function hn(t,e,n,r,i,o,s,a){if(0==s||s==e.width)return!1;for(var c=!1,l=i;l<o;l++){var u=l*e.width+s,h=e.map[u];if(e.map[u-1]==h){c=!0;var d=n.nodeAt(h),p=e.colCount(h),f=t.mapping.slice(a).map(h+r);t.setNodeMarkup(f,null,Ke(d.attrs,s-p,d.attrs.colspan-(s-p))),t.insert(f+d.nodeSize,d.type.createAndFill(Ke(d.attrs,0,s-p))),l+=d.attrs.rowspan-1}}return c}function dn(t,e,n,r,i){var o=n?t.doc.nodeAt(n-1):t.doc,s=Ne.get(o),a=r.top,c=r.left,l=c+i.width,u=a+i.height,h=t.tr,d=0;function p(){o=n?h.doc.nodeAt(n-1):h.doc,s=Ne.get(o),d=h.mapping.maps.length}ln(h,s,o,n,l,u,d)&&p(),un(h,s,o,n,c,l,a,d)&&p(),un(h,s,o,n,c,l,u,d)&&p(),hn(h,s,o,n,a,u,c,d)&&p(),hn(h,s,o,n,a,u,l,d)&&p();for(var f=a;f<u;f++){var g=s.positionAt(f,c,o),m=s.positionAt(f,l,o);h.replace(h.mapping.slice(d).map(g+n),h.mapping.slice(d).map(m+n),new Ce["j"](i.rows[f-a],0,0))}p(),h.setSelection(new Xe(h.doc.resolve(n+s.positionAt(a,c,o)),h.doc.resolve(n+s.positionAt(u-1,l-1,o)))),e(h)}Ze.prototype.map=function(t){return new Ze(t.map(this.anchor),t.map(this.head))},Ze.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=t.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&n.index()<n.parent.childCount&&qe(e,n)?new Xe(e,n):Qt["f"].near(n,1)};var pn=Object(ke["a"])({ArrowLeft:gn("horiz",-1),ArrowRight:gn("horiz",1),ArrowUp:gn("vert",-1),ArrowDown:gn("vert",1),"Shift-ArrowLeft":mn("horiz",-1),"Shift-ArrowRight":mn("horiz",1),"Shift-ArrowUp":mn("vert",-1),"Shift-ArrowDown":mn("vert",1),Backspace:vn,"Mod-Backspace":vn,Delete:vn,"Mod-Delete":vn});function fn(t,e,n){return!n.eq(t.selection)&&(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function gn(t,e){return function(n,r,i){var o=n.selection;if(o instanceof Xe)return fn(n,r,Qt["f"].near(o.$headCell,e));if("horiz"!=t&&!o.empty)return!1;var s=An(i,t,e);if(null==s)return!1;if("horiz"==t)return fn(n,r,Qt["f"].near(n.doc.resolve(o.head+e),e));var a,c=n.doc.resolve(s),l=Ge(c,t,e);return a=l?Qt["f"].near(l,1):e<0?Qt["f"].near(n.doc.resolve(c.before(-1)),-1):Qt["f"].near(n.doc.resolve(c.after(-1)),1),fn(n,r,a)}}function mn(t,e){return function(n,r,i){var o=n.selection;if(!(o instanceof Xe)){var s=An(i,t,e);if(null==s)return!1;o=new Xe(n.doc.resolve(s))}var a=Ge(o.$headCell,t,e);return!!a&&fn(n,r,new Xe(o.$anchorCell,a))}}function vn(t,e){var n=t.selection;if(!(n instanceof Xe))return!1;if(e){var r=t.tr,i=Le(t.schema).cell.createAndFill().content;n.forEachCell((function(t,e){t.content.eq(i)||r.replace(r.mapping.map(e+1),r.mapping.map(e+t.nodeSize-1),new Ce["j"](i,0,0))})),r.docChanged&&e(r)}return!0}function yn(t,e){var n=t.state.doc,r=Pe(n.resolve(e));return!!r&&(t.dispatch(t.state.tr.setSelection(new Xe(r))),!0)}function bn(t,e,n){if(!Ue(t.state))return!1;var r=on(n),i=t.state.selection;if(i instanceof Xe){r||(r={width:1,height:1,rows:[Ce["c"].from(an(Le(t.state.schema).cell,n))]});var o=i.$anchorCell.node(-1),s=i.$anchorCell.start(-1),a=Ne.get(o).rectBetween(i.$anchorCell.pos-s,i.$headCell.pos-s);return r=cn(r,a.right-a.left,a.bottom-a.top),dn(t.state,t.dispatch,s,a,r),!0}if(r){var c=He(t.state),l=c.start(-1);return dn(t.state,t.dispatch,l,Ne.get(c.node(-1)).findCell(c.pos-l),r),!0}return!1}function wn(t,e){if(!e.ctrlKey&&!e.metaKey){var n,r=Dn(t,e.target);if(e.shiftKey&&t.state.selection instanceof Xe)i(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&null!=(n=Pe(t.state.selection.$anchor))&&Cn(t,e).pos!=n.pos)i(n,e),e.preventDefault();else if(!r)return;t.root.addEventListener("mouseup",o),t.root.addEventListener("dragstart",o),t.root.addEventListener("mousemove",s)}function i(e,n){var r=Cn(t,n),i=null==je.getState(t.state);if(!r||!qe(e,r)){if(!i)return;r=e}var o=new Xe(e,r);if(i||!t.state.selection.eq(o)){var s=t.state.tr.setSelection(o);i&&s.setMeta(je,e.pos),t.dispatch(s)}}function o(){t.root.removeEventListener("mouseup",o),t.root.removeEventListener("dragstart",o),t.root.removeEventListener("mousemove",s),null!=je.getState(t.state)&&t.dispatch(t.state.tr.setMeta(je,-1))}function s(n){var s,a=je.getState(t.state);if(null!=a)s=t.state.doc.resolve(a);else if(Dn(t,n.target)!=r&&(s=Cn(t,e),!s))return o();s&&i(s,n)}}function An(t,e,n){if(!(t.state.selection instanceof Qt["h"]))return null;for(var r=t.state.selection,i=r.$head,o=i.depth-1;o>=0;o--){var s=i.node(o),a=n<0?i.index(o):i.indexAfter(o);if(a!=(n<0?0:s.childCount))return null;if("cell"==s.type.spec.tableRole||"header_cell"==s.type.spec.tableRole){var c=i.before(o),l="vert"==e?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(l)?c:null}}return null}function Dn(t,e){for(;e&&e!=t.dom;e=e.parentNode)if("TD"==e.nodeName||"TH"==e.nodeName)return e}function Cn(t,e){var n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?Pe(t.state.doc.resolve(n.pos)):null}var kn=new Qt["e"]("fix-tables");function En(t,e,n,r){var i=t.childCount,o=e.childCount;t:for(var s=0,a=0;s<o;s++){for(var c=e.child(s),l=a,u=Math.min(i,s+3);l<u;l++)if(t.child(l)==c){a=l+1,n+=c.nodeSize;continue t}r(c,n),a<i&&t.child(a).sameMarkup(c)?En(t.child(a),c,n+1,r):c.nodesBetween(0,c.content.size,r,n+1),n+=c.nodeSize}}function Sn(t,e){var n,r=function(e,r){"table"==e.type.spec.tableRole&&(n=xn(t,e,r,n))};return e?e.doc!=t.doc&&En(e.doc,t.doc,0,r):t.doc.descendants(r),n}function xn(t,e,n,r){var i=Ne.get(e);if(!i.problems)return r;r||(r=t.tr);for(var o,s,a=[],c=0;c<i.height;c++)a.push(0);for(var l=0;l<i.problems.length;l++){var u=i.problems[l];if("collision"==u.type){for(var h=e.nodeAt(u.pos),d=0;d<h.attrs.rowspan;d++)a[u.row+d]+=u.n;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,Ke(h.attrs,h.attrs.colspan-u.n,u.n))}else if("missing"==u.type)a[u.row]+=u.n;else if("overlong_rowspan"==u.type){var p=e.nodeAt(u.pos);r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,We(p.attrs,"rowspan",p.attrs.rowspan-u.n))}else if("colwidth mismatch"==u.type){var f=e.nodeAt(u.pos);r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,We(f.attrs,"colwidth",u.colwidth))}}for(var g=0;g<a.length;g++)a[g]&&(null==o&&(o=g),s=g);for(var m=0,v=n+1;m<i.height;m++){var y=e.child(m),b=v+y.nodeSize,w=a[m];if(w>0){var A="cell";y.firstChild&&(A=y.firstChild.type.spec.tableRole);for(var D=[],C=0;C<w;C++)D.push(Le(t.schema)[A].createAndFill());var k=0!=m&&o!=m-1||s!=m?b-1:v+1;r.insert(r.mapping.map(k),D)}v=b}return r.setMeta(kn,{fixTables:!0})}function Tn(t){var e,n=t.selection,r=He(t),i=r.node(-1),o=r.start(-1),s=Ne.get(i);return e=n instanceof Xe?s.rectBetween(n.$anchorCell.pos-o,n.$headCell.pos-o):s.findCell(r.pos-o),e.tableStart=o,e.map=s,e.table=i,e}function _n(t,e,n){var r=e.map,i=e.tableStart,o=e.table,s=n>0?-1:0;Ye(r,o,n+s)&&(s=0==n||n==r.width?null:0);for(var a=0;a<r.height;a++){var c=a*r.width+n;if(n>0&&n<r.width&&r.map[c-1]==r.map[c]){var l=r.map[c],u=o.nodeAt(l);t.setNodeMarkup(t.mapping.map(i+l),null,Qe(u.attrs,n-r.colCount(l))),a+=u.attrs.rowspan-1}else{var h=null==s?Le(o.type.schema).cell:o.nodeAt(r.map[c+s]).type,d=r.positionAt(a,n,o);t.insert(t.mapping.map(i+d),h.createAndFill())}}return t}function Mn(t,e){if(!Ue(t))return!1;if(e){var n=Tn(t);e(_n(t.tr,n,n.left))}return!0}function On(t,e){if(!Ue(t))return!1;if(e){var n=Tn(t);e(_n(t.tr,n,n.right))}return!0}function Nn(t,e,n){for(var r=e.map,i=e.table,o=e.tableStart,s=t.mapping.maps.length,a=0;a<r.height;){var c=a*r.width+n,l=r.map[c],u=i.nodeAt(l);if(n>0&&r.map[c-1]==l||n<r.width-1&&r.map[c+1]==l)t.setNodeMarkup(t.mapping.slice(s).map(o+l),null,Ke(u.attrs,n-r.colCount(l)));else{var h=t.mapping.slice(s).map(o+l);t.delete(h,h+u.nodeSize)}a+=u.attrs.rowspan}}function Fn(t,e){if(!Ue(t))return!1;if(e){var n=Tn(t),r=t.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var i=n.right-1;;i--){if(Nn(r,n,i),i==n.left)break;n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=Ne.get(n.table)}e(r)}return!0}function In(t,e,n){for(var r=Le(e.type.schema).header_cell,i=0;i<t.width;i++)if(e.nodeAt(t.map[i+n*t.width]).type!=r)return!1;return!0}function Rn(t,e,n){for(var r=e.map,i=e.tableStart,o=e.table,s=i,a=0;a<n;a++)s+=o.child(a).nodeSize;var c=[],l=n>0?-1:0;In(r,o,n+l)&&(l=0==n||n==r.height?null:0);for(var u=0,h=r.width*n;u<r.width;u++,h++)if(n>0&&n<r.height&&r.map[h]==r.map[h-r.width]){var d=r.map[h],p=o.nodeAt(d).attrs;t.setNodeMarkup(i+d,null,We(p,"rowspan",p.rowspan+1)),u+=p.colspan-1}else{var f=null==l?Le(o.type.schema).cell:o.nodeAt(r.map[h+l*r.width]).type;c.push(f.createAndFill())}return t.insert(s,Le(o.type.schema).row.create(null,c)),t}function Bn(t,e){if(!Ue(t))return!1;if(e){var n=Tn(t);e(Rn(t.tr,n,n.top))}return!0}function Ln(t,e){if(!Ue(t))return!1;if(e){var n=Tn(t);e(Rn(t.tr,n,n.bottom))}return!0}function jn(t,e,n){for(var r=e.map,i=e.table,o=e.tableStart,s=0,a=0;a<n;a++)s+=i.child(a).nodeSize;var c=s+i.child(n).nodeSize,l=t.mapping.maps.length;t.delete(s+o,c+o);for(var u=0,h=n*r.width;u<r.width;u++,h++){var d=r.map[h];if(n>0&&d==r.map[h-r.width]){var p=i.nodeAt(d).attrs;t.setNodeMarkup(t.mapping.slice(l).map(d+o),null,We(p,"rowspan",p.rowspan-1)),u+=p.colspan-1}else if(n<r.width&&d==r.map[h+r.width]){var f=i.nodeAt(d),g=f.type.create(We(f.attrs,"rowspan",f.attrs.rowspan-1),f.content),m=r.positionAt(n+1,u,i);t.insert(t.mapping.slice(l).map(o+m),g),u+=f.attrs.colspan-1}}}function Pn(t,e){if(!Ue(t))return!1;if(e){var n=Tn(t),r=t.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var i=n.bottom-1;;i--){if(jn(r,n,i),i==n.top)break;n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=Ne.get(n.table)}e(r)}return!0}function zn(t){var e=t.content;return 1==e.childCount&&e.firstChild.isTextblock&&0==e.firstChild.childCount}function Un(t,e){for(var n=t.width,r=t.height,i=t.map,o=e.top*n+e.left,s=o,a=(e.bottom-1)*n+e.left,c=o+(e.right-e.left-1),l=e.top;l<e.bottom;l++){if(e.left>0&&i[s]==i[s-1]||e.right<n&&i[c]==i[c+1])return!0;s+=n,c+=n}for(var u=e.left;u<e.right;u++){if(e.top>0&&i[o]==i[o-n]||e.bottom<r&&i[a]==i[a+n])return!0;o++,a++}return!1}function Hn(t,e){var n=t.selection;if(!(n instanceof Xe)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=Tn(t),i=r.map;if(Un(i,r))return!1;if(e){for(var o,s,a=t.tr,c={},l=Ce["c"].empty,u=r.top;u<r.bottom;u++)for(var h=r.left;h<r.right;h++){var d=i.map[u*i.width+h],p=r.table.nodeAt(d);if(!c[d])if(c[d]=!0,null==o)o=d,s=p;else{zn(p)||(l=l.append(p.content));var f=a.mapping.map(d+r.tableStart);a.delete(f,f+p.nodeSize)}}if(a.setNodeMarkup(o+r.tableStart,null,We(Qe(s.attrs,s.attrs.colspan,r.right-r.left-s.attrs.colspan),"rowspan",r.bottom-r.top)),l.size){var g=o+1+s.content.size,m=zn(s)?o+1:g;a.replaceWith(m+r.tableStart,g+r.tableStart,l)}a.setSelection(new Xe(a.doc.resolve(o+r.tableStart))),e(a)}return!0}function $n(t,e){var n=Le(t.schema);return Jn((function(t){var e=t.node;return n[e.type.spec.tableRole]}))(t,e)}function Jn(t){return function(e,n){var r,i,o=e.selection;if(o instanceof Xe){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;r=o.$anchorCell.nodeAfter,i=o.$anchorCell.pos}else{if(r=ze(o.$from),!r)return!1;i=Pe(o.$from).pos}if(1==r.attrs.colspan&&1==r.attrs.rowspan)return!1;if(n){var s=r.attrs,a=[],c=s.colwidth;s.rowspan>1&&(s=We(s,"rowspan",1)),s.colspan>1&&(s=We(s,"colspan",1));for(var l,u=Tn(e),h=e.tr,d=0;d<u.right-u.left;d++)a.push(c?We(s,"colwidth",c&&c[d]?[c[d]]:null):s);for(var p=u.top;p<u.bottom;p++){var f=u.map.positionAt(p,u.left,u.table);p==u.top&&(f+=r.nodeSize);for(var g=u.left,m=0;g<u.right;g++,m++)g==u.left&&p==u.top||h.insert(l=h.mapping.map(f+u.tableStart,1),t({node:r,row:p,col:g}).createAndFill(a[m]))}h.setNodeMarkup(i,t({node:r,row:u.top,col:u.left}),a[0]),o instanceof Xe&&h.setSelection(new Xe(h.doc.resolve(o.$anchorCell.pos),l&&h.doc.resolve(l))),n(h)}return!0}}function Vn(t,e){return function(n,r){if(!Ue(n))return!1;var i=He(n);if(i.nodeAfter.attrs[t]===e)return!1;if(r){var o=n.tr;n.selection instanceof Xe?n.selection.forEachCell((function(n,r){n.attrs[t]!==e&&o.setNodeMarkup(r,null,We(n.attrs,t,e))})):o.setNodeMarkup(i.pos,null,We(i.nodeAfter.attrs,t,e)),r(o)}return!0}}function qn(t){return function(e,n){if(!Ue(e))return!1;if(n){for(var r=Le(e.schema),i=Tn(e),o=e.tr,s=i.map.cellsInRect("column"==t?new Oe(i.left,0,i.right,i.map.height):"row"==t?new Oe(0,i.top,i.map.width,i.bottom):i),a=s.map((function(t){return i.table.nodeAt(t)})),c=0;c<s.length;c++)a[c].type==r.header_cell&&o.setNodeMarkup(i.tableStart+s[c],r.cell,a[c].attrs);if(0==o.steps.length)for(var l=0;l<s.length;l++)o.setNodeMarkup(i.tableStart+s[l],r.header_cell,a[l].attrs);n(o)}return!0}}function Gn(t,e,n){for(var r=e.map.cellsInRect({left:0,top:0,right:"row"==t?e.map.width:1,bottom:"column"==t?e.map.height:1}),i=0;i<r.length;i++){var o=e.table.nodeAt(r[i]);if(o&&o.type!==n.header_cell)return!1}return!0}function Wn(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?qn(t):function(e,n){if(!Ue(e))return!1;if(n){var r=Le(e.schema),i=Tn(e),o=e.tr,s=Gn("row",i,r),a=Gn("column",i,r),c="column"===t?s:"row"===t&&a,l=c?1:0,u="column"==t?new Oe(0,l,1,i.map.height):"row"==t?new Oe(l,0,i.map.width,1):i,h="column"==t?a?r.cell:r.header_cell:"row"==t?s?r.cell:r.header_cell:r.cell;i.map.cellsInRect(u).forEach((function(t){var e=t+i.tableStart,n=o.doc.nodeAt(e);n&&o.setNodeMarkup(e,h,n.attrs)})),n(o)}return!0}}Wn("row",{useDeprecatedLogic:!0}),Wn("column",{useDeprecatedLogic:!0});var Kn=Wn("cell",{useDeprecatedLogic:!0});function Qn(t,e){if(e<0){var n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(var r=t.index(-1)-1,i=t.before();r>=0;r--){var o=t.node(-1).child(r);if(o.childCount)return i-1-o.lastChild.nodeSize;i-=o.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;for(var s=t.node(-1),a=t.indexAfter(-1),c=t.after();a<s.childCount;a++){var l=s.child(a);if(l.childCount)return c+1;c+=l.nodeSize}}}function Yn(t){return function(e,n){if(!Ue(e))return!1;var r=Qn(He(e),t);if(null!=r){if(n){var i=e.doc.resolve(r);n(e.tr.setSelection(Qt["h"].between(i,Ve(i))).scrollIntoView())}return!0}}}function Xn(t,e){for(var n=t.selection.$anchor,r=n.depth;r>0;r--){var i=n.node(r);if("table"==i.type.spec.tableRole)return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0}return!1}var Zn=function(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),tr(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function tr(t,e,n,r,i,o){for(var s=0,a=!0,c=e.firstChild,l=t.firstChild,u=0,h=0;u<l.childCount;u++)for(var d=l.child(u).attrs,p=d.colspan,f=d.colwidth,g=0;g<p;g++,h++){var m=i==h?o:f&&f[g],v=m?m+"px":"";s+=m||r,m||(a=!1),c?(c.style.width!=v&&(c.style.width=v),c=c.nextSibling):e.appendChild(document.createElement("col")).style.width=v}while(c){var y=c.nextSibling;c.parentNode.removeChild(c),c=y}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}Zn.prototype.update=function(t){return t.type==this.node.type&&(this.node=t,tr(t,this.colgroup,this.table,this.cellMinWidth),!0)},Zn.prototype.ignoreMutation=function(t){return"attributes"==t.type&&(t.target==this.table||this.colgroup.contains(t.target))};var er=new Qt["e"]("tableColumnResizing");function nr(t){void 0===t&&(t={});var e=t.handleWidth;void 0===e&&(e=5);var n=t.cellMinWidth;void 0===n&&(n=25);var r=t.View;void 0===r&&(r=Zn);var i=t.lastColumnResizable;void 0===i&&(i=!0);var o=new Qt["d"]({key:er,state:{init:function(t,e){return this.spec.props.nodeViews[Le(e.schema).table.name]=function(t,e){return new r(t,n,e)},new rr(-1,!1)},apply:function(t,e){return e.apply(t)}},props:{attributes:function(t){var e=er.getState(t);return e.activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(t,r){ir(t,r,e,n,i)},mouseleave:function(t){or(t)},mousedown:function(t,e){sr(t,e,n)}},decorations:function(t){var e=er.getState(t);if(e.activeHandle>-1)return gr(t,e.activeHandle)},nodeViews:{}}});return o}var rr=function(t,e){this.activeHandle=t,this.dragging=e};function ir(t,e,n,r,i){var o=er.getState(t.state);if(!o.dragging){var s=cr(e.target),a=-1;if(s){var c=s.getBoundingClientRect(),l=c.left,u=c.right;e.clientX-l<=n?a=lr(t,e,"left"):u-e.clientX<=n&&(a=lr(t,e,"right"))}if(a!=o.activeHandle){if(!i&&-1!==a){var h=t.state.doc.resolve(a),d=h.node(-1),p=Ne.get(d),f=h.start(-1),g=p.colCount(h.pos-f)+h.nodeAfter.attrs.colspan-1;if(g==p.width-1)return}hr(t,a)}}}function or(t){var e=er.getState(t.state);e.activeHandle>-1&&!e.dragging&&hr(t,-1)}function sr(t,e,n){var r=er.getState(t.state);if(-1==r.activeHandle||r.dragging)return!1;var i=t.state.doc.nodeAt(r.activeHandle),o=ar(t,r.activeHandle,i.attrs);function s(e){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);var r=er.getState(t.state);r.dragging&&(dr(t,r.activeHandle,ur(r.dragging,e,n)),t.dispatch(t.state.tr.setMeta(er,{setDragging:null})))}function a(e){if(!e.which)return s(e);var r=er.getState(t.state),i=ur(r.dragging,e,n);pr(t,r.activeHandle,i,n)}return t.dispatch(t.state.tr.setMeta(er,{setDragging:{startX:e.clientX,startWidth:o}})),window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),e.preventDefault(),!0}function ar(t,e,n){var r=n.colspan,i=n.colwidth,o=i&&i[i.length-1];if(o)return o;var s=t.domAtPos(e),a=s.node.childNodes[s.offset],c=a.offsetWidth,l=r;if(i)for(var u=0;u<r;u++)i[u]&&(c-=i[u],l--);return c/l}function cr(t){while(t&&"TD"!=t.nodeName&&"TH"!=t.nodeName)t=t.classList.contains("ProseMirror")?null:t.parentNode;return t}function lr(t,e,n){var r=t.posAtCoords({left:e.clientX,top:e.clientY});if(!r)return-1;var i=r.pos,o=Pe(t.state.doc.resolve(i));if(!o)return-1;if("right"==n)return o.pos;var s=Ne.get(o.node(-1)),a=o.start(-1),c=s.map.indexOf(o.pos-a);return c%s.width==0?-1:a+s.map[c-1]}function ur(t,e,n){var r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function hr(t,e){t.dispatch(t.state.tr.setMeta(er,{setHandle:e}))}function dr(t,e,n){for(var r=t.state.doc.resolve(e),i=r.node(-1),o=Ne.get(i),s=r.start(-1),a=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,c=t.state.tr,l=0;l<o.height;l++){var u=l*o.width+a;if(!l||o.map[u]!=o.map[u-o.width]){var h=o.map[u],d=i.nodeAt(h),p=d.attrs,f=1==p.colspan?0:a-o.colCount(h);if(!p.colwidth||p.colwidth[f]!=n){var g=p.colwidth?p.colwidth.slice():fr(p.colspan);g[f]=n,c.setNodeMarkup(s+h,null,We(p,"colwidth",g))}}}c.docChanged&&t.dispatch(c)}function pr(t,e,n,r){var i=t.state.doc.resolve(e),o=i.node(-1),s=i.start(-1),a=Ne.get(o).colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1,c=t.domAtPos(i.start(-1)).node;while("TABLE"!=c.nodeName)c=c.parentNode;tr(o,c.firstChild,c,r,a,n)}function fr(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function gr(t,e){for(var n=[],r=t.doc.resolve(e),i=r.node(-1),o=Ne.get(i),s=r.start(-1),a=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan,c=0;c<o.height;c++){var l=a+c*o.width-1;if((a==o.width||o.map[l]!=o.map[l+1])&&(0==c||o.map[l-1]!=o.map[l-1-o.width])){var u=o.map[l],h=s+u+i.nodeAt(u).nodeSize-1,d=document.createElement("div");d.className="column-resize-handle",n.push(Ee["a"].widget(h,d))}}return Ee["b"].create(t.doc,n)}function mr(t){void 0===t&&(t={});var e=t.allowTableNodeSelection;return void 0===e&&(e=!1),new Qt["d"]({key:je,state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(je);if(null!=n)return-1==n?null:n;if(null==e||!t.docChanged)return e;var r=t.mapping.mapResult(e),i=r.deleted,o=r.pos;return i?null:o}},props:{decorations:tn,handleDOMEvents:{mousedown:wn},createSelectionBetween:function(t){if(null!=je.getState(t.state))return t.state.selection},handleTripleClick:yn,handleKeyDown:pn,handlePaste:bn},appendTransaction:function(t,n,r){return rn(r,Sn(r,n),e)}})}function vr(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var i=t.child(r),o=e.child(r);if(i!=o){if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(var s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){var a=vr(i.content,o.content,n+1);if(null!=a)return a}n+=i.nodeSize}else n+=i.nodeSize}}function yr(t,e,n,r){for(var i=t.childCount,o=e.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};var s=t.child(--i),a=e.child(--o),c=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){var l=0,u=Math.min(s.text.length,a.text.length);while(l<u&&s.text[s.text.length-l-1]==a.text[a.text.length-l-1])l++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var h=yr(s.content,a.content,n-1,r-1);if(h)return h}n-=c,r-=c}else n-=c,r-=c}}rr.prototype.apply=function(t){var e=this,n=t.getMeta(er);if(n&&null!=n.setHandle)return new rr(n.setHandle,null);if(n&&void 0!==n.setDragging)return new rr(e.activeHandle,n.setDragging);if(e.activeHandle>-1&&t.docChanged){var r=t.mapping.map(e.activeHandle,-1);Je(t.doc.resolve(r))||(r=null),e=new rr(r,e.dragging)}return e};var br=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},wr={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};br.prototype.nodesBetween=function(t,e,n,r,i){void 0===r&&(r=0);for(var o=0,s=0;s<e;o++){var a=this.content[o],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,i,o)&&a.content.size){var l=s+1;a.nodesBetween(Math.max(0,t-l),Math.min(a.content.size,e-l),n,r+l)}s=c}},br.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},br.prototype.textBetween=function(t,e,n,r){var i="",o=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(i+=s.text.slice(Math.max(t,a)-a,e-a),o=!n):s.isLeaf&&r?(i+="function"===typeof r?r(s):r,o=!n):!o&&s.isBlock&&(i+=n,o=!0)}),0),i},br.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),i=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),i=1);i<t.content.length;i++)r.push(t.content[i]);return new br(r,this.size+t.size)},br.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var i=0,o=0;o<e;i++){var s=this.content[i],a=o+s.nodeSize;a>t&&((o<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-o),Math.min(s.text.length,e-o)):s.cut(Math.max(0,t-o-1),Math.min(s.content.size,e-o-1))),n.push(s),r+=s.nodeSize),o=a}return new br(n,r)},br.prototype.cutByIndex=function(t,e){return t==e?br.empty:0==t&&e==this.content.length?this:new br(this.content.slice(t,e))},br.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),i=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new br(r,i)},br.prototype.addToStart=function(t){return new br([t].concat(this.content),this.size+t.nodeSize)},br.prototype.addToEnd=function(t){return new br(this.content.concat(t),this.size+t.nodeSize)},br.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},wr.firstChild.get=function(){return this.content.length?this.content[0]:null},wr.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},wr.childCount.get=function(){return this.content.length},br.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},br.prototype.maybeChild=function(t){return this.content[t]},br.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},br.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),vr(this,t,e)},br.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),yr(this,t,e,n)},br.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return Dr(0,t);if(t==this.size)return Dr(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var i=this.child(n),o=r+i.nodeSize;if(o>=t)return o==t||e>0?Dr(n+1,o):Dr(n,r);r=o}},br.prototype.toString=function(){return"<"+this.toStringInner()+">"},br.prototype.toStringInner=function(){return this.content.join(", ")},br.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},br.fromJSON=function(t,e){if(!e)return br.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new br(e.map(t.nodeFromJSON))},br.fromArray=function(t){if(!t.length)return br.empty;for(var e,n=0,r=0;r<t.length;r++){var i=t[r];n+=i.nodeSize,r&&i.isText&&t[r-1].sameMarkup(i)?(e||(e=t.slice(0,r)),e[e.length-1]=i.withText(e[e.length-1].text+i.text)):e&&e.push(i)}return new br(e||t,n)},br.from=function(t){if(!t)return br.empty;if(t instanceof br)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new br([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(br.prototype,wr);var Ar={index:0,offset:0};function Dr(t,e){return Ar.index=t,Ar.offset=e,Ar}function Cr(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!Cr(t[r],e[r]))return!1}else{for(var i in t)if(!(i in e)||!Cr(t[i],e[i]))return!1;for(var o in e)if(!(o in t))return!1}return!0}br.empty=new br([],0);var kr=function(t,e){this.type=t,this.attrs=e};function Er(t){var e=Error.call(this,t);return e.__proto__=Er.prototype,e}kr.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var i=t[r];if(this.eq(i))return t;if(this.type.excludes(i.type))e||(e=t.slice(0,r));else{if(i.type.excludes(this.type))return t;!n&&i.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(i)}}return e||(e=t.slice()),n||e.push(this),e},kr.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},kr.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},kr.prototype.eq=function(t){return this==t||this.type==t.type&&Cr(this.attrs,t.attrs)},kr.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},kr.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},kr.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},kr.setFrom=function(t){if(!t||0==t.length)return kr.none;if(t instanceof kr)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},kr.none=[],Er.prototype=Object.create(Error.prototype),Er.prototype.constructor=Er,Er.prototype.name="ReplaceError";var Sr=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},xr={size:{configurable:!0}};function Tr(t,e,n){var r=t.findIndex(e),i=r.index,o=r.offset,s=t.maybeChild(i),a=t.findIndex(n),c=a.index,l=a.offset;if(o==e||s.isText){if(l!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(Tr(s.content,e-o-1,n-o-1)))}function _r(t,e,n,r){var i=t.findIndex(e),o=i.index,s=i.offset,a=t.maybeChild(o);if(s==e||a.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=_r(a.content,e-s-1,n);return c&&t.replaceChild(o,a.copy(c))}function Mr(t,e,n){if(n.openStart>t.depth)throw new Er("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Er("Inconsistent open depths");return Or(t,e,n,0)}function Or(t,e,n,r){var i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){var s=Or(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=Pr(n,t),c=a.start,l=a.end;return Br(o,Lr(t,c,l,e,r))}var u=t.parent,h=u.content;return Br(u,h.cut(0,t.parentOffset).append(n.content).append(h.cut(e.parentOffset)))}return Br(o,jr(t,e,r))}function Nr(t,e){if(!e.type.compatibleContent(t.type))throw new Er("Cannot join "+e.type.name+" onto "+t.type.name)}function Fr(t,e,n){var r=t.node(n);return Nr(r,e.node(n)),r}function Ir(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Rr(t,e,n,r){var i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(Ir(t.nodeAfter,r),o++));for(var a=o;a<s;a++)Ir(i.child(a),r);e&&e.depth==n&&e.textOffset&&Ir(e.nodeBefore,r)}function Br(t,e){if(!t.type.validContent(e))throw new Er("Invalid content for node "+t.type.name);return t.copy(e)}function Lr(t,e,n,r,i){var o=t.depth>i&&Fr(t,e,i+1),s=r.depth>i&&Fr(n,r,i+1),a=[];return Rr(null,t,i,a),o&&s&&e.index(i)==n.index(i)?(Nr(o,s),Ir(Br(o,Lr(t,e,n,r,i+1)),a)):(o&&Ir(Br(o,jr(t,e,i+1)),a),Rr(e,n,i,a),s&&Ir(Br(s,jr(n,r,i+1)),a)),Rr(r,null,i,a),new br(a)}function jr(t,e,n){var r=[];if(Rr(null,t,n,r),t.depth>n){var i=Fr(t,e,n+1);Ir(Br(i,jr(t,e,n+1)),r)}return Rr(e,null,n,r),new br(r)}function Pr(t,e){for(var n=e.depth-t.openStart,r=e.node(n),i=r.copy(t.content),o=n-1;o>=0;o--)i=e.node(o).copy(br.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}xr.size.get=function(){return this.content.size-this.openStart-this.openEnd},Sr.prototype.insertAt=function(t,e){var n=_r(this.content,t+this.openStart,e,null);return n&&new Sr(n,this.openStart,this.openEnd)},Sr.prototype.removeBetween=function(t,e){return new Sr(Tr(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},Sr.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},Sr.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},Sr.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},Sr.fromJSON=function(t,e){if(!e)return Sr.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new Sr(br.fromJSON(t,e.content),n,r)},Sr.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,i=t.firstChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.firstChild)n++;for(var o=t.lastChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.lastChild)r++;return new Sr(t,n,r)},Object.defineProperties(Sr.prototype,xr),Sr.empty=new Sr(br.empty,0,0);var zr=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},Ur={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};zr.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},Ur.parent.get=function(){return this.node(this.depth)},Ur.doc.get=function(){return this.node(0)},zr.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},zr.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},zr.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},zr.prototype.start=function(t){return t=this.resolveDepth(t),0==t?0:this.path[3*t-1]+1},zr.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},zr.prototype.before=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},zr.prototype.after=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},Ur.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},Ur.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},Ur.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},zr.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,i=0;i<t;i++)r+=n.child(i).nodeSize;return r},zr.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return kr.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var i=n;n=r,r=i}for(var o=n.marks,s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||r&&o[s].isInSet(r.marks)||(o=o[s--].removeFromSet(o));return o},zr.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n},zr.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},zr.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new Vr(this,t,n)},zr.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},zr.prototype.max=function(t){return t.pos>this.pos?t:this},zr.prototype.min=function(t){return t.pos<this.pos?t:this},zr.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},zr.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,i=e,o=t;;){var s=o.content.findIndex(i),a=s.index,c=s.offset,l=i-c;if(n.push(o,a,r+c),!l)break;if(o=o.child(a),o.isText)break;i=l-1,r+=c+1}return new zr(e,n,i)},zr.resolveCached=function(t,e){for(var n=0;n<Hr.length;n++){var r=Hr[n];if(r.pos==e&&r.doc==t)return r}var i=Hr[$r]=zr.resolve(t,e);return $r=($r+1)%Jr,i},Object.defineProperties(zr.prototype,Ur);var Hr=[],$r=0,Jr=12,Vr=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},qr={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};qr.start.get=function(){return this.$from.before(this.depth+1)},qr.end.get=function(){return this.$to.after(this.depth+1)},qr.parent.get=function(){return this.$from.node(this.depth)},qr.startIndex.get=function(){return this.$from.index(this.depth)},qr.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(Vr.prototype,qr);var Gr=Object.create(null),Wr=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||br.empty,this.marks=r||kr.none},Kr={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};function Qr(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}Kr.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},Kr.childCount.get=function(){return this.content.childCount},Wr.prototype.child=function(t){return this.content.child(t)},Wr.prototype.maybeChild=function(t){return this.content.maybeChild(t)},Wr.prototype.forEach=function(t){this.content.forEach(t)},Wr.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},Wr.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},Kr.textContent.get=function(){return this.textBetween(0,this.content.size,"")},Wr.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},Kr.firstChild.get=function(){return this.content.firstChild},Kr.lastChild.get=function(){return this.content.lastChild},Wr.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},Wr.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},Wr.prototype.hasMarkup=function(t,e,n){return this.type==t&&Cr(this.attrs,e||t.defaultAttrs||Gr)&&kr.sameSet(this.marks,n||kr.none)},Wr.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},Wr.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},Wr.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},Wr.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return Sr.empty;var r=this.resolve(t),i=this.resolve(e),o=n?0:r.sharedDepth(e),s=r.start(o),a=r.node(o),c=a.content.cut(r.pos-s,i.pos-s);return new Sr(c,r.depth-o,i.depth-o)},Wr.prototype.replace=function(t,e,n){return Mr(this.resolve(t),this.resolve(e),n)},Wr.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,i=n.offset;if(e=e.maybeChild(r),!e)return null;if(i==t||e.isText)return e;t-=i+1}},Wr.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},Wr.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}},Wr.prototype.resolve=function(t){return zr.resolveCached(this,t)},Wr.prototype.resolveNoCache=function(t){return zr.resolve(this,t)},Wr.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},Kr.isBlock.get=function(){return this.type.isBlock},Kr.isTextblock.get=function(){return this.type.isTextblock},Kr.inlineContent.get=function(){return this.type.inlineContent},Kr.isInline.get=function(){return this.type.isInline},Kr.isText.get=function(){return this.type.isText},Kr.isLeaf.get=function(){return this.type.isLeaf},Kr.isAtom.get=function(){return this.type.isAtom},Wr.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),Qr(this.marks,t)},Wr.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},Wr.prototype.canReplace=function(t,e,n,r,i){void 0===n&&(n=br.empty),void 0===r&&(r=0),void 0===i&&(i=n.childCount);var o=this.contentMatchAt(t).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},Wr.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var i=this.contentMatchAt(t).matchType(n),o=i&&i.matchFragment(this.content,e);return!!o&&o.validEnd},Wr.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},Wr.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=kr.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!kr.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(t){return t.type.name})));this.content.forEach((function(t){return t.check()}))},Wr.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},Wr.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=br.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(Wr.prototype,Kr);var Yr=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},Xr={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};Yr.parse=function(t,e){var n=new Zr(t,e);if(null==n.next)return Yr.empty;var r=ei(n);n.next&&n.err("Unexpected trailing text");var i=hi(ci(r));return di(i,n),i},Yr.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},Yr.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,i=e;r&&i<n;i++)r=r.matchType(t.child(i).type);return r},Xr.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},Xr.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},Yr.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},Yr.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];function i(o,s){var a=o.matchFragment(t,n);if(a&&(!e||a.validEnd))return br.from(s.map((function(t){return t.createAndFill()})));for(var c=0;c<o.next.length;c+=2){var l=o.next[c],u=o.next[c+1];if(!l.isText&&!l.hasRequiredAttrs()&&-1==r.indexOf(u)){r.push(u);var h=i(u,s.concat(l));if(h)return h}}}return i(this,[])},Yr.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},Yr.prototype.computeWrapping=function(t){var e=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){var r=n.shift(),i=r.match;if(i.matchType(t)){for(var o=[],s=r;s.type;s=s.via)o.push(s.type);return o.reverse()}for(var a=0;a<i.next.length;a+=2){var c=i.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!i.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},Xr.edgeCount.get=function(){return this.next.length>>1},Yr.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},Yr.prototype.toString=function(){var t=[];function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}return e(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",i=0;i<e.next.length;i+=2)r+=(i?", ":"")+e.next[i].name+"->"+t.indexOf(e.next[i+1]);return r})).join("\n")},Object.defineProperties(Yr.prototype,Xr),Yr.empty=new Yr(!0);var Zr=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},ti={next:{configurable:!0}};function ei(t){var e=[];do{e.push(ni(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function ni(t){var e=[];do{e.push(ri(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function ri(t){for(var e=ai(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=oi(t,e)}return e}function ii(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function oi(t,e){var n=ii(t),r=n;return t.eat(",")&&(r="}"!=t.next?ii(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function si(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var i=[];for(var o in n){var s=n[o];s.groups.indexOf(e)>-1&&i.push(s)}return 0==i.length&&t.err("No node type or group '"+e+"' found"),i}function ai(t){if(t.eat("(")){var e=ei(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=si(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}function ci(t){var e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var i={term:r,to:n};return e[t].push(i),i}function i(t,e){t.forEach((function(t){return t.to=e}))}function o(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(o(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=o(t.exprs[s],e);if(s==t.exprs.length-1)return a;i(a,e=n())}else{if("star"==t.type){var c=n();return r(e,c),i(o(t.expr,c),c),[r(c)]}if("plus"==t.type){var l=n();return i(o(t.expr,e),l),i(o(t.expr,l),l),[r(l)]}if("opt"==t.type)return[r(e)].concat(o(t.expr,e));if("range"==t.type){for(var u=e,h=0;h<t.min;h++){var d=n();i(o(t.expr,u),d),u=d}if(-1==t.max)i(o(t.expr,u),u);else for(var p=t.min;p<t.max;p++){var f=n();r(u,f),i(o(t.expr,u),f),u=f}return[r(u)]}if("name"==t.type)return[r(e,null,t.value)]}}}function li(t,e){return e-t}function ui(t,e){var n=[];return r(e),n.sort(li);function r(e){var i=t[e];if(1==i.length&&!i[0].term)return r(i[0].to);n.push(e);for(var o=0;o<i.length;o++){var s=i[o],a=s.term,c=s.to;a||-1!=n.indexOf(c)||r(c)}}}function hi(t){var e=Object.create(null);return n(ui(t,0));function n(r){var i=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var o=i.indexOf(n),s=o>-1&&i[o+1];ui(t,r).forEach((function(t){s||i.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var o=e[r.join(",")]=new Yr(r.indexOf(t.length-1)>-1),s=0;s<i.length;s+=2){var a=i[s+1].sort(li);o.next.push(i[s],e[a.join(",")]||n(a))}return o}}function di(t,e){for(var n=0,r=[t];n<r.length;n++){for(var i=r[n],o=!i.validEnd,s=[],a=0;a<i.next.length;a+=2){var c=i.next[a],l=i.next[a+1];s.push(c.name),!o||c.isText||c.hasRequiredAttrs()||(o=!1),-1==r.indexOf(l)&&r.push(l)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function pi(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function fi(t,e){var n=Object.create(null);for(var r in t){var i=e&&e[r];if(void 0===i){var o=t[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=o.default}n[r]=i}return n}function gi(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new yi(t[n]);return e}ti.next.get=function(){return this.tokens[this.pos]},Zr.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},Zr.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(Zr.prototype,ti);var mi=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=gi(n.attrs),this.defaultAttrs=pi(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},vi={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0},whitespace:{configurable:!0}};vi.isInline.get=function(){return!this.isBlock},vi.isTextblock.get=function(){return this.isBlock&&this.inlineContent},vi.isLeaf.get=function(){return this.contentMatch==Yr.empty},vi.isAtom.get=function(){return this.isLeaf||this.spec.atom},vi.whitespace.get=function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")},mi.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},mi.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},mi.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:fi(this.attrs,t)},mi.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Wr(this,this.computeAttrs(t),br.from(e),kr.setFrom(n))},mi.prototype.createChecked=function(t,e,n){if(e=br.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new Wr(this,this.computeAttrs(t),e,kr.setFrom(n))},mi.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),e=br.from(e),e.size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var i=this.contentMatch.matchFragment(e).fillBefore(br.empty,!0);return i?new Wr(this,t,e.append(i),kr.setFrom(n)):null},mi.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},mi.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},mi.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},mi.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:kr.empty:t},mi.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new mi(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(mi.prototype,vi);var yi=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},bi={isRequired:{configurable:!0}};bi.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(yi.prototype,bi);var wi=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=gi(r.attrs),this.rank=e,this.excluded=null;var i=pi(this.attrs);this.instance=i&&new kr(this,i)};wi.prototype.create=function(t){return!t&&this.instance?this.instance:new kr(this,fi(this.attrs,t))},wi.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,i){return n[t]=new wi(t,r++,e,i)})),n},wi.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t},wi.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},wi.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var Ai={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Di={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Ci={ol:!0,ul:!0},ki=1,Ei=2,Si=4;function xi(t,e,n){return null!=e?(e?ki:0)|("full"===e?Ei:0):t&&"pre"==t.whitespace?ki|Ei:n&~Si}var Ti=function(t,e,n,r,i,o,s){this.type=t,this.attrs=e,this.solid=i,this.match=o||(s&Si?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=kr.none,this.pendingMarks=r,this.stashMarks=[]};Ti.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(br.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},Ti.prototype.finish=function(t){if(!(this.options&ki)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=br.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(br.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},Ti.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]},Ti.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):Fi(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}},Ti.prototype.inlineContext=function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!Ai.hasOwnProperty(t.parentNode.nodeName.toLowerCase())};var _i=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,i=e.topNode,o=xi(null,e.preserveWhitespace,0)|(n?Si:0);r=i?new Ti(i.type,i.attrs,kr.none,kr.none,!0,e.topMatch||i.type.contentMatch,o):new Ti(n?null:t.schema.topNodeType,null,kr.none,kr.none,!0,null,o),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},Mi={top:{configurable:!0},currentPos:{configurable:!0}};function Oi(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&Ci.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}function Ni(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(e=n.exec(t))r.push(e[1],e[2].trim());return r}function Fi(t,e){var n=e.schema.nodes,r=function(r){var i=n[r];if(i.allowsMarkType(t)){var o=[],s=function(t){o.push(t);for(var n=0;n<t.edgeCount;n++){var r=t.edge(n),i=r.type,a=r.next;if(i==e)return!0;if(o.indexOf(a)<0&&s(a))return!0}};return s(i.contentMatch)?{v:!0}:void 0}};for(var i in n){var o=r(i);if(o)return o.v}}function Ii(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}Mi.top.get=function(){return this.nodes[this.open]},_i.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(Ni(e)):null,r=this.top;if(null!=n)for(var i=0;i<n.length;i++)this.addPendingMark(n[i]);if(this.addElement(t),null!=n)for(var o=0;o<n.length;o++)this.removePendingMark(n[o],r)}},_i.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if(n.options&Ei||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(n.options&ki)e=n.options&Ei?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],i=t.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},_i.prototype.addElement=function(t,e){var n,r=t.nodeName.toLowerCase();Ci.hasOwnProperty(r)&&this.parser.normalizeLists&&Oi(t);var i=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(i?i.ignore:Di.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(t=i.skip);var o,s=this.top,a=this.needsBlock;if(Ai.hasOwnProperty(r))o=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),o&&this.sync(s),this.needsBlock=a}else this.addElementByRule(t,i,!1===i.consuming?n:null)},_i.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},_i.prototype.ignoreFallback=function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},_i.prototype.readStyles=function(t){var e=kr.none;t:for(var n=0;n<t.length;n+=2)for(var r=null;;){var i=this.parser.matchStyle(t[n],t[n+1],this,r);if(!i)continue t;if(i.ignore)return null;if(e=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(e),!1!==i.consuming)break;r=i}return e},_i.prototype.addElementByRule=function(t,e,n){var r,i,o,s,a=this;e.node?(i=this.parser.schema.nodes[e.node],i.isLeaf?this.insertNode(i.create(e.attrs))||this.leafFallback(t):r=this.enter(i,e.attrs,e.preserveWhitespace)):(o=this.parser.schema.marks[e.mark],s=o.create(e.attrs),this.addPendingMark(s));var c=this.top;if(i&&i.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return a.insertNode(t)}));else{var l=e.contentElement;"string"==typeof l?l=t.querySelector(l):"function"==typeof l&&(l=l(t)),l||(l=t),this.findAround(t,l,!0),this.addAll(l,r)}r&&(this.sync(c),this.open--),s&&this.removePendingMark(s,c)},_i.prototype.addAll=function(t,e,n,r){for(var i=n||0,o=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(o),e&&Ai.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,i)},_i.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var i=this.nodes[r],o=i.findWrapping(t);if(o&&(!e||e.length>o.length)&&(e=o,n=i,!o.length))break;if(i.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},_i.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,i=0;i<t.marks.length;i++)n.type&&!n.type.allowsMarkType(t.marks[i].type)||(r=t.marks[i].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},_i.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},_i.prototype.enterInner=function(t,e,n,r){this.closeExtra();var i=this.top;i.applyPending(t),i.match=i.match&&i.match.matchType(t,e);var o=xi(t,r,i.options);i.options&Si&&0==i.content.length&&(o|=Si),this.nodes.push(new Ti(t,e,i.activeMarks,i.pendingMarks,n,null,o)),this.open++},_i.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},_i.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},_i.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},Mi.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},_i.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},_i.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},_i.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)){var i=e.compareDocumentPosition(this.find[r].node);i&(n?2:4)&&(this.find[r].pos=this.currentPos)}},_i.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},_i.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=function(t,a){for(;t>=0;t--){var c=n[t];if(""==c){if(t==n.length-1||0==t)continue;for(;a>=o;a--)if(s(t-1,a))return!0;return!1}var l=a>0||0==a&&i?e.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!l||l.name!=c&&-1==l.groups.indexOf(c))return!1;a--}return!0};return s(n.length-1,this.open)},_i.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var i=this.parser.schema.nodes[r];if(i.isTextblock&&i.defaultAttrs)return i}},_i.prototype.addPendingMark=function(t){var e=Ii(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},_i.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n],i=r.pendingMarks.lastIndexOf(t);if(i>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var o=r.popFromStashMark(t);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}},Object.defineProperties(_i.prototype,Mi);var Ri=65535,Bi=Math.pow(2,16);function Li(t,e){return t+e*Bi}function ji(t){return t&Ri}function Pi(t){return(t-(t&Ri))/Bi}var zi=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},Ui=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};Ui.prototype.recover=function(t){var e=0,n=ji(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+Pi(t)},Ui.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},Ui.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},Ui.prototype._map=function(t,e,n){for(var r=0,i=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>t)break;var c=this.ranges[s+i],l=this.ranges[s+o],u=a+c;if(t<=u){var h=c?t==a?-1:t==u?1:e:e,d=a+r+(h<0?0:l);if(n)return d;var p=t==(e<0?a:u)?null:Li(s/3,t-a);return new zi(d,e<0?t!=a:t!=u,p)}r+=l-c}return n?t+r:new zi(t+r)},Ui.prototype.touches=function(t,e){for(var n=0,r=ji(e),i=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>t)break;var c=this.ranges[s+i],l=a+c;if(t<=l&&s==3*r)return!0;n+=this.ranges[s+o]-c}return!1},Ui.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,i=0;r<this.ranges.length;r+=3){var o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),c=this.ranges[r+e],l=this.ranges[r+n];t(s,s+c,a,a+l),i+=l-c}},Ui.prototype.invert=function(){return new Ui(this.ranges,!this.inverted)},Ui.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},Ui.offset=function(t){return 0==t?Ui.empty:new Ui(t<0?[0,-t,0]:[0,0,t])},Ui.empty=new Ui([]);var Hi=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function $i(t){var e=Error.call(this,t);return e.__proto__=$i.prototype,e}Hi.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new Hi(this.maps,this.mirror,t,e)},Hi.prototype.copy=function(){return new Hi(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},Hi.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},Hi.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},Hi.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},Hi.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},Hi.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},Hi.prototype.invert=function(){var t=new Hi;return t.appendMappingInverted(this),t},Hi.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},Hi.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},Hi.prototype._map=function(t,e,n){for(var r=!1,i=this.from;i<this.to;i++){var o=this.maps[i],s=o.mapResult(t,e);if(null!=s.recover){var a=this.getMirror(i);if(null!=a&&a>i&&a<this.to){i=a,t=this.maps[a].recover(s.recover);continue}}s.deleted&&(r=!0),t=s.pos}return n?t:new zi(t,r)},$i.prototype=Object.create(Error.prototype),$i.prototype.constructor=$i,$i.prototype.name="TransformError";var Ji=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Hi},Vi={before:{configurable:!0},docChanged:{configurable:!0}};function qi(){throw new Error("Override me")}Vi.before.get=function(){return this.docs.length?this.docs[0]:this.doc},Ji.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new $i(e.failed);return this},Ji.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},Vi.docChanged.get=function(){return this.steps.length>0},Ji.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(Ji.prototype,Vi);var Gi=Object.create(null),Wi=function(){};Wi.prototype.apply=function(t){return qi()},Wi.prototype.getMap=function(){return Ui.empty},Wi.prototype.invert=function(t){return qi()},Wi.prototype.map=function(t){return qi()},Wi.prototype.merge=function(t){return null},Wi.prototype.toJSON=function(){return qi()},Wi.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=Gi[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},Wi.jsonID=function(t,e){if(t in Gi)throw new RangeError("Duplicate use of step JSON ID "+t);return Gi[t]=e,e.prototype.jsonID=t,e};var Ki=function(t,e){this.doc=t,this.failed=e};Ki.ok=function(t){return new Ki(t,null)},Ki.fail=function(t){return new Ki(null,t)},Ki.fromReplace=function(t,e,n,r){try{return Ki.ok(t.replace(e,n,r))}catch(i){if(i instanceof Er)return Ki.fail(i.message);throw i}};var Qi=function(t){function e(e,n,r,i){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&Xi(t,this.from,this.to)?Ki.fail("Structure replace would overwrite content"):Ki.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new Ui([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?Sr.empty:new Sr(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var r=this.slice.size+t.slice.size==0?Sr.empty:new Sr(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),r,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,Sr.fromJSON(t,n.slice),!!n.structure)},e}(Wi);Wi.jsonID("replace",Qi);var Yi=function(t){function e(e,n,r,i,o,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(Xi(t,this.from,this.gapFrom)||Xi(t,this.gapTo,this.to)))return Ki.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return Ki.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?Ki.fromReplace(t,this.from,this.to,n):Ki.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new Ui([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=t.map(this.gapFrom,-1),o=t.map(this.gapTo,1);return n.deleted&&r.deleted||i<n.pos||o>r.pos?null:new e(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,Sr.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(Wi);function Xi(t,e,n){var r=t.resolve(e),i=n-e,o=r.depth;while(i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount)o--,i--;if(i>0){var s=r.node(o).maybeChild(r.indexAfter(o));while(i>0){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function Zi(t,e,n){var r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function to(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var i=r.depth-1;i>=0;i--){var o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}function eo(t,e,n){for(var r=[],i=0;i<t.childCount;i++){var o=t.child(i);o.content.size&&(o=o.copy(eo(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return br.fromArray(r)}Wi.jsonID("replaceAround",Yi),Ji.prototype.lift=function(t,e){for(var n=t.$from,r=t.$to,i=t.depth,o=n.before(i+1),s=r.after(i+1),a=o,c=s,l=br.empty,u=0,h=i,d=!1;h>e;h--)d||n.index(h)>0?(d=!0,l=br.from(n.node(h).copy(l)),u++):a--;for(var p=br.empty,f=0,g=i,m=!1;g>e;g--)m||r.after(g+1)<r.end(g)?(m=!0,p=br.from(r.node(g).copy(p)),f++):c++;return this.step(new Yi(a,c,o,s,new Sr(l.append(p),u,f),l.size-u,!0))},Ji.prototype.wrap=function(t,e){for(var n=br.empty,r=e.length-1;r>=0;r--)n=br.from(e[r].type.create(e[r].attrs,n));var i=t.start,o=t.end;return this.step(new Yi(i,o,i,o,new Sr(n,0,0),e.length,!0))},Ji.prototype.setBlockType=function(t,e,n,r){var i=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var o=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,r)&&Zi(i.doc,i.mapping.slice(o).map(e),n)){i.clearIncompatible(i.mapping.slice(o).map(e,1),n);var s=i.mapping.slice(o),a=s.map(e,1),c=s.map(e+t.nodeSize,1);return i.step(new Yi(a,c,a+1,c-1,new Sr(br.from(n.create(r,null,t.marks)),0,0),1,!0)),!1}})),this},Ji.prototype.setNodeMarkup=function(t,e,n,r){var i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");e||(e=i.type);var o=e.create(n,null,r||i.marks);if(i.isLeaf)return this.replaceWith(t,t+i.nodeSize,o);if(!e.validContent(i.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new Yi(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new Sr(br.from(o),0,0),1,!0))},Ji.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var r=this.doc.resolve(t),i=br.empty,o=br.empty,s=r.depth,a=r.depth-e,c=e-1;s>a;s--,c--){i=br.from(r.node(s).copy(i));var l=n&&n[c];o=br.from(l?l.type.create(l.attrs,o):r.node(s).copy(o))}return this.step(new Qi(t,t,new Sr(i.append(o),e,e),!0))},Ji.prototype.join=function(t,e){void 0===e&&(e=1);var n=new Qi(t-e,t+e,Sr.empty,!0);return this.step(n)};var no=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new Sr(eo(n.content,(function(t,n){return t.isAtom&&n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),i),n.openStart,n.openEnd);return Ki.fromReplace(t,this.from,this.to,o)},e.prototype.invert=function(){return new ro(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(Wi);Wi.jsonID("addMark",no);var ro=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=new Sr(eo(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return Ki.fromReplace(t,this.from,this.to,r)},e.prototype.invert=function(){return new no(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(Wi);function io(t,e,n,r){if(void 0===n&&(n=e),void 0===r&&(r=Sr.empty),e==n&&!r.size)return null;var i=t.resolve(e),o=t.resolve(n);return oo(i,o,r)?new Qi(e,n,r):new so(i,o,r).fit()}function oo(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}Wi.jsonID("removeMark",ro),Ji.prototype.addMark=function(t,e,n){var r=this,i=[],o=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(r,c,l){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&l.type.allowsMarkType(n.type)){for(var h=Math.max(c,t),d=Math.min(c+r.nodeSize,e),p=n.addToSet(u),f=0;f<u.length;f++)u[f].isInSet(p)||(s&&s.to==h&&s.mark.eq(u[f])?s.to=d:i.push(s=new ro(h,d,u[f])));a&&a.to==h?a.to=d:o.push(a=new no(h,d,n))}}})),i.forEach((function(t){return r.step(t)})),o.forEach((function(t){return r.step(t)})),this},Ji.prototype.removeMark=function(t,e,n){var r=this;void 0===n&&(n=null);var i=[],o=0;return this.doc.nodesBetween(t,e,(function(r,s){if(r.isInline){o++;var a=null;if(n instanceof wi){var c,l=r.marks;while(c=n.isInSet(l))(a||(a=[])).push(c),l=c.removeFromSet(l)}else n?n.isInSet(r.marks)&&(a=[n]):a=r.marks;if(a&&a.length)for(var u=Math.min(s+r.nodeSize,e),h=0;h<a.length;h++){for(var d=a[h],p=void 0,f=0;f<i.length;f++){var g=i[f];g.step==o-1&&d.eq(i[f].style)&&(p=g)}p?(p.to=u,p.step=o):i.push({style:d,from:Math.max(s,t),to:u,step:o})}}})),i.forEach((function(t){return r.step(new ro(t.from,t.to,t.style))})),this},Ji.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var r=this.doc.nodeAt(t),i=[],o=t+1,s=0;s<r.childCount;s++){var a=r.child(s),c=o+a.nodeSize,l=n.matchType(a.type,a.attrs);if(l){n=l;for(var u=0;u<a.marks.length;u++)e.allowsMarkType(a.marks[u].type)||this.step(new ro(o,c,a.marks[u]))}else i.push(new Qi(o,c,Sr.empty));o=c}if(!n.validEnd){var h=n.fillBefore(br.empty,!0);this.replace(o,o,new Sr(h,0,0))}for(var d=i.length-1;d>=0;d--)this.step(i[d]);return this},Ji.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=Sr.empty);var r=io(this.doc,t,e,n);return r&&this.step(r),this},Ji.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new Sr(br.from(n),0,0))},Ji.prototype.delete=function(t,e){return this.replace(t,e,Sr.empty)},Ji.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var so=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var r=0;r<=t.depth;r++){var i=t.node(r);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(r))})}this.placed=br.empty;for(var o=t.depth;o>0;o--)this.placed=br.from(t.node(o).copy(this.placed))},ao={depth:{configurable:!0}};function co(t,e,n){return 0==e?t.cutByIndex(n):t.replaceChild(0,t.firstChild.copy(co(t.firstChild.content,e-1,n)))}function lo(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(lo(t.lastChild.content,e-1,n)))}function uo(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function ho(t,e,n){if(e<=0)return t;var r=t.content;return e>1&&(r=r.replaceChild(0,ho(r.firstChild,e-1,1==r.childCount?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(br.empty,!0)))),t.copy(r)}function po(t,e,n,r,i){var o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;var a=r.fillBefore(o.content,!0,s);return a&&!fo(n,o.content,s)?a:null}function fo(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function go(t,e,n,r,i){if(e<n){var o=t.firstChild;t=t.replaceChild(0,o.copy(go(o.content,e+1,n,r,o)))}if(e>r){var s=i.contentMatchAt(0),a=s.fillBefore(t).append(t);t=a.append(s.matchFragment(a).fillBefore(br.empty,!0))}return t}function mo(t,e){for(var n=[],r=Math.min(t.depth,e.depth),i=r;i>=0;i--){var o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}ao.depth.get=function(){return this.frontier.length-1},so.prototype.fit=function(){while(this.unplaced.size){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;var o=this.placed,s=r.depth,a=i.depth;while(s&&a&&1==o.childCount)o=o.firstChild.content,s--,a--;var c=new Sr(o,s,a);return e>-1?new Yi(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new Qi(r.pos,i.pos,c):void 0},so.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--){var n=void 0,r=void 0;e?(r=uo(this.unplaced.content,e-1).firstChild,n=r.content):n=this.unplaced.content;for(var i=n.firstChild,o=this.depth;o>=0;o--){var s=this.frontier[o],a=s.type,c=s.match,l=void 0,u=void 0;if(1==t&&(i?c.matchType(i.type)||(u=c.fillBefore(br.from(i),!1)):a.compatibleContent(r.type)))return{sliceDepth:e,frontierDepth:o,parent:r,inject:u};if(2==t&&i&&(l=c.findWrapping(i.type)))return{sliceDepth:e,frontierDepth:o,parent:r,wrap:l};if(r&&c.matchType(r.type))break}}},so.prototype.openMore=function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,i=uo(e,n);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new Sr(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)},so.prototype.dropNode=function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,i=uo(e,n);if(i.childCount<=1&&n>0){var o=e.size-n<=n+i.size;this.unplaced=new Sr(co(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new Sr(co(e,n,1),n,r)},so.prototype.placeNodes=function(t){var e=t.sliceDepth,n=t.frontierDepth,r=t.parent,i=t.inject,o=t.wrap;while(this.depth>n)this.closeFrontierNode();if(o)for(var s=0;s<o.length;s++)this.openFrontierNode(o[s]);var a=this.unplaced,c=r?r.content:a.content,l=a.openStart-e,u=0,h=[],d=this.frontier[n],p=d.match,f=d.type;if(i){for(var g=0;g<i.childCount;g++)h.push(i.child(g));p=p.matchFragment(i)}var m=c.size+e-(a.content.size-a.openEnd);while(u<c.childCount){var v=c.child(u),y=p.matchType(v.type);if(!y)break;u++,(u>1||0==l||v.content.size)&&(p=y,h.push(ho(v.mark(f.allowedMarks(v.marks)),1==u?l:0,u==c.childCount?m:-1)))}var b=u==c.childCount;b||(m=-1),this.placed=lo(this.placed,n,br.from(h)),this.frontier[n].match=p,b&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var w=0,A=c;w<m;w++){var D=A.lastChild;this.frontier.push({type:D.type,match:D.contentMatchAt(D.childCount)}),A=D.content}this.unplaced=b?0==e?Sr.empty:new Sr(co(a.content,e-1,1),e-1,m<0?a.openEnd:e-1):new Sr(co(a.content,e,u),a.openStart,a.openEnd)},so.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!po(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;var n=this.$to,r=n.depth,i=this.$to.after(r);while(r>1&&i==this.$to.end(--r))++i;return i},so.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,i=n.type,o=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=po(t,e,i,r,o);if(s){for(var a=e-1;a>=0;a--){var c=this.frontier[a],l=c.match,u=c.type,h=po(t,a,u,l,!0);if(!h||h.childCount)continue t}return{depth:e,fit:s,move:o?t.doc.resolve(t.after(e+1)):t}}}},so.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;while(this.depth>e.depth)this.closeFrontierNode();e.fit.childCount&&(this.placed=lo(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),i=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,i)}return t},so.prototype.openFrontierNode=function(t,e,n){var r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=lo(this.placed,this.depth,br.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})},so.prototype.closeFrontierNode=function(){var t=this.frontier.pop(),e=t.match.fillBefore(br.empty,!0);e.childCount&&(this.placed=lo(this.placed,this.frontier.length,e))},Object.defineProperties(so.prototype,ao),Ji.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var r=this.doc.resolve(t),i=this.doc.resolve(e);if(oo(r,i,n))return this.step(new Qi(t,e,n));var o=mo(r,this.doc.resolve(e));0==o[o.length-1]&&o.pop();var s=-(r.depth+1);o.unshift(s);for(var a=r.depth,c=r.pos-1;a>0;a--,c--){var l=r.node(a).type.spec;if(l.defining||l.isolating)break;o.indexOf(a)>-1?s=a:r.before(a)==c&&o.splice(1,0,-a)}for(var u=o.indexOf(s),h=[],d=n.openStart,p=n.content,f=0;;f++){var g=p.firstChild;if(h.push(g),f==n.openStart)break;p=g.content}d>0&&h[d-1].type.spec.defining&&r.node(u).type!=h[d-1].type?d-=1:d>=2&&h[d-1].isTextblock&&h[d-2].type.spec.defining&&r.node(u).type!=h[d-2].type&&(d-=2);for(var m=n.openStart;m>=0;m--){var v=(m+d+1)%(n.openStart+1),y=h[v];if(y)for(var b=0;b<o.length;b++){var w=o[(b+u)%o.length],A=!0;w<0&&(A=!1,w=-w);var D=r.node(w-1),C=r.index(w-1);if(D.canReplaceWith(C,C,y.type,y.marks))return this.replace(r.before(w),A?i.after(w):e,new Sr(go(n.content,0,n.openStart,v),v,n.openEnd))}}for(var k=this.steps.length,E=o.length-1;E>=0;E--){if(this.replace(t,e,n),this.steps.length>k)break;var S=o[E];S<0||(t=r.before(S),e=i.after(S))}return this},Ji.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var r=to(this.doc,t,n.type);null!=r&&(t=e=r)}return this.replaceRange(t,e,new Sr(br.from(n),0,0))},Ji.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),i=mo(n,r),o=0;o<i.length;o++){var s=i[o],a=o==i.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(t-n.start(c)==n.depth-c&&e>n.end(c)&&r.end(c)-e!=r.depth-c)return this.delete(n.before(c),e);return this.delete(t,e)};var vo=Object.create(null),yo=function(t,e,n){this.ranges=n||[new wo(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},bo={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};bo.anchor.get=function(){return this.$anchor.pos},bo.head.get=function(){return this.$head.pos},bo.from.get=function(){return this.$from.pos},bo.to.get=function(){return this.$to.pos},bo.$from.get=function(){return this.ranges[0].$from},bo.$to.get=function(){return this.ranges[0].$to},bo.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},yo.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},yo.prototype.replace=function(t,e){void 0===e&&(e=Sr.empty);for(var n=e.content.lastChild,r=null,i=0;i<e.openEnd;i++)r=n,n=n.lastChild;for(var o=t.steps.length,s=this.ranges,a=0;a<s.length;a++){var c=s[a],l=c.$from,u=c.$to,h=t.mapping.slice(o);t.replaceRange(h.map(l.pos),h.map(u.pos),a?Sr.empty:e),0==a&&To(t,o,(n?n.isInline:r&&r.isTextblock)?-1:1)}},yo.prototype.replaceWith=function(t,e){for(var n=t.steps.length,r=this.ranges,i=0;i<r.length;i++){var o=r[i],s=o.$from,a=o.$to,c=t.mapping.slice(n),l=c.map(s.pos),u=c.map(a.pos);i?t.deleteRange(l,u):(t.replaceRangeWith(l,u,e),To(t,n,e.isInline?-1:1))}},yo.findFrom=function(t,e,n){var r=t.parent.inlineContent?new Ao(t):xo(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var i=t.depth-1;i>=0;i--){var o=e<0?xo(t.node(0),t.node(i),t.before(i+1),t.index(i),e,n):xo(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,e,n);if(o)return o}},yo.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new Eo(t.node(0))},yo.atStart=function(t){return xo(t,t,0,0,1)||new Eo(t)},yo.atEnd=function(t){return xo(t,t,t.content.size,t.childCount,-1)||new Eo(t)},yo.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=vo[e.type];if(!n)throw new RangeError("No selection type "+e.type+" defined");return n.fromJSON(t,e)},yo.jsonID=function(t,e){if(t in vo)throw new RangeError("Duplicate use of selection JSON ID "+t);return vo[t]=e,e.prototype.jsonID=t,e},yo.prototype.getBookmark=function(){return Ao.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(yo.prototype,bo),yo.prototype.visible=!0;var wo=function(t,e){this.$from=t,this.$to=e},Ao=function(t){function e(e,n){void 0===n&&(n=e),t.call(this,e,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(n,r){var i=n.resolve(r.map(this.head));if(!i.parent.inlineContent)return t.near(i);var o=n.resolve(r.map(this.anchor));return new e(o.parent.inlineContent?o:i,i)},e.prototype.replace=function(e,n){if(void 0===n&&(n=Sr.empty),t.prototype.replace.call(this,e,n),n==Sr.empty){var r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new Do(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,e,n){void 0===n&&(n=e);var r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))},e.between=function(n,r,i){var o=n.pos-r.pos;if(i&&!o||(i=o>=0?1:-1),!r.parent.inlineContent){var s=t.findFrom(r,i,!0)||t.findFrom(r,-i,!0);if(!s)return t.near(r,i);r=s.$head}return n.parent.inlineContent||(0==o?n=r:(n=(t.findFrom(n,-i,!0)||t.findFrom(n,i,!0)).$anchor,n.pos<r.pos!=o<0&&(n=r))),new e(n,r)},Object.defineProperties(e.prototype,n),e}(yo);yo.jsonID("text",Ao);var Do=function(t,e){this.anchor=t,this.head=e};Do.prototype.map=function(t){return new Do(t.map(this.anchor),t.map(this.head))},Do.prototype.resolve=function(t){return Ao.between(t.resolve(this.anchor),t.resolve(this.head))};var Co=function(t){function e(e){var n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);t.call(this,e,r),this.node=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var i=r.mapResult(this.anchor),o=i.deleted,s=i.pos,a=n.resolve(s);return o?t.near(a):new e(a)},e.prototype.content=function(){return new Sr(br.from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new ko(this.anchor)},e.fromJSON=function(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(yo);Co.prototype.visible=!1,yo.jsonID("node",Co);var ko=function(t){this.anchor=t};ko.prototype.map=function(t){var e=t.mapResult(this.anchor),n=e.deleted,r=e.pos;return n?new Do(r,r):new ko(r)},ko.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&Co.isSelectable(n)?new Co(e):yo.near(e)};var Eo=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replace=function(e,n){if(void 0===n&&(n=Sr.empty),n==Sr.empty){e.delete(0,e.doc.content.size);var r=t.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else t.prototype.replace.call(this,e,n)},e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return So},e}(yo);yo.jsonID("all",Eo);var So={map:function(){return this},resolve:function(t){return new Eo(t)}};function xo(t,e,n,r,i,o){if(e.inlineContent)return Ao.create(t,n);for(var s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){var a=e.child(s);if(a.isAtom){if(!o&&Co.isSelectable(a))return Co.create(t,n-(i<0?a.nodeSize:0))}else{var c=xo(t,a,n+i,i<0?a.childCount:0,i,o);if(c)return c}n+=a.nodeSize*i}}function To(t,e,n){var r=t.steps.length-1;if(!(r<e)){var i=t.steps[r];if(i instanceof Qi||i instanceof Yi){var o,s=t.mapping.maps[r];s.forEach((function(t,e,n,r){null==o&&(o=r)})),t.setSelection(yo.near(t.doc.resolve(o),n))}}}var _o=1,Mo=2,Oo=4,No=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|_o)&~Mo,this.storedMarks=null,this},n.selectionSet.get=function(){return(this.updated&_o)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=Mo,this},e.prototype.ensureMarks=function(t){return kr.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(this.updated&Mo)>0},e.prototype.addStep=function(e,n){t.prototype.addStep.call(this,e,n),this.updated=this.updated&~Mo,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var n=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||kr.none))),n.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,n){void 0===n&&(n=e);var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,n);var i=this.storedMarks;if(!i){var o=this.doc.resolve(e);i=n==e?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,i)),this.selection.empty||this.setSelection(yo.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},n.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=Oo,this},n.scrolledIntoView.get=function(){return(this.updated&Oo)>0},Object.defineProperties(e.prototype,n),e}(Ji);function Fo(t,e){return e&&t?t.bind(e):t}var Io=function(t,e,n){this.name=t,this.init=Fo(e.init,n),this.apply=Fo(e.apply,n)},Ro=[new Io("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new Io("selection",{init:function(t,e){return t.selection||yo.atStart(e.doc)},apply:function(t){return t.selection}}),new Io("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Io("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],Bo=function(t,e){var n=this;this.schema=t,this.fields=Ro.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(n.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");n.plugins.push(t),n.pluginsByKey[t.key]=t,t.spec.state&&n.fields.push(new Io(t.key,t.spec.state,t))}))},Lo=function(t){this.config=t},jo={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};jo.schema.get=function(){return this.config.schema},jo.plugins.get=function(){return this.config.plugins},Lo.prototype.apply=function(t){return this.applyTransaction(t).state},Lo.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=e){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0},Lo.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),r=null;;){for(var i=!1,o=0;o<this.config.plugins.length;o++){var s=this.config.plugins[o];if(s.spec.appendTransaction){var a=r?r[o].n:0,c=r?r[o].state:this,l=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,c,n);if(l&&n.filterTransaction(l,o)){if(l.setMeta("appendedTransaction",t),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<o?{state:n,n:e.length}:{state:this,n:0})}e.push(l),n=n.applyInner(l),i=!0}r&&(r[o]={state:n,n:e.length})}}if(!i)return{state:n,transactions:e}}},Lo.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new Lo(this.config),n=this.config.fields,r=0;r<n.length;r++){var i=n[r];e[i.name]=i.apply(t,this[i.name],this,e)}for(var o=0;o<Po.length;o++)Po[o](this,t,e);return e},jo.tr.get=function(){return new No(this)},Lo.create=function(t){for(var e=new Bo(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new Lo(e),r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n},Lo.prototype.reconfigure=function(t){for(var e=new Bo(this.schema,t.plugins),n=e.fields,r=new Lo(e),i=0;i<n.length;i++){var o=n[i].name;r[o]=this.hasOwnProperty(o)?this[o]:n[i].init(t,r)}return r},Lo.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==typeof t)for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[n],i=r.spec.state;i&&i.toJSON&&(e[n]=i.toJSON.call(r,this[r.key]))}return e},Lo.fromJSON=function(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var r=new Bo(t.schema,t.plugins),i=new Lo(r);return r.fields.forEach((function(r){if("doc"==r.name)i.doc=Wr.fromJSON(t.schema,e.doc);else if("selection"==r.name)i.selection=yo.fromJSON(i.doc,e.selection);else if("storedMarks"==r.name)e.storedMarks&&(i.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(var o in n){var s=n[o],a=s.spec.state;if(s.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(e,o))return void(i[r.name]=a.fromJSON.call(s,t,e[o],i))}i[r.name]=r.init(t,i)}})),i},Lo.addApplyListener=function(t){Po.push(t)},Lo.removeApplyListener=function(t){var e=Po.indexOf(t);e>-1&&Po.splice(e,1)},Object.defineProperties(Lo.prototype,jo);var Po=[];function zo(t,e){return e?t.createChecked(null,e):t.createAndFill()}function Uo(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;const e={};return Object.keys(t.nodes).forEach(n=>{const r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)}),t.cached.tableNodeTypes=e,e}function Ho(t,e,n,r,i){const o=Uo(t),s=[],a=[];for(let l=0;l<n;l+=1){const t=zo(o.cell,i);if(t&&a.push(t),r){const t=zo(o.header_cell,i);t&&s.push(t)}}const c=[];for(let l=0;l<e;l+=1)c.push(o.row.createChecked(null,r&&0===l?s:a));return o.table.createChecked(null,c)}function $o(t){return t instanceof Xe}const Jo=({editor:t})=>{const{selection:e}=t.state;if(!$o(e))return!1;let n=0;const r=Object(D["k"])(e.ranges[0].$from,t=>"table"===t.type.name);null===r||void 0===r||r.node.descendants(t=>{if("table"===t.type.name)return!1;["tableCell","tableHeader"].includes(t.type.name)&&(n+=1)});const i=n===e.ranges.length;return!!i&&(t.commands.deleteTable(),!0)};function Vo(t,e,n,r,i,o){let s=0,a=!0,c=e.firstChild;const l=t.firstChild;for(let u=0,h=0;u<l.childCount;u+=1){const{colspan:t,colwidth:n}=l.child(u).attrs;for(let l=0;l<t;l+=1,h+=1){const t=i===h?o:n&&n[l],u=t?t+"px":"";s+=t||r,t||(a=!1),c?(c.style.width!==u&&(c.style.width=u),c=c.nextSibling):e.appendChild(document.createElement("col")).style.width=u}}while(c){const t=c.nextSibling;c.parentNode.removeChild(c),c=t}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}class qo{constructor(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Vo(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type===this.node.type&&(this.node=t,Vo(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){return"attributes"===t.type&&(t.target===this.table||this.colgroup.contains(t.target))}}const Go=D["d"].create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:qo,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({HTMLAttributes:t}){return["table",Object(D["u"])(this.options.HTMLAttributes,t),["tbody",0]]},addCommands(){return{insertTable:({rows:t=3,cols:e=3,withHeaderRow:n=!0}={})=>({tr:r,dispatch:i,editor:o})=>{const s=Ho(o.schema,t,e,n);if(i){const t=r.selection.anchor+1;r.replaceSelectionWith(s).scrollIntoView().setSelection(Ao.near(r.doc.resolve(t)))}return!0},addColumnBefore:()=>({state:t,dispatch:e})=>Mn(t,e),addColumnAfter:()=>({state:t,dispatch:e})=>On(t,e),deleteColumn:()=>({state:t,dispatch:e})=>Fn(t,e),addRowBefore:()=>({state:t,dispatch:e})=>Bn(t,e),addRowAfter:()=>({state:t,dispatch:e})=>Ln(t,e),deleteRow:()=>({state:t,dispatch:e})=>Pn(t,e),deleteTable:()=>({state:t,dispatch:e})=>Xn(t,e),mergeCells:()=>({state:t,dispatch:e})=>Hn(t,e),splitCell:()=>({state:t,dispatch:e})=>$n(t,e),toggleHeaderColumn:()=>({state:t,dispatch:e})=>Wn("column")(t,e),toggleHeaderRow:()=>({state:t,dispatch:e})=>Wn("row")(t,e),toggleHeaderCell:()=>({state:t,dispatch:e})=>Kn(t,e),mergeOrSplit:()=>({state:t,dispatch:e})=>!!Hn(t,e)||$n(t,e),setCellAttribute:(t,e)=>({state:n,dispatch:r})=>Vn(t,e)(n,r),goToNextCell:()=>({state:t,dispatch:e})=>Yn(1)(t,e),goToPreviousCell:()=>({state:t,dispatch:e})=>Yn(-1)(t,e),fixTables:()=>({state:t,dispatch:e})=>(e&&Sn(t),!0),setCellSelection:t=>({tr:e,dispatch:n})=>{if(n){const n=Xe.create(e.doc,t.anchorCell,t.headCell);e.setSelection(n)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:Jo,"Mod-Backspace":Jo,Delete:Jo,"Mod-Delete":Jo}},addProseMirrorPlugins(){const t=this.options.resizable&&this.editor.isEditable;return[...t?[nr({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],mr({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:Object(D["f"])(Object(D["n"])(t,"tableRole",e))}}}),Wo=D["d"].create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth"),n=e?[parseInt(e,10)]:null;return n}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",Object(D["u"])(this.options.HTMLAttributes,t),0]}}),Ko=D["d"].create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth"),n=e?[parseInt(e,10)]:null;return n}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",Object(D["u"])(this.options.HTMLAttributes,t),0]}}),Qo=D["d"].create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",Object(D["u"])(this.options.HTMLAttributes,t),0]}});var Yo={};function Xo(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach((function(e){var n=t[e];"object"!=typeof n||Object.isFrozen(n)||Xo(n)})),t}var Zo=Xo,ts=Xo;Zo.default=ts;class es{constructor(t){void 0===t.data&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function ns(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function rs(t,...e){const n=Object.create(null);for(const r in t)n[r]=t[r];return e.forEach((function(t){for(const e in t)n[e]=t[e]})),n}const is="</span>",os=t=>!!t.kind;class ss{constructor(t,e){this.buffer="",this.classPrefix=e.classPrefix,t.walk(this)}addText(t){this.buffer+=ns(t)}openNode(t){if(!os(t))return;let e=t.kind;t.sublanguage||(e=`${this.classPrefix}${e}`),this.span(e)}closeNode(t){os(t)&&(this.buffer+=is)}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}class as{constructor(){this.rootNode={children:[]},this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const e={kind:t,children:[]};this.add(e),this.stack.push(e)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){while(this.closeNode());}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,e){return"string"===typeof e?t.addText(e):e.children&&(t.openNode(e),e.children.forEach(e=>this._walk(t,e)),t.closeNode(e)),t}static _collapse(t){"string"!==typeof t&&t.children&&(t.children.every(t=>"string"===typeof t)?t.children=[t.children.join("")]:t.children.forEach(t=>{as._collapse(t)}))}}class cs extends as{constructor(t){super(),this.options=t}addKeyword(t,e){""!==t&&(this.openNode(e),this.addText(t),this.closeNode())}addText(t){""!==t&&this.add(t)}addSublanguage(t,e){const n=t.root;n.kind=e,n.sublanguage=!0,this.add(n)}toHTML(){const t=new ss(this,this.options);return t.value()}finalize(){return!0}}function ls(t){return new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")}function us(t){return t?"string"===typeof t?t:t.source:null}function hs(...t){const e=t.map(t=>us(t)).join("");return e}function ds(...t){const e="("+t.map(t=>us(t)).join("|")+")";return e}function ps(t){return new RegExp(t.toString()+"|").exec("").length-1}function fs(t,e){const n=t&&t.exec(e);return n&&0===n.index}const gs=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function ms(t,e="|"){let n=0;return t.map(t=>{n+=1;const e=n;let r=us(t),i="";while(r.length>0){const t=gs.exec(r);if(!t){i+=r;break}i+=r.substring(0,t.index),r=r.substring(t.index+t[0].length),"\\"===t[0][0]&&t[1]?i+="\\"+String(Number(t[1])+e):(i+=t[0],"("===t[0]&&n++)}return i}).map(t=>`(${t})`).join(e)}const vs=/\b\B/,ys="[a-zA-Z]\\w*",bs="[a-zA-Z_]\\w*",ws="\\b\\d+(\\.\\d+)?",As="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",Ds="\\b(0b[01]+)",Cs="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",ks=(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=hs(e,/.*\b/,t.binary,/\b.*/)),rs({className:"meta",begin:e,end:/$/,relevance:0,"on:begin":(t,e)=>{0!==t.index&&e.ignoreMatch()}},t)},Es={begin:"\\\\[\\s\\S]",relevance:0},Ss={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[Es]},xs={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[Es]},Ts={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},_s=function(t,e,n={}){const r=rs({className:"comment",begin:t,end:e,contains:[]},n);return r.contains.push(Ts),r.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):",relevance:0}),r},Ms=_s("//","$"),Os=_s("/\\*","\\*/"),Ns=_s("#","$"),Fs={className:"number",begin:ws,relevance:0},Is={className:"number",begin:As,relevance:0},Rs={className:"number",begin:Ds,relevance:0},Bs={className:"number",begin:ws+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},Ls={begin:/(?=\/[^/\n]*\/)/,contains:[{className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[Es,{begin:/\[/,end:/\]/,relevance:0,contains:[Es]}]}]},js={className:"title",begin:ys,relevance:0},Ps={className:"title",begin:bs,relevance:0},zs={begin:"\\.\\s*"+bs,relevance:0},Us=function(t){return Object.assign(t,{"on:begin":(t,e)=>{e.data._beginMatch=t[1]},"on:end":(t,e)=>{e.data._beginMatch!==t[1]&&e.ignoreMatch()}})};var Hs=Object.freeze({__proto__:null,MATCH_NOTHING_RE:vs,IDENT_RE:ys,UNDERSCORE_IDENT_RE:bs,NUMBER_RE:ws,C_NUMBER_RE:As,BINARY_NUMBER_RE:Ds,RE_STARTERS_RE:Cs,SHEBANG:ks,BACKSLASH_ESCAPE:Es,APOS_STRING_MODE:Ss,QUOTE_STRING_MODE:xs,PHRASAL_WORDS_MODE:Ts,COMMENT:_s,C_LINE_COMMENT_MODE:Ms,C_BLOCK_COMMENT_MODE:Os,HASH_COMMENT_MODE:Ns,NUMBER_MODE:Fs,C_NUMBER_MODE:Is,BINARY_NUMBER_MODE:Rs,CSS_NUMBER_MODE:Bs,REGEXP_MODE:Ls,TITLE_MODE:js,UNDERSCORE_TITLE_MODE:Ps,METHOD_GUARD:zs,END_SAME_AS_BEGIN:Us});function $s(t,e){const n=t.input[t.index-1];"."===n&&e.ignoreMatch()}function Js(t,e){e&&t.beginKeywords&&(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=$s,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,void 0===t.relevance&&(t.relevance=0))}function Vs(t,e){Array.isArray(t.illegal)&&(t.illegal=ds(...t.illegal))}function qs(t,e){if(t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function Gs(t,e){void 0===t.relevance&&(t.relevance=1)}const Ws=["of","and","for","in","not","or","if","then","parent","list","value"],Ks="keyword";function Qs(t,e,n=Ks){const r={};return"string"===typeof t?i(n,t.split(" ")):Array.isArray(t)?i(n,t):Object.keys(t).forEach((function(n){Object.assign(r,Qs(t[n],e,n))})),r;function i(t,n){e&&(n=n.map(t=>t.toLowerCase())),n.forEach((function(e){const n=e.split("|");r[n[0]]=[t,Ys(n[0],n[1])]}))}}function Ys(t,e){return e?Number(e):Xs(t)?0:1}function Xs(t){return Ws.includes(t.toLowerCase())}function Zs(t,{plugins:e}){function n(e,n){return new RegExp(us(e),"m"+(t.case_insensitive?"i":"")+(n?"g":""))}class r{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(t,e){e.position=this.position++,this.matchIndexes[this.matchAt]=e,this.regexes.push([e,t]),this.matchAt+=ps(t)+1}compile(){0===this.regexes.length&&(this.exec=()=>null);const t=this.regexes.map(t=>t[1]);this.matcherRe=n(ms(t),!0),this.lastIndex=0}exec(t){this.matcherRe.lastIndex=this.lastIndex;const e=this.matcherRe.exec(t);if(!e)return null;const n=e.findIndex((t,e)=>e>0&&void 0!==t),r=this.matchIndexes[n];return e.splice(0,n),Object.assign(e,r)}}class i{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(t){if(this.multiRegexes[t])return this.multiRegexes[t];const e=new r;return this.rules.slice(t).forEach(([t,n])=>e.addRule(t,n)),e.compile(),this.multiRegexes[t]=e,e}resumingScanAtSamePosition(){return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(t,e){this.rules.push([t,e]),"begin"===e.type&&this.count++}exec(t){const e=this.getMatcher(this.regexIndex);e.lastIndex=this.lastIndex;let n=e.exec(t);if(this.resumingScanAtSamePosition())if(n&&n.index===this.lastIndex);else{const e=this.getMatcher(0);e.lastIndex=this.lastIndex+1,n=e.exec(t)}return n&&(this.regexIndex+=n.position+1,this.regexIndex===this.count&&this.considerAll()),n}}function o(t){const e=new i;return t.contains.forEach(t=>e.addRule(t.begin,{rule:t,type:"begin"})),t.terminatorEnd&&e.addRule(t.terminatorEnd,{type:"end"}),t.illegal&&e.addRule(t.illegal,{type:"illegal"}),e}function s(e,r){const i=e;if(e.isCompiled)return i;[qs].forEach(t=>t(e,r)),t.compilerExtensions.forEach(t=>t(e,r)),e.__beforeBegin=null,[Js,Vs,Gs].forEach(t=>t(e,r)),e.isCompiled=!0;let a=null;if("object"===typeof e.keywords&&(a=e.keywords.$pattern,delete e.keywords.$pattern),e.keywords&&(e.keywords=Qs(e.keywords,t.case_insensitive)),e.lexemes&&a)throw new Error("ERR: Prefer `keywords.$pattern` to `mode.lexemes`, BOTH are not allowed. (see mode reference) ");return a=a||e.lexemes||/\w+/,i.keywordPatternRe=n(a,!0),r&&(e.begin||(e.begin=/\B|\b/),i.beginRe=n(e.begin),e.endSameAsBegin&&(e.end=e.begin),e.end||e.endsWithParent||(e.end=/\B|\b/),e.end&&(i.endRe=n(e.end)),i.terminatorEnd=us(e.end)||"",e.endsWithParent&&r.terminatorEnd&&(i.terminatorEnd+=(e.end?"|":"")+r.terminatorEnd)),e.illegal&&(i.illegalRe=n(e.illegal)),e.contains||(e.contains=[]),e.contains=[].concat(...e.contains.map((function(t){return ea("self"===t?e:t)}))),e.contains.forEach((function(t){s(t,i)})),e.starts&&s(e.starts,r),i.matcher=o(i),i}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=rs(t.classNameAliases||{}),s(t)}function ta(t){return!!t&&(t.endsWithParent||ta(t.starts))}function ea(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map((function(e){return rs(t,{variants:null},e)}))),t.cachedVariants?t.cachedVariants:ta(t)?rs(t,{starts:t.starts?rs(t.starts):null}):Object.isFrozen(t)?rs(t):t}var na="10.7.3";function ra(t){return Boolean(t||""===t)}function ia(t){const e={props:["language","code","autodetect"],data:function(){return{detectedLanguage:"",unknownLanguage:!1}},computed:{className(){return this.unknownLanguage?"":"hljs "+this.detectedLanguage},highlighted(){if(!this.autoDetect&&!t.getLanguage(this.language))return console.warn(`The language "${this.language}" you specified could not be found.`),this.unknownLanguage=!0,ns(this.code);let e={};return this.autoDetect?(e=t.highlightAuto(this.code),this.detectedLanguage=e.language):(e=t.highlight(this.language,this.code,this.ignoreIllegals),this.detectedLanguage=this.language),e.value},autoDetect(){return!this.language||ra(this.autodetect)},ignoreIllegals(){return!0}},render(t){return t("pre",{},[t("code",{class:this.className,domProps:{innerHTML:this.highlighted}})])}},n={install(t){t.component("highlightjs",e)}};return{Component:e,VuePlugin:n}}const oa={"after:highlightElement":({el:t,result:e,text:n})=>{const r=aa(t);if(!r.length)return;const i=document.createElement("div");i.innerHTML=e.value,e.value=ca(r,aa(i),n)}};function sa(t){return t.nodeName.toLowerCase()}function aa(t){const e=[];return function t(n,r){for(let i=n.firstChild;i;i=i.nextSibling)3===i.nodeType?r+=i.nodeValue.length:1===i.nodeType&&(e.push({event:"start",offset:r,node:i}),r=t(i,r),sa(i).match(/br|hr|img|input/)||e.push({event:"stop",offset:r,node:i}));return r}(t,0),e}function ca(t,e,n){let r=0,i="";const o=[];function s(){return t.length&&e.length?t[0].offset!==e[0].offset?t[0].offset<e[0].offset?t:e:"start"===e[0].event?t:e:t.length?t:e}function a(t){function e(t){return" "+t.nodeName+'="'+ns(t.value)+'"'}i+="<"+sa(t)+[].map.call(t.attributes,e).join("")+">"}function c(t){i+="</"+sa(t)+">"}function l(t){("start"===t.event?a:c)(t.node)}while(t.length||e.length){let e=s();if(i+=ns(n.substring(r,e[0].offset)),r=e[0].offset,e===t){o.reverse().forEach(c);do{l(e.splice(0,1)[0]),e=s()}while(e===t&&e.length&&e[0].offset===r);o.reverse().forEach(a)}else"start"===e[0].event?o.push(e[0].node):o.pop(),l(e.splice(0,1)[0])}return i+ns(n.substr(r))}const la={},ua=t=>{console.error(t)},ha=(t,...e)=>{console.log("WARN: "+t,...e)},da=(t,e)=>{la[`${t}/${e}`]||(console.log(`Deprecated as of ${t}. ${e}`),la[`${t}/${e}`]=!0)},pa=ns,fa=rs,ga=Symbol("nomatch"),ma=function(t){const e=Object.create(null),n=Object.create(null),r=[];let i=!0;const o=/(^(<[^>]+>|\t|)+|\n)/gm,s="Could not find the language '{}', did you forget to load/include a language module?",a={disableAutodetect:!0,name:"Plain text",contains:[]};let c={noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:null,__emitter:cs};function l(t){return c.noHighlightRe.test(t)}function u(t){let e=t.className+" ";e+=t.parentNode?t.parentNode.className:"";const n=c.languageDetectRe.exec(e);if(n){const e=O(n[1]);return e||(ha(s.replace("{}",n[1])),ha("Falling back to no-highlight mode for this block.",t)),e?n[1]:"no-highlight"}return e.split(/\s+/).find(t=>l(t)||O(t))}function h(t,e,n,r){let i="",o="";"object"===typeof e?(i=t,n=e.ignoreIllegals,o=e.language,r=void 0):(da("10.7.0","highlight(lang, code, ...args) has been deprecated."),da("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),o=t,i=e);const s={code:i,language:o};B("before:highlight",s);const a=s.result?s.result:d(s.language,s.code,n,r);return a.code=s.code,B("after:highlight",a),a}function d(t,n,o,a){function l(t,e){const n=C.case_insensitive?e[0].toLowerCase():e[0];return Object.prototype.hasOwnProperty.call(t.keywords,n)&&t.keywords[n]}function u(){if(!S.keywords)return void T.addText(_);let t=0;S.keywordPatternRe.lastIndex=0;let e=S.keywordPatternRe.exec(_),n="";while(e){n+=_.substring(t,e.index);const r=l(S,e);if(r){const[t,i]=r;if(T.addText(n),n="",M+=i,t.startsWith("_"))n+=e[0];else{const n=C.classNameAliases[t]||t;T.addKeyword(e[0],n)}}else n+=e[0];t=S.keywordPatternRe.lastIndex,e=S.keywordPatternRe.exec(_)}n+=_.substr(t),T.addText(n)}function h(){if(""===_)return;let t=null;if("string"===typeof S.subLanguage){if(!e[S.subLanguage])return void T.addText(_);t=d(S.subLanguage,_,!0,x[S.subLanguage]),x[S.subLanguage]=t.top}else t=f(_,S.subLanguage.length?S.subLanguage:null);S.relevance>0&&(M+=t.relevance),T.addSublanguage(t.emitter,t.language)}function p(){null!=S.subLanguage?h():u(),_=""}function g(t){return t.className&&T.openNode(C.classNameAliases[t.className]||t.className),S=Object.create(t,{parent:{value:S}}),S}function m(t,e,n){let r=fs(t.endRe,n);if(r){if(t["on:end"]){const n=new es(t);t["on:end"](e,n),n.isMatchIgnored&&(r=!1)}if(r){while(t.endsParent&&t.parent)t=t.parent;return t}}if(t.endsWithParent)return m(t.parent,e,n)}function v(t){return 0===S.matcher.regexIndex?(_+=t[0],1):(I=!0,0)}function y(t){const e=t[0],n=t.rule,r=new es(n),i=[n.__beforeBegin,n["on:begin"]];for(const o of i)if(o&&(o(t,r),r.isMatchIgnored))return v(e);return n&&n.endSameAsBegin&&(n.endRe=ls(e)),n.skip?_+=e:(n.excludeBegin&&(_+=e),p(),n.returnBegin||n.excludeBegin||(_=e)),g(n),n.returnBegin?0:e.length}function b(t){const e=t[0],r=n.substr(t.index),i=m(S,t,r);if(!i)return ga;const o=S;o.skip?_+=e:(o.returnEnd||o.excludeEnd||(_+=e),p(),o.excludeEnd&&(_=e));do{S.className&&T.closeNode(),S.skip||S.subLanguage||(M+=S.relevance),S=S.parent}while(S!==i.parent);return i.starts&&(i.endSameAsBegin&&(i.starts.endRe=i.endRe),g(i.starts)),o.returnEnd?0:e.length}function w(){const t=[];for(let e=S;e!==C;e=e.parent)e.className&&t.unshift(e.className);t.forEach(t=>T.openNode(t))}let A={};function D(e,r){const s=r&&r[0];if(_+=e,null==s)return p(),0;if("begin"===A.type&&"end"===r.type&&A.index===r.index&&""===s){if(_+=n.slice(r.index,r.index+1),!i){const e=new Error("0 width match regex");throw e.languageName=t,e.badRule=A.rule,e}return 1}if(A=r,"begin"===r.type)return y(r);if("illegal"===r.type&&!o){const t=new Error('Illegal lexeme "'+s+'" for mode "'+(S.className||"<unnamed>")+'"');throw t.mode=S,t}if("end"===r.type){const t=b(r);if(t!==ga)return t}if("illegal"===r.type&&""===s)return 1;if(F>1e5&&F>3*r.index){const t=new Error("potential infinite loop, way more iterations than matches");throw t}return _+=s,s.length}const C=O(t);if(!C)throw ua(s.replace("{}",t)),new Error('Unknown language: "'+t+'"');const k=Zs(C,{plugins:r});let E="",S=a||k;const x={},T=new c.__emitter(c);w();let _="",M=0,N=0,F=0,I=!1;try{for(S.matcher.considerAll();;){F++,I?I=!1:S.matcher.considerAll(),S.matcher.lastIndex=N;const t=S.matcher.exec(n);if(!t)break;const e=n.substring(N,t.index),r=D(e,t);N=t.index+r}return D(n.substr(N)),T.closeAllNodes(),T.finalize(),E=T.toHTML(),{relevance:Math.floor(M),value:E,language:t,illegal:!1,emitter:T,top:S}}catch(R){if(R.message&&R.message.includes("Illegal"))return{illegal:!0,illegalBy:{msg:R.message,context:n.slice(N-100,N+100),mode:R.mode},sofar:E,relevance:0,value:pa(n),emitter:T};if(i)return{illegal:!1,relevance:0,value:pa(n),emitter:T,language:t,top:S,errorRaised:R};throw R}}function p(t){const e={relevance:0,emitter:new c.__emitter(c),value:pa(t),illegal:!1,top:a};return e.emitter.addText(t),e}function f(t,n){n=n||c.languages||Object.keys(e);const r=p(t),i=n.filter(O).filter(F).map(e=>d(e,t,!1));i.unshift(r);const o=i.sort((t,e)=>{if(t.relevance!==e.relevance)return e.relevance-t.relevance;if(t.language&&e.language){if(O(t.language).supersetOf===e.language)return 1;if(O(e.language).supersetOf===t.language)return-1}return 0}),[s,a]=o,l=s;return l.second_best=a,l}function g(t){return c.tabReplace||c.useBR?t.replace(o,t=>"\n"===t?c.useBR?"<br>":t:c.tabReplace?t.replace(/\t/g,c.tabReplace):t):t}function m(t,e,r){const i=e?n[e]:r;t.classList.add("hljs"),i&&t.classList.add(i)}const v={"before:highlightElement":({el:t})=>{c.useBR&&(t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/<br[ /]*>/g,"\n"))},"after:highlightElement":({result:t})=>{c.useBR&&(t.value=t.value.replace(/\n/g,"<br>"))}},y=/^(<[^>]+>|\t)+/gm,b={"after:highlightElement":({result:t})=>{c.tabReplace&&(t.value=t.value.replace(y,t=>t.replace(/\t/g,c.tabReplace)))}};function w(t){let e=null;const n=u(t);if(l(n))return;B("before:highlightElement",{el:t,language:n}),e=t;const r=e.textContent,i=n?h(r,{language:n,ignoreIllegals:!0}):f(r);B("after:highlightElement",{el:t,result:i,text:r}),t.innerHTML=i.value,m(t,n,i.language),t.result={language:i.language,re:i.relevance,relavance:i.relevance},i.second_best&&(t.second_best={language:i.second_best.language,re:i.second_best.relevance,relavance:i.second_best.relevance})}function A(t){t.useBR&&(da("10.3.0","'useBR' will be removed entirely in v11.0"),da("10.3.0","Please see https://github.com/highlightjs/highlight.js/issues/2559")),c=fa(c,t)}const D=()=>{if(D.called)return;D.called=!0,da("10.6.0","initHighlighting() is deprecated.  Use highlightAll() instead.");const t=document.querySelectorAll("pre code");t.forEach(w)};function C(){da("10.6.0","initHighlightingOnLoad() is deprecated.  Use highlightAll() instead."),k=!0}let k=!1;function E(){if("loading"===document.readyState)return void(k=!0);const t=document.querySelectorAll("pre code");t.forEach(w)}function S(){k&&E()}function x(n,r){let o=null;try{o=r(t)}catch(s){if(ua("Language definition for '{}' could not be registered.".replace("{}",n)),!i)throw s;ua(s),o=a}o.name||(o.name=n),e[n]=o,o.rawDefinition=r.bind(null,t),o.aliases&&N(o.aliases,{languageName:n})}function T(t){delete e[t];for(const e of Object.keys(n))n[e]===t&&delete n[e]}function _(){return Object.keys(e)}function M(t){da("10.4.0","requireLanguage will be removed entirely in v11."),da("10.4.0","Please see https://github.com/highlightjs/highlight.js/pull/2844");const e=O(t);if(e)return e;const n=new Error("The '{}' language is required, but not loaded.".replace("{}",t));throw n}function O(t){return t=(t||"").toLowerCase(),e[t]||e[n[t]]}function N(t,{languageName:e}){"string"===typeof t&&(t=[t]),t.forEach(t=>{n[t.toLowerCase()]=e})}function F(t){const e=O(t);return e&&!e.disableAutodetect}function I(t){t["before:highlightBlock"]&&!t["before:highlightElement"]&&(t["before:highlightElement"]=e=>{t["before:highlightBlock"](Object.assign({block:e.el},e))}),t["after:highlightBlock"]&&!t["after:highlightElement"]&&(t["after:highlightElement"]=e=>{t["after:highlightBlock"](Object.assign({block:e.el},e))})}function R(t){I(t),r.push(t)}function B(t,e){const n=t;r.forEach((function(t){t[n]&&t[n](e)}))}function L(t){return da("10.2.0","fixMarkup will be removed entirely in v11.0"),da("10.2.0","Please see https://github.com/highlightjs/highlight.js/issues/2534"),g(t)}function j(t){return da("10.7.0","highlightBlock will be removed entirely in v12.0"),da("10.7.0","Please use highlightElement now."),w(t)}"undefined"!==typeof window&&window.addEventListener&&window.addEventListener("DOMContentLoaded",S,!1),Object.assign(t,{highlight:h,highlightAuto:f,highlightAll:E,fixMarkup:L,highlightElement:w,highlightBlock:j,configure:A,initHighlighting:D,initHighlightingOnLoad:C,registerLanguage:x,unregisterLanguage:T,listLanguages:_,getLanguage:O,registerAliases:N,requireLanguage:M,autoDetection:F,inherit:fa,addPlugin:R,vuePlugin:ia(t).VuePlugin}),t.debugMode=function(){i=!1},t.safeMode=function(){i=!0},t.versionString=na;for(const P in Hs)"object"===typeof Hs[P]&&Zo(Hs[P]);return Object.assign(t,Hs),t.addPlugin(v),t.addPlugin(oa),t.addPlugin(b),t};var va=ma({}),ya=va,ba={exports:{}};(function(t){(function(){var e;function n(){console.log(i.apply(null,arguments))}function r(t,e){return i.apply(null,[t].concat(e))}function i(t){for(var e,n,r,i,o=1,s=[].slice.call(arguments),a=0,c=t.length,l="",u=!1,h=!1,d=function(){return s[o++]},p=function(){var n="";while(/\d/.test(t[a]))n+=t[a++],e=t[a];return n.length>0?parseInt(n):null};a<c;++a)if(e=t[a],u)switch(u=!1,"."==e?(h=!1,e=t[++a]):"0"==e&&"."==t[a+1]?(h=!0,a+=2,e=t[a]):h=!0,i=p(),e){case"b":l+=parseInt(d(),10).toString(2);break;case"c":n=d(),l+="string"===typeof n||n instanceof String?n:String.fromCharCode(parseInt(n,10));break;case"d":l+=parseInt(d(),10);break;case"f":r=String(parseFloat(d()).toFixed(i||6)),l+=h?r:r.replace(/^0/,"");break;case"j":l+=JSON.stringify(d());break;case"o":l+="0"+parseInt(d(),10).toString(8);break;case"s":l+=d();break;case"x":l+="0x"+parseInt(d(),10).toString(16);break;case"X":l+="0x"+parseInt(d(),10).toString(16).toUpperCase();break;default:l+=e;break}else"%"===e?u=!0:l+=e;return l}e=t.exports=i,e.format=i,e.vsprintf=r,"undefined"!==typeof console&&"function"===typeof console.log&&(e.printf=n)})()})(ba);var wa=ba.exports,Aa=Ca(Error),Da=Aa;function Ca(t){return e.displayName=t.displayName||t.name,e;function e(e){return e&&(e=wa.apply(null,arguments)),new t(e)}}Aa.eval=Ca(EvalError),Aa.range=Ca(RangeError),Aa.reference=Ca(ReferenceError),Aa.syntax=Ca(SyntaxError),Aa.type=Ca(TypeError),Aa.uri=Ca(URIError),Aa.create=Ca;var ka=ya,Ea=Da;Yo.highlight=xa,Yo.highlightAuto=Ta,Yo.registerLanguage=_a,Yo.listLanguages=Ma,Yo.registerAlias=Oa,Na.prototype.addText=Ra,Na.prototype.addKeyword=Fa,Na.prototype.addSublanguage=Ia,Na.prototype.openNode=Ba,Na.prototype.closeNode=La,Na.prototype.closeAllNodes=Pa,Na.prototype.finalize=Pa,Na.prototype.toHTML=ja;var Sa="hljs-";function xa(t,e,n){var r,i=ka.configure({}),o=n||{},s=o.prefix;if("string"!==typeof t)throw Ea("Expected `string` for name, got `%s`",t);if(!ka.getLanguage(t))throw Ea("Unknown language: `%s` is not registered",t);if("string"!==typeof e)throw Ea("Expected `string` for value, got `%s`",e);if(null!==s&&void 0!==s||(s=Sa),ka.configure({__emitter:Na,classPrefix:s}),r=ka.highlight(e,{language:t,ignoreIllegals:!0}),ka.configure(i||{}),r.errorRaised)throw r.errorRaised;return{relevance:r.relevance,language:r.language,value:r.emitter.rootNode.children}}function Ta(t,e){var n=e||{},r=n.subset||ka.listLanguages();n.prefix;var i,o,s,a,c=r.length,l=-1;if("string"!==typeof t)throw Ea("Expected `string` for value, got `%s`",t);o={relevance:0,language:null,value:[]},i={relevance:0,language:null,value:[]};while(++l<c)a=r[l],ka.getLanguage(a)&&(s=xa(a,t,e),s.language=a,s.relevance>o.relevance&&(o=s),s.relevance>i.relevance&&(o=i,i=s));return o.language&&(i.secondBest=o),i}function _a(t,e){ka.registerLanguage(t,e)}function Ma(){return ka.listLanguages()}function Oa(t,e){var n,r=t;for(n in e&&(r={},r[t]=e),r)ka.registerAliases(r[n],{languageName:n})}function Na(t){this.options=t,this.rootNode={children:[]},this.stack=[this.rootNode]}function Fa(t,e){this.openNode(e),this.addText(t),this.closeNode()}function Ia(t,e){var n=this.stack,r=n[n.length-1],i=t.rootNode.children,o=e?{type:"element",tagName:"span",properties:{className:[e]},children:i}:i;r.children=r.children.concat(o)}function Ra(t){var e,n,r=this.stack;""!==t&&(e=r[r.length-1],n=e.children[e.children.length-1],n&&"text"===n.type?n.value+=t:e.children.push({type:"text",value:t}))}function Ba(t){var e=this.stack,n=this.options.classPrefix+t,r=e[e.length-1],i={type:"element",tagName:"span",properties:{className:[n]},children:[]};r.children.push(i),e.push(i)}function La(){this.stack.pop()}function ja(){return""}function Pa(){}function za(t,e=[]){return t.map(t=>{const n=[...e,...t.properties?t.properties.className:[]];return t.children?za(t.children,n):{text:t.value,classes:n}}).flat()}function Ua(t){return t.value||t.children||[]}function Ha({doc:t,name:e,lowlight:n,defaultLanguage:r}){const i=[];return Object(D["i"])(t,t=>t.type.name===e).forEach(t=>{let e=t.pos+1;const o=t.node.attrs.language||r,s=n.listLanguages(),a=o&&s.includes(o)?Ua(n.highlight(o,t.node.textContent)):Ua(n.highlightAuto(t.node.textContent));za(a).forEach(t=>{const n=e+t.text.length;if(t.classes.length){const r=Ee["a"].inline(e,n,{class:t.classes.join(" ")});i.push(r)}e=n})}),Ee["b"].create(t,i)}function $a({name:t,lowlight:e,defaultLanguage:n}){return new Qt["d"]({key:new Qt["e"]("lowlight"),state:{init:(r,{doc:i})=>Ha({doc:i,name:t,lowlight:e,defaultLanguage:n}),apply:(r,i,o,s)=>{const a=o.selection.$head.parent.type.name,c=s.selection.$head.parent.type.name,l=Object(D["i"])(o.doc,e=>e.type.name===t),u=Object(D["i"])(s.doc,e=>e.type.name===t);return r.docChanged&&([a,c].includes(t)||u.length!==l.length||r.steps.some(t=>void 0!==t.from&&void 0!==t.to&&l.some(e=>e.pos>=t.from&&e.pos+e.node.nodeSize<=t.to)))?Ha({doc:r.doc,name:t,lowlight:e,defaultLanguage:n}):i.map(r.mapping,r.doc)}},props:{decorations(t){return this.getState(t)}}})}const Ja=ve["a"].extend({addOptions(){var t;return{...null===(t=this.parent)||void 0===t?void 0:t.call(this),lowlight:Yo,defaultLanguage:null}},addProseMirrorPlugins(){var t;return[...(null===(t=this.parent)||void 0===t?void 0:t.call(this))||[],$a({name:this.name,lowlight:this.options.lowlight,defaultLanguage:this.options.defaultLanguage})]}}),Va=D["b"].create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Qt["d"]({props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(n)return t.descendants((t,e)=>{const n=r>=e&&r<=e+t.nodeSize,o=!t.isLeaf&&!t.childCount;if((n||!this.options.showOnlyCurrent)&&o){const n=[this.options.emptyNodeClass];this.editor.isEmpty&&n.push(this.options.emptyEditorClass);const r=Ee["a"].node(e,e+t.nodeSize,{class:n.join(" "),"data-placeholder":"function"===typeof this.options.placeholder?this.options.placeholder({editor:this.editor,node:t,pos:e}):this.options.placeholder});i.push(r)}return this.options.includeChildren}),Ee["b"].create(t,i)}}})]}}),qa=D["c"].create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>!!t.includes("underline")&&{}}]},renderHTML({HTMLAttributes:t}){return["u",Object(D["u"])(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline()}}}),Ga=/^\s*(\[([ |x])\])\s$/,Wa=D["d"].create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{}}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>"true"===t.getAttribute("data-checked"),renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Object(D["u"])(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),o=document.createElement("label"),s=document.createElement("span"),a=document.createElement("input"),c=document.createElement("div");return o.contentEditable="false",a.type="checkbox",a.addEventListener("change",t=>{if(!r.isEditable)return void(a.checked=!a.checked);const{checked:e}=t.target;r.isEditable&&"function"===typeof n&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:t})=>{const r=n(),i=t.doc.nodeAt(r);return t.setNodeMarkup(r,void 0,{...null===i||void 0===i?void 0:i.attrs,checked:e}),!0}).run()}),Object.entries(this.options.HTMLAttributes).forEach(([t,e])=>{i.setAttribute(t,e)}),i.dataset.checked=t.attrs.checked,t.attrs.checked&&a.setAttribute("checked","checked"),o.append(a,s),i.append(o,c),Object.entries(e).forEach(([t,e])=>{i.setAttribute(t,e)}),{dom:i,contentDOM:c,update:t=>t.type===this.type&&(i.dataset.checked=t.attrs.checked,t.attrs.checked?a.setAttribute("checked","checked"):a.removeAttribute("checked"),!0)}}},addInputRules(){return[Object(D["z"])({find:Ga,type:this.type,getAttributes:t=>({checked:"x"===t[t.length-1]})})]}}),Ka=D["b"].create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>t.style.textAlign||this.options.defaultAlignment,renderHTML:t=>t.textAlign===this.options.defaultAlignment?{}:{style:"text-align: "+t.textAlign}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>!!this.options.alignments.includes(t)&&this.options.types.every(n=>e.updateAttributes(n,{textAlign:t})),unsetTextAlign:()=>({commands:t})=>this.options.types.every(e=>t.resetAttributes(e,"textAlign"))}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}});function Qa(t){const{char:e,allowSpaces:n,prefixSpace:r,startOfLine:i,$position:o}=t,s=Object(D["h"])(e),a=new RegExp(`\\s${s}$`),c=i?"^":"",l=n?new RegExp(`${c}${s}.*?(?=\\s${s}|$)`,"gm"):new RegExp(`${c}(?:^)?${s}[^\\s${s}]*`,"gm"),u=o.depth<=0,h=u?0:o.before(),d=o.pos,p=o.doc.textBetween(h,d,"\0","\0"),f=Array.from(p.matchAll(l)).pop();if(!f||void 0===f.input||void 0===f.index)return null;const g=f.input.slice(Math.max(0,f.index-1),f.index),m=/^[\s\0]?$/.test(g);if(r&&!m)return null;const v=f.index+o.start();let y=v+f[0].length;return n&&a.test(p.slice(y-1,y+1))&&(f[0]+=" ",y+=1),v<o.pos&&y>=o.pos?{range:{from:v,to:y},query:f[0].slice(e.length),text:f[0]}:null}const Ya=new Qt["e"]("suggestion");function Xa({pluginKey:t=Ya,editor:e,char:n="@",allowSpaces:r=!1,prefixSpace:i=!0,startOfLine:o=!1,decorationTag:s="span",decorationClass:a="suggestion",command:c=(()=>null),items:l=(()=>[]),render:u=(()=>({})),allow:h=(()=>!0)}){let d;const p=null===u||void 0===u?void 0:u();return new Qt["d"]({key:t,view(){return{update:async(t,n)=>{var r,i,o,s,a;const u=null===(r=this.key)||void 0===r?void 0:r.getState(n),h=null===(i=this.key)||void 0===i?void 0:i.getState(t.state),f=u.active&&h.active&&u.range.from!==h.range.from,g=!u.active&&h.active,m=u.active&&!h.active,v=!g&&!m&&u.query!==h.query,y=g||f,b=v&&!f,w=m||f;if(!y&&!b&&!w)return;const A=w&&!y?u:h,D=document.querySelector(`[data-decoration-id="${A.decorationId}"]`);d={editor:e,range:A.range,query:A.query,text:A.text,items:b||y?await l({editor:e,query:A.query}):[],command:t=>{c({editor:e,range:A.range,props:t})},decorationNode:D,clientRect:D?()=>{var t;const{decorationId:n}=null===(t=this.key)||void 0===t?void 0:t.getState(e.state),r=document.querySelector(`[data-decoration-id="${n}"]`);return r.getBoundingClientRect()}:null},w&&(null===(o=null===p||void 0===p?void 0:p.onExit)||void 0===o||o.call(p,d)),b&&(null===(s=null===p||void 0===p?void 0:p.onUpdate)||void 0===s||s.call(p,d)),y&&(null===(a=null===p||void 0===p?void 0:p.onStart)||void 0===a||a.call(p,d))},destroy:()=>{var t;d&&(null===(t=null===p||void 0===p?void 0:p.onExit)||void 0===t||t.call(p,d))}}},state:{init(){return{active:!1,range:{},query:null,text:null,composing:!1}},apply(t,s,a,c){const{composing:l}=e.view,{selection:u}=t,{empty:d,from:p}=u,f={...s};if(f.composing=l,d||e.view.composing){!(p<s.range.from||p>s.range.to)||l||s.composing||(f.active=!1);const t=Qa({char:n,allowSpaces:r,prefixSpace:i,startOfLine:o,$position:u.$from}),a="id_"+Math.floor(4294967295*Math.random());t&&h({editor:e,state:c,range:t.range})?(f.active=!0,f.decorationId=s.decorationId?s.decorationId:a,f.range=t.range,f.query=t.query,f.text=t.text):f.active=!1}else f.active=!1;return f.active||(f.decorationId=null,f.range={},f.query=null,f.text=null),f}},props:{handleKeyDown(t,e){var n;const{active:r,range:i}=this.getState(t.state);return r&&(null===(n=null===p||void 0===p?void 0:p.onKeyDown)||void 0===n?void 0:n.call(p,{view:t,event:e,range:i}))||!1},decorations(t){const{active:e,range:n,decorationId:r}=this.getState(t);return e?Ee["b"].create(t.doc,[Ee["a"].inline(n.from,n.to,{nodeName:s,class:a,"data-decoration-id":r})]):null}}})}const Za=new Qt["e"]("mention"),tc=D["d"].create({name:"mention",addOptions(){return{HTMLAttributes:{},renderLabel({options:t,node:e}){var n;return`${t.suggestion.char}${null!==(n=e.attrs.label)&&void 0!==n?n:e.attrs.id}`},suggestion:{char:"@",pluginKey:Za,command:({editor:t,range:e,props:n})=>{var r;const i=t.view.state.selection.$to.nodeAfter,o=null===(r=null===i||void 0===i?void 0:i.text)||void 0===r?void 0:r.startsWith(" ");o&&(e.to+=1),t.chain().focus().insertContentAt(e,[{type:this.name,attrs:n},{type:"text",text:" "}]).run()},allow:({state:t,range:e})=>{const n=t.doc.resolve(e.from),r=t.schema.nodes[this.name],i=!!n.parent.type.contentMatch.matchType(r);return i}}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{id:{default:null,parseHTML:t=>t.getAttribute("data-id"),renderHTML:t=>t.id?{"data-id":t.id}:{}},label:{default:null,parseHTML:t=>t.getAttribute("data-label"),renderHTML:t=>t.label?{"data-label":t.label}:{}}}},parseHTML(){return[{tag:`span[data-type="${this.name}"]`}]},renderHTML({node:t,HTMLAttributes:e}){return["span",Object(D["u"])({"data-type":this.name},this.options.HTMLAttributes,e),this.options.renderLabel({options:this.options,node:t})]},renderText({node:t}){return this.options.renderLabel({options:this.options,node:t})},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(({tr:t,state:e})=>{let n=!1;const{selection:r}=e,{empty:i,anchor:o}=r;return!!i&&(e.doc.nodesBetween(o-1,o,(e,r)=>{if(e.type.name===this.name)return n=!0,t.insertText(this.options.suggestion.char||"",r,r+e.nodeSize),!1}),n)})}},addProseMirrorPlugins(){return[Xa({editor:this.editor,...this.options.suggestion})]}}),ec=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))$/,nc=/(?:^|\s)((?:==)((?:[^~=]+))(?:==))/g,rc=D["c"].create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:"background-color: "+t.color}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",Object(D["u"])(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Object(D["s"])({find:ec,type:this.type})]},addPasteRules(){return[Object(D["t"])({find:nc,type:this.type})]}}),ic=Object(D["x"])({find:/--$/,replace:"—"}),oc=Object(D["x"])({find:/\.\.\.$/,replace:"…"}),sc=Object(D["x"])({find:/(?:^|[\s{[(<'"\u2018\u201C])(")$/,replace:"“"}),ac=Object(D["x"])({find:/"$/,replace:"”"}),cc=Object(D["x"])({find:/(?:^|[\s{[(<'"\u2018\u201C])(')$/,replace:"‘"}),lc=Object(D["x"])({find:/'$/,replace:"’"}),uc=Object(D["x"])({find:/<-$/,replace:"←"}),hc=Object(D["x"])({find:/->$/,replace:"→"}),dc=Object(D["x"])({find:/\(c\)$/,replace:"©"}),pc=Object(D["x"])({find:/\(tm\)$/,replace:"™"}),fc=Object(D["x"])({find:/\(r\)$/,replace:"®"}),gc=Object(D["x"])({find:/1\/2$/,replace:"½"}),mc=Object(D["x"])({find:/\+\/-$/,replace:"±"}),vc=Object(D["x"])({find:/!=$/,replace:"≠"}),yc=Object(D["x"])({find:/<<$/,replace:"«"}),bc=Object(D["x"])({find:/>>$/,replace:"»"}),wc=Object(D["x"])({find:/\d+\s?([*x])\s?\d+$/,replace:"×"}),Ac=Object(D["x"])({find:/\^2$/,replace:"²"}),Dc=Object(D["x"])({find:/\^3$/,replace:"³"}),Cc=Object(D["x"])({find:/1\/4$/,replace:"¼"}),kc=Object(D["x"])({find:/3\/4$/,replace:"¾"}),Ec=D["b"].create({name:"typography",addInputRules(){return[ic,oc,sc,ac,cc,lc,uc,hc,dc,pc,fc,gc,mc,vc,yc,bc,wc,Ac,Dc,Cc,kc]}}),Sc=D["d"].create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return this.options.itemTypeName+"+"},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Object(D["u"])(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}}),xc=D["c"].create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:t=>{const e=t.hasAttribute("style");return!!e&&{}}}]},renderHTML({HTMLAttributes:t}){return["span",Object(D["u"])(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:t,commands:e})=>{const n=Object(D["o"])(t,this.type),r=Object.entries(n).some(([,t])=>!!t);return!!r||e.unsetMark(this.name)}}}}),Tc=D["c"].create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(t){if("super"!==t)return!1}}]},renderHTML({HTMLAttributes:t}){return["sup",Object(D["u"])(this.options.HTMLAttributes,t),0]},addCommands(){return{setSuperscript:()=>({commands:t})=>t.setMark(this.name),toggleSuperscript:()=>({commands:t})=>t.toggleMark(this.name),unsetSuperscript:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}}),_c=D["c"].create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(t){if("sub"!==t)return!1}}]},renderHTML({HTMLAttributes:t}){return["sub",Object(D["u"])(this.options.HTMLAttributes,t),0]},addCommands(){return{setSubscript:()=>({commands:t})=>t.setMark(this.name),toggleSubscript:()=>({commands:t})=>t.toggleMark(this.name),unsetSubscript:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}}),Mc=D["b"].create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily.replace(/['"]+/g,""),renderHTML:t=>t.fontFamily?{style:"font-family: "+t.fontFamily}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}});function Oc(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var i=t.child(r),o=e.child(r);if(i!=o){if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(var s=0;i.text[s]==o.text[s];s++)n++;return n}if(i.content.size||o.content.size){var a=Oc(i.content,o.content,n+1);if(null!=a)return a}n+=i.nodeSize}else n+=i.nodeSize}}function Nc(t,e,n,r){for(var i=t.childCount,o=e.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};var s=t.child(--i),a=e.child(--o),c=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){var l=0,u=Math.min(s.text.length,a.text.length);while(l<u&&s.text[s.text.length-l-1]==a.text[a.text.length-l-1])l++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var h=Nc(s.content,a.content,n-1,r-1);if(h)return h}n-=c,r-=c}else n-=c,r-=c}}var Fc=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},Ic={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};Fc.prototype.nodesBetween=function(t,e,n,r,i){void 0===r&&(r=0);for(var o=0,s=0;s<e;o++){var a=this.content[o],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,i,o)&&a.content.size){var l=s+1;a.nodesBetween(Math.max(0,t-l),Math.min(a.content.size,e-l),n,r+l)}s=c}},Fc.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},Fc.prototype.textBetween=function(t,e,n,r){var i="",o=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(i+=s.text.slice(Math.max(t,a)-a,e-a),o=!n):s.isLeaf&&r?(i+="function"===typeof r?r(s):r,o=!n):!o&&s.isBlock&&(i+=n,o=!0)}),0),i},Fc.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),i=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),i=1);i<t.content.length;i++)r.push(t.content[i]);return new Fc(r,this.size+t.size)},Fc.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var i=0,o=0;o<e;i++){var s=this.content[i],a=o+s.nodeSize;a>t&&((o<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-o),Math.min(s.text.length,e-o)):s.cut(Math.max(0,t-o-1),Math.min(s.content.size,e-o-1))),n.push(s),r+=s.nodeSize),o=a}return new Fc(n,r)},Fc.prototype.cutByIndex=function(t,e){return t==e?Fc.empty:0==t&&e==this.content.length?this:new Fc(this.content.slice(t,e))},Fc.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),i=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new Fc(r,i)},Fc.prototype.addToStart=function(t){return new Fc([t].concat(this.content),this.size+t.nodeSize)},Fc.prototype.addToEnd=function(t){return new Fc(this.content.concat(t),this.size+t.nodeSize)},Fc.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},Ic.firstChild.get=function(){return this.content.length?this.content[0]:null},Ic.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},Ic.childCount.get=function(){return this.content.length},Fc.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},Fc.prototype.maybeChild=function(t){return this.content[t]},Fc.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},Fc.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),Oc(this,t,e)},Fc.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),Nc(this,t,e,n)},Fc.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return Bc(0,t);if(t==this.size)return Bc(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var i=this.child(n),o=r+i.nodeSize;if(o>=t)return o==t||e>0?Bc(n+1,o):Bc(n,r);r=o}},Fc.prototype.toString=function(){return"<"+this.toStringInner()+">"},Fc.prototype.toStringInner=function(){return this.content.join(", ")},Fc.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},Fc.fromJSON=function(t,e){if(!e)return Fc.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fc(e.map(t.nodeFromJSON))},Fc.fromArray=function(t){if(!t.length)return Fc.empty;for(var e,n=0,r=0;r<t.length;r++){var i=t[r];n+=i.nodeSize,r&&i.isText&&t[r-1].sameMarkup(i)?(e||(e=t.slice(0,r)),e[e.length-1]=i.withText(e[e.length-1].text+i.text)):e&&e.push(i)}return new Fc(e||t,n)},Fc.from=function(t){if(!t)return Fc.empty;if(t instanceof Fc)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new Fc([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(Fc.prototype,Ic);var Rc={index:0,offset:0};function Bc(t,e){return Rc.index=t,Rc.offset=e,Rc}function Lc(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!Lc(t[r],e[r]))return!1}else{for(var i in t)if(!(i in e)||!Lc(t[i],e[i]))return!1;for(var o in e)if(!(o in t))return!1}return!0}Fc.empty=new Fc([],0);var jc=function(t,e){this.type=t,this.attrs=e};function Pc(t){var e=Error.call(this,t);return e.__proto__=Pc.prototype,e}jc.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var i=t[r];if(this.eq(i))return t;if(this.type.excludes(i.type))e||(e=t.slice(0,r));else{if(i.type.excludes(this.type))return t;!n&&i.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(i)}}return e||(e=t.slice()),n||e.push(this),e},jc.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},jc.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},jc.prototype.eq=function(t){return this==t||this.type==t.type&&Lc(this.attrs,t.attrs)},jc.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},jc.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},jc.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},jc.setFrom=function(t){if(!t||0==t.length)return jc.none;if(t instanceof jc)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},jc.none=[],Pc.prototype=Object.create(Error.prototype),Pc.prototype.constructor=Pc,Pc.prototype.name="ReplaceError";var zc=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},Uc={size:{configurable:!0}};function Hc(t,e,n){var r=t.findIndex(e),i=r.index,o=r.offset,s=t.maybeChild(i),a=t.findIndex(n),c=a.index,l=a.offset;if(o==e||s.isText){if(l!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(Hc(s.content,e-o-1,n-o-1)))}function $c(t,e,n,r){var i=t.findIndex(e),o=i.index,s=i.offset,a=t.maybeChild(o);if(s==e||a.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=$c(a.content,e-s-1,n);return c&&t.replaceChild(o,a.copy(c))}function Jc(t,e,n){if(n.openStart>t.depth)throw new Pc("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Pc("Inconsistent open depths");return Vc(t,e,n,0)}function Vc(t,e,n,r){var i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){var s=Vc(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=Zc(n,t),c=a.start,l=a.end;return Qc(o,Yc(t,c,l,e,r))}var u=t.parent,h=u.content;return Qc(u,h.cut(0,t.parentOffset).append(n.content).append(h.cut(e.parentOffset)))}return Qc(o,Xc(t,e,r))}function qc(t,e){if(!e.type.compatibleContent(t.type))throw new Pc("Cannot join "+e.type.name+" onto "+t.type.name)}function Gc(t,e,n){var r=t.node(n);return qc(r,e.node(n)),r}function Wc(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Kc(t,e,n,r){var i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(Wc(t.nodeAfter,r),o++));for(var a=o;a<s;a++)Wc(i.child(a),r);e&&e.depth==n&&e.textOffset&&Wc(e.nodeBefore,r)}function Qc(t,e){if(!t.type.validContent(e))throw new Pc("Invalid content for node "+t.type.name);return t.copy(e)}function Yc(t,e,n,r,i){var o=t.depth>i&&Gc(t,e,i+1),s=r.depth>i&&Gc(n,r,i+1),a=[];return Kc(null,t,i,a),o&&s&&e.index(i)==n.index(i)?(qc(o,s),Wc(Qc(o,Yc(t,e,n,r,i+1)),a)):(o&&Wc(Qc(o,Xc(t,e,i+1)),a),Kc(e,n,i,a),s&&Wc(Qc(s,Xc(n,r,i+1)),a)),Kc(r,null,i,a),new Fc(a)}function Xc(t,e,n){var r=[];if(Kc(null,t,n,r),t.depth>n){var i=Gc(t,e,n+1);Wc(Qc(i,Xc(t,e,n+1)),r)}return Kc(e,null,n,r),new Fc(r)}function Zc(t,e){for(var n=e.depth-t.openStart,r=e.node(n),i=r.copy(t.content),o=n-1;o>=0;o--)i=e.node(o).copy(Fc.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}Uc.size.get=function(){return this.content.size-this.openStart-this.openEnd},zc.prototype.insertAt=function(t,e){var n=$c(this.content,t+this.openStart,e,null);return n&&new zc(n,this.openStart,this.openEnd)},zc.prototype.removeBetween=function(t,e){return new zc(Hc(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},zc.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},zc.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},zc.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},zc.fromJSON=function(t,e){if(!e)return zc.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new zc(Fc.fromJSON(t,e.content),n,r)},zc.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,i=t.firstChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.firstChild)n++;for(var o=t.lastChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.lastChild)r++;return new zc(t,n,r)},Object.defineProperties(zc.prototype,Uc),zc.empty=new zc(Fc.empty,0,0);var tl=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},el={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};tl.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},el.parent.get=function(){return this.node(this.depth)},el.doc.get=function(){return this.node(0)},tl.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},tl.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},tl.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},tl.prototype.start=function(t){return t=this.resolveDepth(t),0==t?0:this.path[3*t-1]+1},tl.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},tl.prototype.before=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},tl.prototype.after=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},el.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},el.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},el.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},tl.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,i=0;i<t;i++)r+=n.child(i).nodeSize;return r},tl.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return jc.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var i=n;n=r,r=i}for(var o=n.marks,s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||r&&o[s].isInSet(r.marks)||(o=o[s--].removeFromSet(o));return o},tl.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n},tl.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},tl.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new ol(this,t,n)},tl.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},tl.prototype.max=function(t){return t.pos>this.pos?t:this},tl.prototype.min=function(t){return t.pos<this.pos?t:this},tl.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},tl.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,i=e,o=t;;){var s=o.content.findIndex(i),a=s.index,c=s.offset,l=i-c;if(n.push(o,a,r+c),!l)break;if(o=o.child(a),o.isText)break;i=l-1,r+=c+1}return new tl(e,n,i)},tl.resolveCached=function(t,e){for(var n=0;n<nl.length;n++){var r=nl[n];if(r.pos==e&&r.doc==t)return r}var i=nl[rl]=tl.resolve(t,e);return rl=(rl+1)%il,i},Object.defineProperties(tl.prototype,el);var nl=[],rl=0,il=12,ol=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},sl={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};sl.start.get=function(){return this.$from.before(this.depth+1)},sl.end.get=function(){return this.$to.after(this.depth+1)},sl.parent.get=function(){return this.$from.node(this.depth)},sl.startIndex.get=function(){return this.$from.index(this.depth)},sl.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(ol.prototype,sl);var al=Object.create(null),cl=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||Fc.empty,this.marks=r||jc.none},ll={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};function ul(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}ll.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},ll.childCount.get=function(){return this.content.childCount},cl.prototype.child=function(t){return this.content.child(t)},cl.prototype.maybeChild=function(t){return this.content.maybeChild(t)},cl.prototype.forEach=function(t){this.content.forEach(t)},cl.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},cl.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},ll.textContent.get=function(){return this.textBetween(0,this.content.size,"")},cl.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},ll.firstChild.get=function(){return this.content.firstChild},ll.lastChild.get=function(){return this.content.lastChild},cl.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},cl.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},cl.prototype.hasMarkup=function(t,e,n){return this.type==t&&Lc(this.attrs,e||t.defaultAttrs||al)&&jc.sameSet(this.marks,n||jc.none)},cl.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},cl.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},cl.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},cl.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return zc.empty;var r=this.resolve(t),i=this.resolve(e),o=n?0:r.sharedDepth(e),s=r.start(o),a=r.node(o),c=a.content.cut(r.pos-s,i.pos-s);return new zc(c,r.depth-o,i.depth-o)},cl.prototype.replace=function(t,e,n){return Jc(this.resolve(t),this.resolve(e),n)},cl.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,i=n.offset;if(e=e.maybeChild(r),!e)return null;if(i==t||e.isText)return e;t-=i+1}},cl.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},cl.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}},cl.prototype.resolve=function(t){return tl.resolveCached(this,t)},cl.prototype.resolveNoCache=function(t){return tl.resolve(this,t)},cl.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},ll.isBlock.get=function(){return this.type.isBlock},ll.isTextblock.get=function(){return this.type.isTextblock},ll.inlineContent.get=function(){return this.type.inlineContent},ll.isInline.get=function(){return this.type.isInline},ll.isText.get=function(){return this.type.isText},ll.isLeaf.get=function(){return this.type.isLeaf},ll.isAtom.get=function(){return this.type.isAtom},cl.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),ul(this.marks,t)},cl.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},cl.prototype.canReplace=function(t,e,n,r,i){void 0===n&&(n=Fc.empty),void 0===r&&(r=0),void 0===i&&(i=n.childCount);var o=this.contentMatchAt(t).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},cl.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var i=this.contentMatchAt(t).matchType(n),o=i&&i.matchFragment(this.content,e);return!!o&&o.validEnd},cl.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},cl.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var t=jc.none,e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!jc.sameSet(t,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(t){return t.type.name})));this.content.forEach((function(t){return t.check()}))},cl.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},cl.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=Fc.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(cl.prototype,ll);var hl=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},dl={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};hl.parse=function(t,e){var n=new pl(t,e);if(null==n.next)return hl.empty;var r=gl(n);n.next&&n.err("Unexpected trailing text");var i=El(Dl(r));return Sl(i,n),i},hl.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},hl.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,i=e;r&&i<n;i++)r=r.matchType(t.child(i).type);return r},dl.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},dl.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},hl.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},hl.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];function i(o,s){var a=o.matchFragment(t,n);if(a&&(!e||a.validEnd))return Fc.from(s.map((function(t){return t.createAndFill()})));for(var c=0;c<o.next.length;c+=2){var l=o.next[c],u=o.next[c+1];if(!l.isText&&!l.hasRequiredAttrs()&&-1==r.indexOf(u)){r.push(u);var h=i(u,s.concat(l));if(h)return h}}}return i(this,[])},hl.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},hl.prototype.computeWrapping=function(t){var e=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){var r=n.shift(),i=r.match;if(i.matchType(t)){for(var o=[],s=r;s.type;s=s.via)o.push(s.type);return o.reverse()}for(var a=0;a<i.next.length;a+=2){var c=i.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!i.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},dl.edgeCount.get=function(){return this.next.length>>1},hl.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},hl.prototype.toString=function(){var t=[];function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}return e(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",i=0;i<e.next.length;i+=2)r+=(i?", ":"")+e.next[i].name+"->"+t.indexOf(e.next[i+1]);return r})).join("\n")},Object.defineProperties(hl.prototype,dl),hl.empty=new hl(!0);var pl=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},fl={next:{configurable:!0}};function gl(t){var e=[];do{e.push(ml(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function ml(t){var e=[];do{e.push(vl(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function vl(t){for(var e=Al(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=bl(t,e)}return e}function yl(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function bl(t,e){var n=yl(t),r=n;return t.eat(",")&&(r="}"!=t.next?yl(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function wl(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var i=[];for(var o in n){var s=n[o];s.groups.indexOf(e)>-1&&i.push(s)}return 0==i.length&&t.err("No node type or group '"+e+"' found"),i}function Al(t){if(t.eat("(")){var e=gl(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=wl(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}function Dl(t){var e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var i={term:r,to:n};return e[t].push(i),i}function i(t,e){t.forEach((function(t){return t.to=e}))}function o(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(o(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=o(t.exprs[s],e);if(s==t.exprs.length-1)return a;i(a,e=n())}else{if("star"==t.type){var c=n();return r(e,c),i(o(t.expr,c),c),[r(c)]}if("plus"==t.type){var l=n();return i(o(t.expr,e),l),i(o(t.expr,l),l),[r(l)]}if("opt"==t.type)return[r(e)].concat(o(t.expr,e));if("range"==t.type){for(var u=e,h=0;h<t.min;h++){var d=n();i(o(t.expr,u),d),u=d}if(-1==t.max)i(o(t.expr,u),u);else for(var p=t.min;p<t.max;p++){var f=n();r(u,f),i(o(t.expr,u),f),u=f}return[r(u)]}if("name"==t.type)return[r(e,null,t.value)]}}}function Cl(t,e){return e-t}function kl(t,e){var n=[];return r(e),n.sort(Cl);function r(e){var i=t[e];if(1==i.length&&!i[0].term)return r(i[0].to);n.push(e);for(var o=0;o<i.length;o++){var s=i[o],a=s.term,c=s.to;a||-1!=n.indexOf(c)||r(c)}}}function El(t){var e=Object.create(null);return n(kl(t,0));function n(r){var i=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var o=i.indexOf(n),s=o>-1&&i[o+1];kl(t,r).forEach((function(t){s||i.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var o=e[r.join(",")]=new hl(r.indexOf(t.length-1)>-1),s=0;s<i.length;s+=2){var a=i[s+1].sort(Cl);o.next.push(i[s],e[a.join(",")]||n(a))}return o}}function Sl(t,e){for(var n=0,r=[t];n<r.length;n++){for(var i=r[n],o=!i.validEnd,s=[],a=0;a<i.next.length;a+=2){var c=i.next[a],l=i.next[a+1];s.push(c.name),!o||c.isText||c.hasRequiredAttrs()||(o=!1),-1==r.indexOf(l)&&r.push(l)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function xl(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Tl(t,e){var n=Object.create(null);for(var r in t){var i=e&&e[r];if(void 0===i){var o=t[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=o.default}n[r]=i}return n}function _l(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new Nl(t[n]);return e}fl.next.get=function(){return this.tokens[this.pos]},pl.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},pl.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(pl.prototype,fl);var Ml=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=_l(n.attrs),this.defaultAttrs=xl(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},Ol={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Ol.isInline.get=function(){return!this.isBlock},Ol.isTextblock.get=function(){return this.isBlock&&this.inlineContent},Ol.isLeaf.get=function(){return this.contentMatch==hl.empty},Ol.isAtom.get=function(){return this.isLeaf||this.spec.atom},Ml.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},Ml.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},Ml.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:Tl(this.attrs,t)},Ml.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new cl(this,this.computeAttrs(t),Fc.from(e),jc.setFrom(n))},Ml.prototype.createChecked=function(t,e,n){if(e=Fc.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new cl(this,this.computeAttrs(t),e,jc.setFrom(n))},Ml.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),e=Fc.from(e),e.size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var i=this.contentMatch.matchFragment(e).fillBefore(Fc.empty,!0);return i?new cl(this,t,e.append(i),jc.setFrom(n)):null},Ml.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},Ml.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},Ml.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},Ml.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:jc.empty:t},Ml.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new Ml(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(Ml.prototype,Ol);var Nl=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},Fl={isRequired:{configurable:!0}};Fl.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(Nl.prototype,Fl);var Il=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=_l(r.attrs),this.rank=e,this.excluded=null;var i=xl(this.attrs);this.instance=i&&new jc(this,i)};Il.prototype.create=function(t){return!t&&this.instance?this.instance:new jc(this,Tl(this.attrs,t))},Il.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,i){return n[t]=new Il(t,r++,e,i)})),n},Il.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t},Il.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},Il.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var Rl={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Bl={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Ll={ol:!0,ul:!0},jl=1,Pl=2,zl=4;function Ul(t){return(t?jl:0)|("full"===t?Pl:0)}var Hl=function(t,e,n,r,i,o,s){this.type=t,this.attrs=e,this.solid=i,this.match=o||(s&zl?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=jc.none,this.pendingMarks=r,this.stashMarks=[]};Hl.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(Fc.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},Hl.prototype.finish=function(t){if(!(this.options&jl)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=Fc.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(Fc.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},Hl.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]},Hl.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):Gl(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}},Hl.prototype.inlineContext=function(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!Rl.hasOwnProperty(t.parentNode.nodeName.toLowerCase())};var $l=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,i=e.topNode,o=Ul(e.preserveWhitespace)|(n?zl:0);r=i?new Hl(i.type,i.attrs,jc.none,jc.none,!0,e.topMatch||i.type.contentMatch,o):new Hl(n?null:t.schema.topNodeType,null,jc.none,jc.none,!0,null,o),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},Jl={top:{configurable:!0},currentPos:{configurable:!0}};function Vl(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&Ll.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}function ql(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(e=n.exec(t))r.push(e[1],e[2].trim());return r}function Gl(t,e){var n=e.schema.nodes,r=function(r){var i=n[r];if(i.allowsMarkType(t)){var o=[],s=function(t){o.push(t);for(var n=0;n<t.edgeCount;n++){var r=t.edge(n),i=r.type,a=r.next;if(i==e)return!0;if(o.indexOf(a)<0&&s(a))return!0}};return s(i.contentMatch)?{v:!0}:void 0}};for(var i in n){var o=r(i);if(o)return o.v}}function Wl(t,e){for(var n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}Jl.top.get=function(){return this.nodes[this.open]},$l.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(ql(e)):null,r=this.top;if(null!=n)for(var i=0;i<n.length;i++)this.addPendingMark(n[i]);if(this.addElement(t),null!=n)for(var o=0;o<n.length;o++)this.removePendingMark(n[o],r)}},$l.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if(n.options&Pl||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(n.options&jl)e=n.options&Pl?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],i=t.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},$l.prototype.addElement=function(t,e){var n,r=t.nodeName.toLowerCase();Ll.hasOwnProperty(r)&&this.parser.normalizeLists&&Vl(t);var i=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(i?i.ignore:Bl.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(t=i.skip);var o,s=this.top,a=this.needsBlock;if(Rl.hasOwnProperty(r))o=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),o&&this.sync(s),this.needsBlock=a}else this.addElementByRule(t,i,!1===i.consuming?n:null)},$l.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},$l.prototype.ignoreFallback=function(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},$l.prototype.readStyles=function(t){var e=jc.none;t:for(var n=0;n<t.length;n+=2)for(var r=null;;){var i=this.parser.matchStyle(t[n],t[n+1],this,r);if(!i)continue t;if(i.ignore)return null;if(e=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(e),!1!==i.consuming)break;r=i}return e},$l.prototype.addElementByRule=function(t,e,n){var r,i,o,s,a=this;e.node?(i=this.parser.schema.nodes[e.node],i.isLeaf?this.insertNode(i.create(e.attrs))||this.leafFallback(t):r=this.enter(i,e.attrs,e.preserveWhitespace)):(o=this.parser.schema.marks[e.mark],s=o.create(e.attrs),this.addPendingMark(s));var c=this.top;if(i&&i.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return a.insertNode(t)}));else{var l=e.contentElement;"string"==typeof l?l=t.querySelector(l):"function"==typeof l&&(l=l(t)),l||(l=t),this.findAround(t,l,!0),this.addAll(l,r)}r&&(this.sync(c),this.open--),s&&this.removePendingMark(s,c)},$l.prototype.addAll=function(t,e,n,r){for(var i=n||0,o=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(o),e&&Rl.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,i)},$l.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var i=this.nodes[r],o=i.findWrapping(t);if(o&&(!e||e.length>o.length)&&(e=o,n=i,!o.length))break;if(i.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},$l.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,i=0;i<t.marks.length;i++)n.type&&!n.type.allowsMarkType(t.marks[i].type)||(r=t.marks[i].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},$l.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},$l.prototype.enterInner=function(t,e,n,r){this.closeExtra();var i=this.top;i.applyPending(t),i.match=i.match&&i.match.matchType(t,e);var o=null==r?i.options&~zl:Ul(r);i.options&zl&&0==i.content.length&&(o|=zl),this.nodes.push(new Hl(t,e,i.activeMarks,i.pendingMarks,n,null,o)),this.open++},$l.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},$l.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},$l.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},Jl.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},$l.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},$l.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},$l.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)){var i=e.compareDocumentPosition(this.find[r].node);i&(n?2:4)&&(this.find[r].pos=this.currentPos)}},$l.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},$l.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=function(t,a){for(;t>=0;t--){var c=n[t];if(""==c){if(t==n.length-1||0==t)continue;for(;a>=o;a--)if(s(t-1,a))return!0;return!1}var l=a>0||0==a&&i?e.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!l||l.name!=c&&-1==l.groups.indexOf(c))return!1;a--}return!0};return s(n.length-1,this.open)},$l.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var i=this.parser.schema.nodes[r];if(i.isTextblock&&i.defaultAttrs)return i}},$l.prototype.addPendingMark=function(t){var e=Wl(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},$l.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n],i=r.pendingMarks.lastIndexOf(t);if(i>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var o=r.popFromStashMark(t);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}},Object.defineProperties($l.prototype,Jl);var Kl=65535,Ql=Math.pow(2,16);function Yl(t,e){return t+e*Ql}function Xl(t){return t&Kl}function Zl(t){return(t-(t&Kl))/Ql}var tu=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},eu=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};eu.prototype.recover=function(t){var e=0,n=Xl(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+Zl(t)},eu.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},eu.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},eu.prototype._map=function(t,e,n){for(var r=0,i=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>t)break;var c=this.ranges[s+i],l=this.ranges[s+o],u=a+c;if(t<=u){var h=c?t==a?-1:t==u?1:e:e,d=a+r+(h<0?0:l);if(n)return d;var p=t==(e<0?a:u)?null:Yl(s/3,t-a);return new tu(d,e<0?t!=a:t!=u,p)}r+=l-c}return n?t+r:new tu(t+r)},eu.prototype.touches=function(t,e){for(var n=0,r=Xl(e),i=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>t)break;var c=this.ranges[s+i],l=a+c;if(t<=l&&s==3*r)return!0;n+=this.ranges[s+o]-c}return!1},eu.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,i=0;r<this.ranges.length;r+=3){var o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),c=this.ranges[r+e],l=this.ranges[r+n];t(s,s+c,a,a+l),i+=l-c}},eu.prototype.invert=function(){return new eu(this.ranges,!this.inverted)},eu.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},eu.offset=function(t){return 0==t?eu.empty:new eu(t<0?[0,-t,0]:[0,0,t])},eu.empty=new eu([]);var nu=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function ru(t){var e=Error.call(this,t);return e.__proto__=ru.prototype,e}nu.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new nu(this.maps,this.mirror,t,e)},nu.prototype.copy=function(){return new nu(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},nu.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},nu.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},nu.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},nu.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},nu.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},nu.prototype.invert=function(){var t=new nu;return t.appendMappingInverted(this),t},nu.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},nu.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},nu.prototype._map=function(t,e,n){for(var r=!1,i=this.from;i<this.to;i++){var o=this.maps[i],s=o.mapResult(t,e);if(null!=s.recover){var a=this.getMirror(i);if(null!=a&&a>i&&a<this.to){i=a,t=this.maps[a].recover(s.recover);continue}}s.deleted&&(r=!0),t=s.pos}return n?t:new tu(t,r)},ru.prototype=Object.create(Error.prototype),ru.prototype.constructor=ru,ru.prototype.name="TransformError";var iu=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new nu},ou={before:{configurable:!0},docChanged:{configurable:!0}};function su(){throw new Error("Override me")}ou.before.get=function(){return this.docs.length?this.docs[0]:this.doc},iu.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new ru(e.failed);return this},iu.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},ou.docChanged.get=function(){return this.steps.length>0},iu.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(iu.prototype,ou);var au=Object.create(null),cu=function(){};cu.prototype.apply=function(t){return su()},cu.prototype.getMap=function(){return eu.empty},cu.prototype.invert=function(t){return su()},cu.prototype.map=function(t){return su()},cu.prototype.merge=function(t){return null},cu.prototype.toJSON=function(){return su()},cu.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=au[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},cu.jsonID=function(t,e){if(t in au)throw new RangeError("Duplicate use of step JSON ID "+t);return au[t]=e,e.prototype.jsonID=t,e};var lu=function(t,e){this.doc=t,this.failed=e};lu.ok=function(t){return new lu(t,null)},lu.fail=function(t){return new lu(null,t)},lu.fromReplace=function(t,e,n,r){try{return lu.ok(t.replace(e,n,r))}catch(i){if(i instanceof Pc)return lu.fail(i.message);throw i}};var uu=function(t){function e(e,n,r,i){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&du(t,this.from,this.to)?lu.fail("Structure replace would overwrite content"):lu.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new eu([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?zc.empty:new zc(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var r=this.slice.size+t.slice.size==0?zc.empty:new zc(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),r,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,zc.fromJSON(t,n.slice),!!n.structure)},e}(cu);cu.jsonID("replace",uu);var hu=function(t){function e(e,n,r,i,o,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(du(t,this.from,this.gapFrom)||du(t,this.gapTo,this.to)))return lu.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return lu.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?lu.fromReplace(t,this.from,this.to,n):lu.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new eu([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=t.map(this.gapFrom,-1),o=t.map(this.gapTo,1);return n.deleted&&r.deleted||i<n.pos||o>r.pos?null:new e(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,zc.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(cu);function du(t,e,n){var r=t.resolve(e),i=n-e,o=r.depth;while(i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount)o--,i--;if(i>0){var s=r.node(o).maybeChild(r.indexAfter(o));while(i>0){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}}return!1}function pu(t,e,n){var r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function fu(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var i=r.depth-1;i>=0;i--){var o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}function gu(t,e,n){for(var r=[],i=0;i<t.childCount;i++){var o=t.child(i);o.content.size&&(o=o.copy(gu(o.content,e,o))),o.isInline&&(o=e(o,n,i)),r.push(o)}return Fc.fromArray(r)}cu.jsonID("replaceAround",hu),iu.prototype.lift=function(t,e){for(var n=t.$from,r=t.$to,i=t.depth,o=n.before(i+1),s=r.after(i+1),a=o,c=s,l=Fc.empty,u=0,h=i,d=!1;h>e;h--)d||n.index(h)>0?(d=!0,l=Fc.from(n.node(h).copy(l)),u++):a--;for(var p=Fc.empty,f=0,g=i,m=!1;g>e;g--)m||r.after(g+1)<r.end(g)?(m=!0,p=Fc.from(r.node(g).copy(p)),f++):c++;return this.step(new hu(a,c,o,s,new zc(l.append(p),u,f),l.size-u,!0))},iu.prototype.wrap=function(t,e){for(var n=Fc.empty,r=e.length-1;r>=0;r--)n=Fc.from(e[r].type.create(e[r].attrs,n));var i=t.start,o=t.end;return this.step(new hu(i,o,i,o,new zc(n,0,0),e.length,!0))},iu.prototype.setBlockType=function(t,e,n,r){var i=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var o=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,r)&&pu(i.doc,i.mapping.slice(o).map(e),n)){i.clearIncompatible(i.mapping.slice(o).map(e,1),n);var s=i.mapping.slice(o),a=s.map(e,1),c=s.map(e+t.nodeSize,1);return i.step(new hu(a,c,a+1,c-1,new zc(Fc.from(n.create(r,null,t.marks)),0,0),1,!0)),!1}})),this},iu.prototype.setNodeMarkup=function(t,e,n,r){var i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");e||(e=i.type);var o=e.create(n,null,r||i.marks);if(i.isLeaf)return this.replaceWith(t,t+i.nodeSize,o);if(!e.validContent(i.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new hu(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new zc(Fc.from(o),0,0),1,!0))},iu.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var r=this.doc.resolve(t),i=Fc.empty,o=Fc.empty,s=r.depth,a=r.depth-e,c=e-1;s>a;s--,c--){i=Fc.from(r.node(s).copy(i));var l=n&&n[c];o=Fc.from(l?l.type.create(l.attrs,o):r.node(s).copy(o))}return this.step(new uu(t,t,new zc(i.append(o),e,e),!0))},iu.prototype.join=function(t,e){void 0===e&&(e=1);var n=new uu(t-e,t+e,zc.empty,!0);return this.step(n)};var mu=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new zc(gu(n.content,(function(t,n){return t.isAtom&&n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),i),n.openStart,n.openEnd);return lu.fromReplace(t,this.from,this.to,o)},e.prototype.invert=function(){return new vu(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(cu);cu.jsonID("addMark",mu);var vu=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=new zc(gu(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return lu.fromReplace(t,this.from,this.to,r)},e.prototype.invert=function(){return new mu(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(cu);function yu(t,e,n,r){if(void 0===n&&(n=e),void 0===r&&(r=zc.empty),e==n&&!r.size)return null;var i=t.resolve(e),o=t.resolve(n);return bu(i,o,r)?new uu(e,n,r):new wu(i,o,r).fit()}function bu(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}cu.jsonID("removeMark",vu),iu.prototype.addMark=function(t,e,n){var r=this,i=[],o=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(r,c,l){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&l.type.allowsMarkType(n.type)){for(var h=Math.max(c,t),d=Math.min(c+r.nodeSize,e),p=n.addToSet(u),f=0;f<u.length;f++)u[f].isInSet(p)||(s&&s.to==h&&s.mark.eq(u[f])?s.to=d:i.push(s=new vu(h,d,u[f])));a&&a.to==h?a.to=d:o.push(a=new mu(h,d,n))}}})),i.forEach((function(t){return r.step(t)})),o.forEach((function(t){return r.step(t)})),this},iu.prototype.removeMark=function(t,e,n){var r=this;void 0===n&&(n=null);var i=[],o=0;return this.doc.nodesBetween(t,e,(function(r,s){if(r.isInline){o++;var a=null;if(n instanceof Il){var c,l=r.marks;while(c=n.isInSet(l))(a||(a=[])).push(c),l=c.removeFromSet(l)}else n?n.isInSet(r.marks)&&(a=[n]):a=r.marks;if(a&&a.length)for(var u=Math.min(s+r.nodeSize,e),h=0;h<a.length;h++){for(var d=a[h],p=void 0,f=0;f<i.length;f++){var g=i[f];g.step==o-1&&d.eq(i[f].style)&&(p=g)}p?(p.to=u,p.step=o):i.push({style:d,from:Math.max(s,t),to:u,step:o})}}})),i.forEach((function(t){return r.step(new vu(t.from,t.to,t.style))})),this},iu.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var r=this.doc.nodeAt(t),i=[],o=t+1,s=0;s<r.childCount;s++){var a=r.child(s),c=o+a.nodeSize,l=n.matchType(a.type,a.attrs);if(l){n=l;for(var u=0;u<a.marks.length;u++)e.allowsMarkType(a.marks[u].type)||this.step(new vu(o,c,a.marks[u]))}else i.push(new uu(o,c,zc.empty));o=c}if(!n.validEnd){var h=n.fillBefore(Fc.empty,!0);this.replace(o,o,new zc(h,0,0))}for(var d=i.length-1;d>=0;d--)this.step(i[d]);return this},iu.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=zc.empty);var r=yu(this.doc,t,e,n);return r&&this.step(r),this},iu.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new zc(Fc.from(n),0,0))},iu.prototype.delete=function(t,e){return this.replace(t,e,zc.empty)},iu.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var wu=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var r=0;r<=t.depth;r++){var i=t.node(r);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(r))})}this.placed=Fc.empty;for(var o=t.depth;o>0;o--)this.placed=Fc.from(t.node(o).copy(this.placed))},Au={depth:{configurable:!0}};function Du(t,e,n){return 0==e?t.cutByIndex(n):t.replaceChild(0,t.firstChild.copy(Du(t.firstChild.content,e-1,n)))}function Cu(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Cu(t.lastChild.content,e-1,n)))}function ku(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function Eu(t,e,n){if(e<=0)return t;var r=t.content;return e>1&&(r=r.replaceChild(0,Eu(r.firstChild,e-1,1==r.childCount?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Fc.empty,!0)))),t.copy(r)}function Su(t,e,n,r,i){var o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;var a=r.fillBefore(o.content,!0,s);return a&&!xu(n,o.content,s)?a:null}function xu(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function Tu(t,e,n,r,i){if(e<n){var o=t.firstChild;t=t.replaceChild(0,o.copy(Tu(o.content,e+1,n,r,o)))}if(e>r){var s=i.contentMatchAt(0),a=s.fillBefore(t).append(t);t=a.append(s.matchFragment(a).fillBefore(Fc.empty,!0))}return t}function _u(t,e){for(var n=[],r=Math.min(t.depth,e.depth),i=r;i>=0;i--){var o=t.start(i);if(o<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(o==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==o-1)&&n.push(i)}return n}Au.depth.get=function(){return this.frontier.length-1},wu.prototype.fit=function(){while(this.unplaced.size){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;var o=this.placed,s=r.depth,a=i.depth;while(s&&a&&1==o.childCount)o=o.firstChild.content,s--,a--;var c=new zc(o,s,a);return e>-1?new hu(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new uu(r.pos,i.pos,c):void 0},wu.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--){var n=void 0,r=void 0;e?(r=ku(this.unplaced.content,e-1).firstChild,n=r.content):n=this.unplaced.content;for(var i=n.firstChild,o=this.depth;o>=0;o--){var s=this.frontier[o],a=s.type,c=s.match,l=void 0,u=void 0;if(1==t&&(i?c.matchType(i.type)||(u=c.fillBefore(Fc.from(i),!1)):a.compatibleContent(r.type)))return{sliceDepth:e,frontierDepth:o,parent:r,inject:u};if(2==t&&i&&(l=c.findWrapping(i.type)))return{sliceDepth:e,frontierDepth:o,parent:r,wrap:l};if(r&&c.matchType(r.type))break}}},wu.prototype.openMore=function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,i=ku(e,n);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new zc(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)},wu.prototype.dropNode=function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,i=ku(e,n);if(i.childCount<=1&&n>0){var o=e.size-n<=n+i.size;this.unplaced=new zc(Du(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new zc(Du(e,n,1),n,r)},wu.prototype.placeNodes=function(t){var e=t.sliceDepth,n=t.frontierDepth,r=t.parent,i=t.inject,o=t.wrap;while(this.depth>n)this.closeFrontierNode();if(o)for(var s=0;s<o.length;s++)this.openFrontierNode(o[s]);var a=this.unplaced,c=r?r.content:a.content,l=a.openStart-e,u=0,h=[],d=this.frontier[n],p=d.match,f=d.type;if(i){for(var g=0;g<i.childCount;g++)h.push(i.child(g));p=p.matchFragment(i)}var m=c.size+e-(a.content.size-a.openEnd);while(u<c.childCount){var v=c.child(u),y=p.matchType(v.type);if(!y)break;u++,(u>1||0==l||v.content.size)&&(p=y,h.push(Eu(v.mark(f.allowedMarks(v.marks)),1==u?l:0,u==c.childCount?m:-1)))}var b=u==c.childCount;b||(m=-1),this.placed=Cu(this.placed,n,Fc.from(h)),this.frontier[n].match=p,b&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var w=0,A=c;w<m;w++){var D=A.lastChild;this.frontier.push({type:D.type,match:D.contentMatchAt(D.childCount)}),A=D.content}this.unplaced=b?0==e?zc.empty:new zc(Du(a.content,e-1,1),e-1,m<0?a.openEnd:e-1):new zc(Du(a.content,e,u),a.openStart,a.openEnd)},wu.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!Su(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;var n=this.$to,r=n.depth,i=this.$to.after(r);while(r>1&&i==this.$to.end(--r))++i;return i},wu.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,i=n.type,o=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=Su(t,e,i,r,o);if(s){for(var a=e-1;a>=0;a--){var c=this.frontier[a],l=c.match,u=c.type,h=Su(t,a,u,l,!0);if(!h||h.childCount)continue t}return{depth:e,fit:s,move:o?t.doc.resolve(t.after(e+1)):t}}}},wu.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;while(this.depth>e.depth)this.closeFrontierNode();e.fit.childCount&&(this.placed=Cu(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),i=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,i)}return t},wu.prototype.openFrontierNode=function(t,e,n){var r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=Cu(this.placed,this.depth,Fc.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})},wu.prototype.closeFrontierNode=function(){var t=this.frontier.pop(),e=t.match.fillBefore(Fc.empty,!0);e.childCount&&(this.placed=Cu(this.placed,this.frontier.length,e))},Object.defineProperties(wu.prototype,Au),iu.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var r=this.doc.resolve(t),i=this.doc.resolve(e);if(bu(r,i,n))return this.step(new uu(t,e,n));var o=_u(r,this.doc.resolve(e));0==o[o.length-1]&&o.pop();var s=-(r.depth+1);o.unshift(s);for(var a=r.depth,c=r.pos-1;a>0;a--,c--){var l=r.node(a).type.spec;if(l.defining||l.isolating)break;o.indexOf(a)>-1?s=a:r.before(a)==c&&o.splice(1,0,-a)}for(var u=o.indexOf(s),h=[],d=n.openStart,p=n.content,f=0;;f++){var g=p.firstChild;if(h.push(g),f==n.openStart)break;p=g.content}d>0&&h[d-1].type.spec.defining&&r.node(u).type!=h[d-1].type?d-=1:d>=2&&h[d-1].isTextblock&&h[d-2].type.spec.defining&&r.node(u).type!=h[d-2].type&&(d-=2);for(var m=n.openStart;m>=0;m--){var v=(m+d+1)%(n.openStart+1),y=h[v];if(y)for(var b=0;b<o.length;b++){var w=o[(b+u)%o.length],A=!0;w<0&&(A=!1,w=-w);var D=r.node(w-1),C=r.index(w-1);if(D.canReplaceWith(C,C,y.type,y.marks))return this.replace(r.before(w),A?i.after(w):e,new zc(Tu(n.content,0,n.openStart,v),v,n.openEnd))}}for(var k=this.steps.length,E=o.length-1;E>=0;E--){if(this.replace(t,e,n),this.steps.length>k)break;var S=o[E];S<0||(t=r.before(S),e=i.after(S))}return this},iu.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var r=fu(this.doc,t,n.type);null!=r&&(t=e=r)}return this.replaceRange(t,e,new zc(Fc.from(n),0,0))},iu.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),i=_u(n,r),o=0;o<i.length;o++){var s=i[o],a=o==i.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(t-n.start(c)==n.depth-c&&e>n.end(c)&&r.end(c)-e!=r.depth-c)return this.delete(n.before(c),e);return this.delete(t,e)};var Mu=Object.create(null),Ou=function(t,e,n){this.ranges=n||[new Fu(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},Nu={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};Nu.anchor.get=function(){return this.$anchor.pos},Nu.head.get=function(){return this.$head.pos},Nu.from.get=function(){return this.$from.pos},Nu.to.get=function(){return this.$to.pos},Nu.$from.get=function(){return this.ranges[0].$from},Nu.$to.get=function(){return this.ranges[0].$to},Nu.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},Ou.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},Ou.prototype.replace=function(t,e){void 0===e&&(e=zc.empty);for(var n=e.content.lastChild,r=null,i=0;i<e.openEnd;i++)r=n,n=n.lastChild;for(var o=t.steps.length,s=this.ranges,a=0;a<s.length;a++){var c=s[a],l=c.$from,u=c.$to,h=t.mapping.slice(o);t.replaceRange(h.map(l.pos),h.map(u.pos),a?zc.empty:e),0==a&&Uu(t,o,(n?n.isInline:r&&r.isTextblock)?-1:1)}},Ou.prototype.replaceWith=function(t,e){for(var n=t.steps.length,r=this.ranges,i=0;i<r.length;i++){var o=r[i],s=o.$from,a=o.$to,c=t.mapping.slice(n),l=c.map(s.pos),u=c.map(a.pos);i?t.deleteRange(l,u):(t.replaceRangeWith(l,u,e),Uu(t,n,e.isInline?-1:1))}},Ou.findFrom=function(t,e,n){var r=t.parent.inlineContent?new Iu(t):zu(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var i=t.depth-1;i>=0;i--){var o=e<0?zu(t.node(0),t.node(i),t.before(i+1),t.index(i),e,n):zu(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,e,n);if(o)return o}},Ou.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new ju(t.node(0))},Ou.atStart=function(t){return zu(t,t,0,0,1)||new ju(t)},Ou.atEnd=function(t){return zu(t,t,t.content.size,t.childCount,-1)||new ju(t)},Ou.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=Mu[e.type];if(!n)throw new RangeError("No selection type "+e.type+" defined");return n.fromJSON(t,e)},Ou.jsonID=function(t,e){if(t in Mu)throw new RangeError("Duplicate use of selection JSON ID "+t);return Mu[t]=e,e.prototype.jsonID=t,e},Ou.prototype.getBookmark=function(){return Iu.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(Ou.prototype,Nu),Ou.prototype.visible=!0;var Fu=function(t,e){this.$from=t,this.$to=e},Iu=function(t){function e(e,n){void 0===n&&(n=e),t.call(this,e,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(n,r){var i=n.resolve(r.map(this.head));if(!i.parent.inlineContent)return t.near(i);var o=n.resolve(r.map(this.anchor));return new e(o.parent.inlineContent?o:i,i)},e.prototype.replace=function(e,n){if(void 0===n&&(n=zc.empty),t.prototype.replace.call(this,e,n),n==zc.empty){var r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new Ru(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,e,n){void 0===n&&(n=e);var r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))},e.between=function(n,r,i){var o=n.pos-r.pos;if(i&&!o||(i=o>=0?1:-1),!r.parent.inlineContent){var s=t.findFrom(r,i,!0)||t.findFrom(r,-i,!0);if(!s)return t.near(r,i);r=s.$head}return n.parent.inlineContent||(0==o?n=r:(n=(t.findFrom(n,-i,!0)||t.findFrom(n,i,!0)).$anchor,n.pos<r.pos!=o<0&&(n=r))),new e(n,r)},Object.defineProperties(e.prototype,n),e}(Ou);Ou.jsonID("text",Iu);var Ru=function(t,e){this.anchor=t,this.head=e};Ru.prototype.map=function(t){return new Ru(t.map(this.anchor),t.map(this.head))},Ru.prototype.resolve=function(t){return Iu.between(t.resolve(this.anchor),t.resolve(this.head))};var Bu=function(t){function e(e){var n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);t.call(this,e,r),this.node=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var i=r.mapResult(this.anchor),o=i.deleted,s=i.pos,a=n.resolve(s);return o?t.near(a):new e(a)},e.prototype.content=function(){return new zc(Fc.from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new Lu(this.anchor)},e.fromJSON=function(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(Ou);Bu.prototype.visible=!1,Ou.jsonID("node",Bu);var Lu=function(t){this.anchor=t};Lu.prototype.map=function(t){var e=t.mapResult(this.anchor),n=e.deleted,r=e.pos;return n?new Ru(r,r):new Lu(r)},Lu.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&Bu.isSelectable(n)?new Bu(e):Ou.near(e)};var ju=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replace=function(e,n){if(void 0===n&&(n=zc.empty),n==zc.empty){e.delete(0,e.doc.content.size);var r=t.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else t.prototype.replace.call(this,e,n)},e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return Pu},e}(Ou);Ou.jsonID("all",ju);var Pu={map:function(){return this},resolve:function(t){return new ju(t)}};function zu(t,e,n,r,i,o){if(e.inlineContent)return Iu.create(t,n);for(var s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){var a=e.child(s);if(a.isAtom){if(!o&&Bu.isSelectable(a))return Bu.create(t,n-(i<0?a.nodeSize:0))}else{var c=zu(t,a,n+i,i<0?a.childCount:0,i,o);if(c)return c}n+=a.nodeSize*i}}function Uu(t,e,n){var r=t.steps.length-1;if(!(r<e)){var i=t.steps[r];if(i instanceof uu||i instanceof hu){var o,s=t.mapping.maps[r];s.forEach((function(t,e,n,r){null==o&&(o=r)})),t.setSelection(Ou.near(t.doc.resolve(o),n))}}}var Hu=1,$u=2,Ju=4,Vu=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Hu)&~$u,this.storedMarks=null,this},n.selectionSet.get=function(){return(this.updated&Hu)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=$u,this},e.prototype.ensureMarks=function(t){return jc.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(this.updated&$u)>0},e.prototype.addStep=function(e,n){t.prototype.addStep.call(this,e,n),this.updated=this.updated&~$u,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var n=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||jc.none))),n.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,n){void 0===n&&(n=e);var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,n);var i=this.storedMarks;if(!i){var o=this.doc.resolve(e);i=n==e?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,i)),this.selection.empty||this.setSelection(Ou.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},n.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=Ju,this},n.scrolledIntoView.get=function(){return(this.updated&Ju)>0},Object.defineProperties(e.prototype,n),e}(iu);function qu(t,e){return e&&t?t.bind(e):t}var Gu=function(t,e,n){this.name=t,this.init=qu(e.init,n),this.apply=qu(e.apply,n)},Wu=[new Gu("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new Gu("selection",{init:function(t,e){return t.selection||Ou.atStart(e.doc)},apply:function(t){return t.selection}}),new Gu("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Gu("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],Ku=function(t,e){var n=this;this.schema=t,this.fields=Wu.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(n.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");n.plugins.push(t),n.pluginsByKey[t.key]=t,t.spec.state&&n.fields.push(new Gu(t.key,t.spec.state,t))}))},Qu=function(t){this.config=t},Yu={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};Yu.schema.get=function(){return this.config.schema},Yu.plugins.get=function(){return this.config.plugins},Qu.prototype.apply=function(t){return this.applyTransaction(t).state},Qu.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=e){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0},Qu.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),r=null;;){for(var i=!1,o=0;o<this.config.plugins.length;o++){var s=this.config.plugins[o];if(s.spec.appendTransaction){var a=r?r[o].n:0,c=r?r[o].state:this,l=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,c,n);if(l&&n.filterTransaction(l,o)){if(l.setMeta("appendedTransaction",t),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<o?{state:n,n:e.length}:{state:this,n:0})}e.push(l),n=n.applyInner(l),i=!0}r&&(r[o]={state:n,n:e.length})}}if(!i)return{state:n,transactions:e}}},Qu.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new Qu(this.config),n=this.config.fields,r=0;r<n.length;r++){var i=n[r];e[i.name]=i.apply(t,this[i.name],this,e)}for(var o=0;o<Xu.length;o++)Xu[o](this,t,e);return e},Yu.tr.get=function(){return new Vu(this)},Qu.create=function(t){for(var e=new Ku(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new Qu(e),r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n},Qu.prototype.reconfigure=function(t){for(var e=new Ku(this.schema,t.plugins),n=e.fields,r=new Qu(e),i=0;i<n.length;i++){var o=n[i].name;r[o]=this.hasOwnProperty(o)?this[o]:n[i].init(t,r)}return r},Qu.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==typeof t)for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[n],i=r.spec.state;i&&i.toJSON&&(e[n]=i.toJSON.call(r,this[r.key]))}return e},Qu.fromJSON=function(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var r=new Ku(t.schema,t.plugins),i=new Qu(r);return r.fields.forEach((function(r){if("doc"==r.name)i.doc=cl.fromJSON(t.schema,e.doc);else if("selection"==r.name)i.selection=Ou.fromJSON(i.doc,e.selection);else if("storedMarks"==r.name)e.storedMarks&&(i.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(var o in n){var s=n[o],a=s.spec.state;if(s.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(e,o))return void(i[r.name]=a.fromJSON.call(s,t,e[o],i))}i[r.name]=r.init(t,i)}})),i},Qu.addApplyListener=function(t){Xu.push(t)},Qu.removeApplyListener=function(t){var e=Xu.indexOf(t);e>-1&&Xu.splice(e,1)},Object.defineProperties(Qu.prototype,Yu);var Xu=[];function Zu(t,e,n){for(var r in t){var i=t[r];i instanceof Function?i=i.bind(e):"handleDOMEvents"==r&&(i=Zu(i,e,{})),n[r]=i}return n}var th=function(t){this.props={},t.props&&Zu(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:nh("plugin")};th.prototype.getState=function(t){return t[this.key]};var eh=Object.create(null);function nh(t){return t in eh?t+"$"+ ++eh[t]:(eh[t]=0,t+"$")}var rh=function(t){void 0===t&&(t="key"),this.key=nh(t)};rh.prototype.get=function(t){return t.config.pluginsByKey[this.key]},rh.prototype.getState=function(t){return t[this.key]};const ih=D["b"].create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize"}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(null===t||void 0===t?void 0:t.node)||this.editor.state.doc,n=(null===t||void 0===t?void 0:t.mode)||this.options.mode;if("textSize"===n){const t=e.textBetween(0,e.content.size,void 0," ");return t.length}return e.nodeSize},this.storage.words=t=>{const e=(null===t||void 0===t?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," "),r=n.split(" ").filter(t=>""!==t);return r.length}},addProseMirrorPlugins(){return[new th({key:new rh("characterCount"),filterTransaction:(t,e)=>{const n=this.options.limit;if(!t.docChanged||0===n||null===n||void 0===n)return!0;const r=this.storage.characters({node:e.doc}),i=this.storage.characters({node:t.doc});if(i<=n)return!0;if(r>n&&i>n&&i<=r)return!0;if(r>n&&i>n&&i>r)return!1;const o=t.getMeta("paste");if(!o)return!1;const s=t.selection.$head.pos,a=i-n,c=s-a,l=s;t.deleteRange(c,l);const u=this.storage.characters({node:t.doc});return!(u>n)}})]}}),oh=D["b"].create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Qt["d"]({key:new Qt["e"]("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,o=[];if(!n||!r)return Ee["b"].create(t,[]);let s=0;"deepest"===this.options.mode&&t.descendants((t,e)=>{if(t.isText)return;const n=i>=e&&i<=e+t.nodeSize-1;if(!n)return!1;s+=1});let a=0;return t.descendants((t,e)=>{if(t.isText)return!1;const n=i>=e&&i<=e+t.nodeSize-1;if(!n)return!1;a+=1;const r="deepest"===this.options.mode&&s-a>0||"shallowest"===this.options.mode&&a>1;if(r)return"deepest"===this.options.mode;o.push(Ee["a"].node(e,e+t.nodeSize,{class:this.options.className}))}),Ee["b"].create(t,o)}}})]}}),sh=new Qt["e"]("y-sync"),ah=new Qt["e"]("y-undo"),ch=new Qt["e"]("yjs-cursor");var lh=n("3edb"),uh=n("ca0e"),hh=n("1d2f"),dh=n("4aa6");n("2163");const ph=(t,e)=>{let n=0,r=0;while(n<t.length&&n<e.length&&t[n]===e[n])n++;if(n!==t.length||n!==e.length)while(r+n<t.length&&r+n<e.length&&t[t.length-r-1]===e[e.length-r-1])r++;return{index:n,remove:t.length-n-r,insert:e.slice(n,e.length-r)}},fh=ph;var gh=n("1e58"),mh=n("7428"),vh=n("2309"),yh=n("058a");let bh=null;const wh=()=>{const t=bh;bh=null,t.forEach((t,e)=>{const n=e.state.tr;t.forEach((t,e)=>{n.setMeta(e,t)}),e.dispatch(n)})},Ah=(t,e,n)=>{bh||(bh=new Map,yh["b"](0,wh)),vh["e"](bh,t,vh["c"]).set(e,n)},Dh=(t,e,n)=>{if(0===t)return mh["s"](e,0);let r=null===e._first?null:e._first.content.type;while(null!==r&&e!==r){if(r instanceof mh["l"]){if(r._length>=t)return mh["s"](r,t);if(t-=r._length,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{do{r=null===r._item?null:r._item.parent,t--}while(r!==e&&null!==r&&null!==r._item&&null===r._item.next);null!==r&&r!==e&&(r=null===r._item?null:r._item.next.content.type)}}else{const i=(n.get(r)||{nodeSize:0}).nodeSize;if(null!==r._first&&t<i)r=r._first.content.type,t--;else{if(1===t&&0===r._length&&i>1)return new mh["f"](null===r._item?null:r._item.id,null===r._item?mh["w"](r):null,null);if(t-=i,null!==r._item&&null!==r._item.next)r=r._item.next.content.type;else{if(0===t)return r=null===r._item?r:r._item.parent,new mh["f"](null===r._item?null:r._item.id,null===r._item?mh["w"](r):null,null);do{r=r._item.parent,t--}while(r!==e&&null===r._item.next);r!==e&&(r=r._item.next.content.type)}}}if(null===r)throw gh["c"]();if(0===t&&r.constructor!==mh["l"]&&r!==e)return Ch(r._item.parent,r._item)}return mh["s"](e,e._length)},Ch=(t,e)=>{let n=null,r=null;return null===t._item?r=mh["w"](t):n=mh["q"](t._item.id.client,t._item.id.clock),new mh["f"](n,r,e.id)},kh=(t,e,n,r)=>{const i=mh["o"](n,t);if(null===i||i.type!==e&&!mh["y"](e,i.type._item))return null;let o=i.type,s=0;if(o.constructor===mh["l"])s=i.index;else if(null===o._item||!o._item.deleted){let t=o._first,e=0;while(e<o._length&&e<i.index&&null!==t){if(!t.deleted){const n=t.content.type;e++,n instanceof mh["l"]?s+=n._length:s+=r.get(n).nodeSize}t=t.right}s+=1}while(o!==e&&null!==o._item){const t=o._item.parent;if(null===t._item||!t._item.deleted){s+=1;let e=t._first;while(null!==e){const t=e.content.type;if(t===o)break;e.deleted||(t instanceof mh["l"]?s+=t._length:s+=r.get(t).nodeSize),e=e.right}}o=t}return s-1};var Eh=n("c893"),Sh=n("1d8c"),xh=n("b6f5");const Th=(t,e)=>void 0===e?!t.deleted:e.sv.has(t.id.client)&&e.sv.get(t.id.client)>t.id.clock&&!mh["x"](e.ds,t.id),_h=[{light:"#ecd44433",dark:"#ecd444"}],Mh=(t,e,n)=>{if(!t.has(n)){if(t.size<e.length){const n=dh["a"]();t.forEach(t=>n.add(t)),e=e.filter(t=>!n.has(t))}t.set(n,Eh["a"](e))}return t.get(n)},Oh=(t,{colors:e=_h,colorMapping:n=new Map,permanentUserData:r=null}={})=>{let i=!1;const o=new Qt["d"]({props:{editable:t=>{const e=sh.getState(t);return null==e.snapshot&&null==e.prevSnapshot}},key:sh,state:{init:(i,o)=>({type:t,doc:t.doc,binding:null,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,colors:e,colorMapping:n,permanentUserData:r}),apply:(t,e)=>{const n=t.getMeta(sh);if(void 0!==n){e=Object.assign({},e);for(const t in n)e[t]=n[t]}return e.isChangeOrigin=void 0!==n&&!!n.isChangeOrigin,null!==e.binding&&(void 0===n||null==n.snapshot&&null==n.prevSnapshot||setTimeout(()=>{null==n.restore?e.binding._renderSnapshot(n.snapshot,n.prevSnapshot,e):(e.binding._renderSnapshot(n.snapshot,n.snapshot,e),delete e.restore,delete e.snapshot,delete e.prevSnapshot,e.binding._prosemirrorChanged(e.binding.prosemirrorView.state.doc))},0)),e}},view:e=>{const n=new Ih(t,e);return setTimeout(()=>{n._forceRerender(),e.dispatch(e.state.tr.setMeta(sh,{binding:n}))},0),{update:()=>{const t=o.getState(e.state);null==t.snapshot&&null==t.prevSnapshot&&(i||null!==e.state.doc.content.findDiffStart(e.state.doc.type.createAndFill().content))&&(i=!0,n._prosemirrorChanged(e.state.doc))},destroy:()=>{n.destroy()}}}});return o},Nh=(t,e,n)=>{if(null!==e&&null!==e.anchor&&null!==e.head){const r=kh(n.doc,n.type,e.anchor,n.mapping),i=kh(n.doc,n.type,e.head,n.mapping);null!==r&&null!==i&&(t=t.setSelection(Qt["h"].create(t.doc,r,i)))}},Fh=(t,e)=>({anchor:Dh(e.selection.anchor,t.type,t.mapping),head:Dh(e.selection.head,t.type,t.mapping)});class Ih{constructor(t,e){this.type=t,this.prosemirrorView=e,this.mux=Object(lh["a"])(),this.mapping=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=t.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{null===this.beforeTransactionSelection&&(this.beforeTransactionSelection=Fh(this,e.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),t.observeDeep(this._observeFunction),this._domSelectionInView=null}_isLocalCursorInView(){return!!this.prosemirrorView.hasFocus()&&(Sh["b"]&&null===this._domSelectionInView&&(setTimeout(()=>{this._domSelectionInView=null},0),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView)}_isDomSelectionInView(){const t=this.prosemirrorView._root.getSelection(),e=this.prosemirrorView._root.createRange();e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset);const n=e.getClientRects();0===n.length&&e.startContainer&&e.collapsed&&e.selectNodeContents(e.startContainer);const r=e.getBoundingClientRect(),i=xh["c"].documentElement;return r.bottom>=0&&r.right>=0&&r.left<=(window.innerWidth||i.clientWidth||0)&&r.top<=(window.innerHeight||i.clientHeight||0)}renderSnapshot(t,e){e||(e=mh["t"](mh["p"](),new Map)),this.prosemirrorView.dispatch(this.prosemirrorView.state.tr.setMeta(sh,{snapshot:t,prevSnapshot:e}))}unrenderSnapshot(){this.mapping=new Map,this.mux(()=>{const t=this.type.toArray().map(t=>Bh(t,this.prosemirrorView.state.schema,this.mapping)).filter(t=>null!==t),e=this.prosemirrorView.state.tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ce["j"](new Ce["c"](t),0,0));e.setMeta(sh,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(e)})}_forceRerender(){this.mapping=new Map,this.mux(()=>{const t=this.type.toArray().map(t=>Bh(t,this.prosemirrorView.state.schema,this.mapping)).filter(t=>null!==t),e=this.prosemirrorView.state.tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ce["j"](new Ce["c"](t),0,0));this.prosemirrorView.dispatch(e.setMeta(sh,{isChangeOrigin:!0}))})}_renderSnapshot(t,e,n){t||(t=mh["A"](this.doc)),this.mapping=new Map,this.mux(()=>{this.doc.transact(r=>{const i=n.permanentUserData;i&&i.dss.forEach(t=>{mh["z"](r,t,t=>{})});const o=(t,e)=>{const r="added"===t?i.getUserByClientId(e.client):i.getUserByDeletedId(e);return{user:r,type:t,color:Mh(n.colorMapping,n.colors,r)}},s=mh["B"](this.type,new mh["g"](e.ds,t.sv)).map(n=>!n._item.deleted||Th(n._item,t)||Th(n._item,e)?Bh(n,this.prosemirrorView.state.schema,new Map,t,e,o):null).filter(t=>null!==t),a=this.prosemirrorView.state.tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ce["j"](new Ce["c"](s),0,0));this.prosemirrorView.dispatch(a.setMeta(sh,{isChangeOrigin:!0}))},sh)})}_typeChanged(t,e){const n=sh.getState(this.prosemirrorView.state);0!==t.length&&null==n.snapshot&&null==n.prevSnapshot?this.mux(()=>{const t=(t,e)=>this.mapping.delete(e);mh["z"](e,e.deleteSet,t=>t.constructor===mh["e"]&&this.mapping.delete(t.content.type)),e.changed.forEach(t),e.changedParentTypes.forEach(t);const n=this.type.toArray().map(t=>Rh(t,this.prosemirrorView.state.schema,this.mapping)).filter(t=>null!==t);let r=this.prosemirrorView.state.tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ce["j"](new Ce["c"](n),0,0));Nh(r,this.beforeTransactionSelection,this),r=r.setMeta(sh,{isChangeOrigin:!0}),null!==this.beforeTransactionSelection&&this._isLocalCursorInView()&&r.scrollIntoView(),this.prosemirrorView.dispatch(r)}):this.renderSnapshot(n.snapshot,n.prevSnapshot)}_prosemirrorChanged(t){this.mux(()=>{this.doc.transact(()=>{Yh(this.doc,this.type,t,this.mapping),this.beforeTransactionSelection=Fh(this,this.prosemirrorView.state)},sh)})}destroy(){this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions)}}const Rh=(t,e,n,r,i,o)=>{const s=n.get(t);if(void 0===s){if(t instanceof mh["j"])return Bh(t,e,n,r,i,o);throw gh["b"]()}return s},Bh=(t,e,n,r,i,o)=>{const s=[],a=t=>{if(t.constructor===mh["j"]){const a=Rh(t,e,n,r,i,o);null!==a&&s.push(a)}else{const a=Lh(t,e,n,r,i,o);null!==a&&a.forEach(t=>{null!==t&&s.push(t)})}};void 0===r||void 0===i?t.toArray().forEach(a):mh["B"](t,new mh["g"](i.ds,r.sv)).forEach(a);try{const a=t.getAttributes(r);void 0!==r&&(Th(t._item,r)?Th(t._item,i)||(a.ychange=o?o("added",t._item.id):{type:"added"}):a.ychange=o?o("removed",t._item.id):{type:"removed"});const c=e.node(t.nodeName,a,s);return n.set(t,c),c}catch(c){return t.doc.transact(e=>{t._item.delete(e)},sh),n.delete(t),null}},Lh=(t,e,n,r,i,o)=>{const s=[],a=t.toDelta(r,i,o);try{for(let t=0;t<a.length;t++){const n=a[t],r=[];for(const t in n.attributes)r.push(e.mark(t,n.attributes[t]));s.push(e.text(n.insert,r))}}catch(c){return t.doc.transact(e=>{t._item.delete(e)},sh),null}return s},jh=(t,e)=>{const n=new mh["l"],r=t.map(t=>({insert:t.text,attributes:Qh(t.marks)}));return n.applyDelta(r),e.set(n,t),n},Ph=(t,e)=>{const n=new mh["j"](t.type.name);for(const r in t.attrs){const e=t.attrs[r];null!==e&&"ychange"!==r&&n.setAttribute(r,e)}return n.insert(0,$h(t).map(t=>zh(t,e))),e.set(n,t),n},zh=(t,e)=>t instanceof Array?jh(t,e):Ph(t,e),Uh=t=>"object"===typeof t&&null!==t,Hh=(t,e)=>{const n=Object.keys(t).filter(e=>null!==t[e]);let r=n.length===Object.keys(e).filter(t=>null!==e[t]).length;for(let i=0;i<n.length&&r;i++){const o=n[i],s=t[o],a=e[o];r="ychange"===o||s===a||Uh(s)&&Uh(a)&&Hh(s,a)}return r},$h=t=>{const e=t.content.content,n=[];for(let r=0;r<e.length;r++){const t=e[r];if(t.isText){const t=[];for(let n=e[r];r<e.length&&n.isText;n=e[++r])t.push(n);r--,n.push(t)}else n.push(t)}return n},Jh=(t,e)=>{const n=t.toDelta();return n.length===e.length&&n.every((t,n)=>t.insert===e[n].text&&hh["c"](t.attributes||{}).length===e[n].marks.length&&e[n].marks.every(e=>Hh(t.attributes[e.type.name]||{},e.attrs)))},Vh=(t,e)=>{if(t instanceof mh["j"]&&!(e instanceof Array)&&Xh(t,e)){const n=$h(e);return t._length===n.length&&Hh(t.getAttributes(),e.attrs)&&t.toArray().every((t,e)=>Vh(t,n[e]))}return t instanceof mh["l"]&&e instanceof Array&&Jh(t,e)},qh=(t,e)=>t===e||t instanceof Array&&e instanceof Array&&t.length===e.length&&t.every((t,n)=>e[n]===t),Gh=(t,e,n)=>{const r=t.toArray(),i=$h(e),o=i.length,s=r.length,a=uh["g"](s,o);let c=0,l=0,u=!1;for(;c<a;c++){const t=r[c],e=i[c];if(qh(n.get(t),e))u=!0;else if(!Vh(t,e))break}for(;c+l<a;l++){const t=r[s-l-1],e=i[o-l-1];if(qh(n.get(t),e))u=!0;else if(!Vh(t,e))break}return{equalityFactor:c+l,foundMappedChild:u}},Wh=t=>{let e="",n=t._start;const r={};while(null!==n)n.deleted||(n.countable&&n.content instanceof mh["b"]?e+=n.content.str:n.content instanceof mh["a"]&&(r[n.content.key]=null)),n=n.right;return{str:e,nAttrs:r}},Kh=(t,e,n)=>{n.set(t,e);const{nAttrs:r,str:i}=Wh(t),o=e.map(t=>({insert:t.text,attributes:Object.assign({},r,Qh(t.marks))})),{insert:s,remove:a,index:c}=fh(i,o.map(t=>t.insert).join(""));t.delete(c,a),t.insert(c,s),t.applyDelta(o.map(t=>({retain:t.insert.length,attributes:t.attributes})))},Qh=t=>{const e={};return t.forEach(t=>{"ychange"!==t.type.name&&(e[t.type.name]=t.attrs)}),e},Yh=(t,e,n,r)=>{if(e instanceof mh["j"]&&e.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.set(e,n),e instanceof mh["j"]){const t=e.getAttributes(),r=n.attrs;for(const n in r)null!==r[n]?t[n]!==r[n]&&"ychange"!==n&&e.setAttribute(n,r[n]):e.removeAttribute(n);for(const n in t)void 0===r[n]&&e.removeAttribute(n)}const i=$h(n),o=i.length,s=e.toArray(),a=s.length,c=uh["g"](o,a);let l=0,u=0;for(;l<c;l++){const t=s[l],e=i[l];if(!qh(r.get(t),e)){if(!Vh(t,e))break;r.set(t,e)}}for(;u+l+1<c;u++){const t=s[a-u-1],e=i[o-u-1];if(!qh(r.get(t),e)){if(!Vh(t,e))break;r.set(t,e)}}t.transact(()=>{while(a-l-u>0&&o-l-u>0){const n=s[l],c=i[l],h=s[a-u-1],d=i[o-u-1];if(n instanceof mh["l"]&&c instanceof Array)Jh(n,c)||Kh(n,c,r),l+=1;else{let i=n instanceof mh["j"]&&Xh(n,c),o=h instanceof mh["j"]&&Xh(h,d);if(i&&o){const t=Gh(n,c,r),e=Gh(h,d,r);t.foundMappedChild&&!e.foundMappedChild?o=!1:!t.foundMappedChild&&e.foundMappedChild||t.equalityFactor<e.equalityFactor?i=!1:o=!1}i?(Yh(t,n,c,r),l+=1):o?(Yh(t,h,d,r),u+=1):(e.delete(l,1),e.insert(l,[zh(c,r)]),l+=1)}}const n=a-l-u;if(n>0&&e.delete(l,n),l+u<o){const t=[];for(let e=l;e<o-u;e++)t.push(zh(i[e],r));e.insert(l,t)}},sh)},Xh=(t,e)=>!(e instanceof Array)&&t.nodeName===e.type.name,Zh=t=>{const e=ah.getState(t).undoManager;if(null!=e)return e.undo(),!0},td=t=>{const e=ah.getState(t).undoManager;if(null!=e)return e.redo(),!0},ed=new Set(["paragraph"]),nd=(t,e)=>!(t instanceof mh["e"])||!(t.content instanceof mh["c"])||!(t.content.type instanceof mh["h"]||t.content.type instanceof mh["j"]&&e.has(t.content.type.nodeName))||0===t.content.type._length,rd=({protectedNodes:t=ed,trackedOrigins:e=[],undoManager:n=null}={})=>new Qt["d"]({key:ah,state:{init:(r,i)=>{const o=sh.getState(i),s=n||new mh["i"](o.type,{trackedOrigins:new Set([sh].concat(e)),deleteFilter:e=>nd(e,t)});return{undoManager:s,prevSel:null,hasUndoOps:s.undoStack.length>0,hasRedoOps:s.redoStack.length>0}},apply:(t,e,n,r)=>{const i=sh.getState(r).binding,o=e.undoManager,s=o.undoStack.length>0,a=o.redoStack.length>0;return i?{undoManager:o,prevSel:Fh(i,n),hasUndoOps:s,hasRedoOps:a}:s!==e.hasUndoOps||a!==e.hasRedoOps?Object.assign({},e,{hasUndoOps:o.undoStack.length>0,hasRedoOps:o.redoStack.length>0}):e}},view:t=>{const e=sh.getState(t.state),n=ah.getState(t.state).undoManager;return n.on("stack-item-added",({stackItem:n})=>{const r=e.binding;r&&n.meta.set(r,ah.getState(t.state).prevSel)}),n.on("stack-item-popped",({stackItem:t})=>{const n=e.binding;n&&(n.beforeTransactionSelection=t.meta.get(n)||n.beforeTransactionSelection)}),{destroy:()=>{n.destroy()}}}}),id=D["b"].create({name:"collaboration",priority:1e3,addOptions(){return{document:null,field:"default",fragment:null}},onCreate(){this.editor.extensionManager.extensions.find(t=>"history"===t.name)&&console.warn('[tiptap warn]: "@tiptap/extension-collaboration" comes with its own history support and is not compatible with "@tiptap/extension-history".')},addCommands(){return{undo:()=>({tr:t,state:e,dispatch:n})=>{t.setMeta("preventDispatch",!0);const r=ah.getState(e).undoManager;return 0!==r.undoStack.length&&(!n||Zh(e))},redo:()=>({tr:t,state:e,dispatch:n})=>{t.setMeta("preventDispatch",!0);const r=ah.getState(e).undoManager;return 0!==r.redoStack.length&&(!n||td(e))}}},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo()}},addProseMirrorPlugins(){const t=this.options.fragment?this.options.fragment:this.options.document.getXmlFragment(this.options.field);return[Oh(t),rd()]}});n("f248");const od=t=>{const e=document.createElement("span");e.classList.add("ProseMirror-yjs-cursor"),e.setAttribute("style","border-color: "+t.color);const n=document.createElement("div");return n.setAttribute("style","background-color: "+t.color),n.insertBefore(document.createTextNode(t.name),null),e.insertBefore(n,null),e},sd=/^#[0-9a-fA-F]{6}$/,ad=(t,e,n)=>{const r=sh.getState(t),i=r.doc,o=[];return null!=r.snapshot||null!=r.prevSnapshot||null===r.binding?Ee["b"].create(t.doc,[]):(e.getStates().forEach((e,s)=>{if(s!==i.clientID&&null!=e.cursor){const a=e.user||{};null==a.color?a.color="#ffa500":sd.test(a.color)||console.warn("A user uses an unsupported color format",a),null==a.name&&(a.name="User: "+s);let c=kh(i,r.type,mh["r"](e.cursor.anchor),r.binding.mapping),l=kh(i,r.type,mh["r"](e.cursor.head),r.binding.mapping);if(null!==c&&null!==l){const e=uh["f"](t.doc.content.size-1,0);c=uh["g"](c,e),l=uh["g"](l,e),o.push(Ee["a"].widget(l,()=>n(a),{key:s+"",side:10}));const r=uh["g"](c,l),i=uh["f"](c,l);o.push(Ee["a"].inline(r,i,{style:`background-color: ${a.color}70`},{inclusiveEnd:!0,inclusiveStart:!1}))}}}),Ee["b"].create(t.doc,o))},cd=(t,{cursorBuilder:e=od,getSelection:n=(t=>t.selection)}={},r="cursor")=>new Qt["d"]({key:ch,state:{init(n,r){return ad(r,t,e)},apply(n,r,i,o){const s=sh.getState(o),a=n.getMeta(ch);return s&&s.isChangeOrigin||a&&a.awarenessUpdated?ad(o,t,e):r.map(n.mapping,n.doc)}},props:{decorations:t=>ch.getState(t)},view:e=>{const i=()=>{e.docView&&Ah(e,ch,{awarenessUpdated:!0})},o=()=>{const i=sh.getState(e.state),o=t.getLocalState()||{};if(e.hasFocus()&&null!==i.binding){const s=n(e.state),a=Dh(s.anchor,i.type,i.binding.mapping),c=Dh(s.head,i.type,i.binding.mapping);null!=o.cursor&&mh["n"](mh["r"](o.cursor.anchor),a)&&mh["n"](mh["r"](o.cursor.head),c)||t.setLocalStateField(r,{anchor:a,head:c})}else null!=o.cursor&&null!==kh(i.doc,i.type,mh["r"](o.cursor.anchor),i.binding.mapping)&&t.setLocalStateField(r,null)};return t.on("change",i),e.dom.addEventListener("focusin",o),e.dom.addEventListener("focusout",o),{update:o,destroy:()=>{e.dom.removeEventListener("focusin",o),e.dom.removeEventListener("focusout",o),t.off("change",i),t.setLocalStateField(r,null)}}}}),ld=t=>Array.from(t.entries()).map(([t,e])=>({clientId:t,...e.user})),ud=()=>null,hd=D["b"].create({name:"collaborationCursor",addOptions(){return{provider:null,user:{name:null,color:null},render:t=>{const e=document.createElement("span");e.classList.add("collaboration-cursor__caret"),e.setAttribute("style","border-color: "+t.color);const n=document.createElement("div");return n.classList.add("collaboration-cursor__label"),n.setAttribute("style","background-color: "+t.color),n.insertBefore(document.createTextNode(t.name),null),e.insertBefore(n,null),e},onUpdate:ud}},onCreate(){this.options.onUpdate!==ud&&console.warn('[tiptap warn]: DEPRECATED: The "onUpdate" option is deprecated. Please use `editor.storage.collaborationCursor.users` instead. Read more: https://tiptap.dev/api/extensions/collaboration-cursor')},addStorage(){return{users:[]}},addCommands(){return{updateUser:t=>()=>(this.options.user=t,this.options.provider.awareness.setLocalStateField("user",this.options.user),!0),user:t=>({editor:e})=>(console.warn('[tiptap warn]: DEPRECATED: The "user" command is deprecated. Please use "updateUser" instead. Read more: https://tiptap.dev/api/extensions/collaboration-cursor'),e.commands.updateUser(t))}},addProseMirrorPlugins(){return[cd((()=>(this.options.provider.awareness.setLocalStateField("user",this.options.user),this.storage.users=ld(this.options.provider.awareness.states),this.options.provider.awareness.on("update",()=>{this.storage.users=ld(this.options.provider.awareness.states)}),this.options.provider.awareness))(),{cursorBuilder:this.options.render})]}}),dd=D["b"].create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>t.style.color.replace(/['"]+/g,""),renderHTML:t=>t.color?{style:"color: "+t.color}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}});var pd=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tiptap-toolbar"},[n("div",{staticClass:"tiptap-tool-group"},[n("b-dropdown",{staticClass:"ml-2",attrs:{size:"sm",variant:"outline-secondary",text:"Heading"}},[n("b-dropdown-item",{attrs:{active:t.isActive({command:"paragraph"})},on:{click:function(e){return t.clickTool({command:"paragraph"})}}},[t._v(" Normal ")]),n("b-dropdown-divider"),t._l(t.headings,(function(e,r){return n("b-dropdown-item",{key:r,attrs:{active:t.isActiveHeading(e)},on:{click:function(n){return t.clickHeading(e)}}},[t._v(" Heading "+t._s(e)+" ")])}))],2)],1),t._l(t.toolGroups,(function(e,r){return n("div",{key:r,staticClass:"tiptap-tool-group"},t._l(e.tools,(function(e,r){return n("button",{key:r,staticClass:"tiptap-tool",class:{active:t.isActive(e)},attrs:{disabled:!t.editing,title:e.tooltip},on:{click:function(n){return t.clickTool(e)}}},[n("span",{staticClass:"material-icons"},[t._v(" "+t._s(e.icon)+" ")])])})),0)})),n("div",{staticClass:"tiptap-tool-group"},[n("b-dropdown",{attrs:{size:"sm",variant:"outline-secondary",text:"Download"}},[n("b-dropdown-item",{on:{click:t.downloadPdf}},[t._v("Download PDF")]),n("b-dropdown-item",{on:{click:t.downloadDoc}},[t._v("Download DOC")])],1)],1)],2)},fd=[];const gd="Undo",md="Redo",vd="bold",yd="underline",bd="italic",wd="strike",Ad="blockquote",Dd="Indent",Cd="Outdent",kd="bulletList",Ed="orderedList",Sd="horizontalRule",xd="Full screen",Td="link",_d="left",Md="center",Od="right",Nd="justify",Fd="heading",Id="paragraph",Rd={HEADING:Fd,PARAGRAPH:Id,BOLD:vd,UNDERLINE:yd,ITALIC:bd,STRIKE:wd,BLOCKQUOTE:Ad,UNDO:gd,REDO:md,INDENT:Dd,OUTDENT:Cd,BULLET_LIST:kd,ORDERED_LIST:Ed,HORIZONTAL_RULE:Sd,FULL_SCREEN:xd,LINK:Td,TEXT_ALIGN_LEFT:_d,TEXT_ALIGN_CENTER:Md,TEXT_ALIGN_RIGHT:Od,TEXT_ALIGN_JUSTIFY:Nd};var Bd=Rd;const Ld=[{command:Bd.BOLD,icon:"format_bold",tooltip:"Bold"},{command:Bd.UNDERLINE,icon:"format_underlined",tooltip:"Underline"},{command:Bd.ITALIC,icon:"format_italic",tooltip:"Italic"},{command:Bd.STRIKE,icon:"format_strikethrough",tooltip:"Strike through"},{command:Bd.BLOCKQUOTE,icon:"format_quote",tooltip:"Block quote"}],jd=[{command:Bd.UNDO,icon:"undo",tooltip:"Undo"},{command:Bd.REDO,icon:"redo",tooltip:"Redo"}],Pd=[{command:Bd.BULLET_LIST,icon:"format_list_bulleted",tooltip:"Bullet List"},{command:Bd.ORDERED_LIST,icon:"format_list_numbered",tooltip:"Ordered List"}],zd=[{command:Bd.HORIZONTAL_RULE,icon:"horizontal_rule",tooltip:"Horizontal Rule"},{command:Bd.LINK,icon:"link",tooltip:"Link"}],Ud=[{command:Bd.TEXT_ALIGN_LEFT,icon:"format_align_left",tooltip:"Left"},{command:Bd.TEXT_ALIGN_CENTER,icon:"format_align_center",tooltip:"Center"},{command:Bd.TEXT_ALIGN_RIGHT,icon:"format_align_right",tooltip:"Right"},{command:Bd.TEXT_ALIGN_JUSTIFY,icon:"format_align_justify",tooltip:"Justify"}],Hd=[{name:"History tools",tools:jd},{name:"Format tools",tools:Ld},{name:"Text Align tools",tools:Ud},{name:"List tools",tools:Pd},{name:"Other tools",tools:zd}];var $d=Hd,Jd={name:"TiptapToolbar",props:{editor:{require:!0,default:null},editing:{require:!0,default:!0}},data(){return{toolGroups:$d,headings:[1,2,3,4,5,6]}},methods:{downloadDoc(){this.$emit("downloadDoc")},downloadDocx(){this.$emit("downloadDocx")},downloadPdf(){this.$emit("downloadPdf")},clickHeading(t){const e=this.editor.chain().focus();e.toggleHeading({level:t}).run()},clickTool(t){const e=this.editor.chain().focus();switch(t.command){case Bd.PARAGRAPH:return void e.setParagraph().run();case Bd.BOLD:return void e.toggleBold().run();case Bd.UNDERLINE:return void e.toggleUnderline().run();case Bd.ITALIC:return void e.toggleItalic().run();case Bd.STRIKE:return void e.toggleStrike().run();case Bd.BLOCKQUOTE:return void e.toggleBlockquote().run();case Bd.TEXT_ALIGN_LEFT:case Bd.TEXT_ALIGN_RIGHT:case Bd.TEXT_ALIGN_CENTER:case Bd.TEXT_ALIGN_JUSTIFY:return void e.setTextAlign(t.command).run();case Bd.UNDO:return void e.undo().run();case Bd.REDO:return void e.redo().run();case Bd.BULLET_LIST:return void e.toggleBulletList().run();case Bd.ORDERED_LIST:return void e.toggleOrderedList().run();case Bd.HORIZONTAL_RULE:return void e.setHorizontalRule().run();case Bd.LINK:if(this.editor.isActive(t.command))e.unsetLink().run();else{const t=window.prompt("URL");e.extendMarkRange("link").setLink({href:t}).run()}return;default:return}},isActive(t){switch(t.command){case Bd.UNDO:return this.editor.can().undo();case Bd.REDO:return this.editor.can().redo();case Bd.TEXT_ALIGN_LEFT:case Bd.TEXT_ALIGN_RIGHT:case Bd.TEXT_ALIGN_CENTER:case Bd.TEXT_ALIGN_JUSTIFY:return this.editor.isActive({textAlign:t.command});default:return this.editor.isActive(t.command)}},isActiveHeading(t){return this.editor.isActive("heading",{level:t})}}},Vd=Jd,qd=Object(d["a"])(Vd,pd,fd,!1,null,null,null),Gd=qd.exports,Wd=n("2e30"),Kd=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"collaborators"},t._l(t.collaborators,(function(e,i){return r("div",{key:i,staticClass:"collaborator-item"},[r("img",{attrs:{src:n("b8cb"),alt:e.name}}),r("div",{staticClass:"name"},[t._v(t._s(t.getFirstName(e.name)))])])})),0)},Qd=[],Yd={name:"Collaborators",props:{collaborators:{require:!1,default:[]}},methods:{getFirstName(t){return t?t.split(" ")[0]:""}}},Xd=Yd,Zd=(n("28e1"),Object(d["a"])(Xd,Kd,Qd,!1,null,"bf57a9ea",null)),tp=Zd.exports,ep=n("5acc"),np={name:"TiptapRichEditor",components:{EditorContent:A["c"],TiptapToolbar:Gd,BubbleMenu:A["a"],Collaborators:tp},props:{value:{required:!0,default:""},docId:String,title:String,cites:Array,ownerId:String,baseData:Object},computed:{...Object(v["c"])({currentUser:"getCurrentUser"}),isOwnArticle(){return this.ownerId===this.currentUser.userId},fullContent(){let t=`\n        <head><meta charset='utf-8'><title>${this.title}</title></head>\n        <body>\n          <h1>${this.title}</h1>\n          ${this.value}\n        </body></html>\n      `;return t},isEditable(){return this.editor.options.editable},selectedText(){try{const{from:t,to:e}=this.editor.view.state.selection,n=this.editor.view.state.doc.textBetween(t,e," ");return n||""}catch(t){return""}}},data(){return{loading:!1,saving:!1,editor:null,users:[],editing:!0,status:"connecting",socketProvider:null,isChanged:!1,isSelected:!1,expanding:!1,rewriting:!1,shortening:!1,writing:!1,show:!1}},methods:{...Object(v["b"])({updateArticle:"articleStore/updateArticle"}),selectEvent(t){this.editor?this.isSelected=!this.editor.view.state.selection.empty:this.isSelected=!1},async refreshArticle(){if(this.$root.$emit("bv::hide::tooltip"),!this.loading){this.loading=!0;try{const{data:{article:t}}=await Object(a["a"])().post(y["a"],this.baseData);this.editor.commands.setContent(t,!1),this.isChanged=!0}catch(t){}this.loading=!1}},async saveArticle(){if(this.$root.$emit("bv::hide::tooltip"),!this.saving){this.saving=!0;try{await this.updateArticle({_id:this.docId,article:{article:this.value,cites:this.cites},toDatabase:!0}),this.isChanged=!1}catch(t){}this.loading=!1}},async expandArticle(){try{this.expanding=!0;const{data:{text:t}}=await Object(a["a"])().post("/doc/rewrite-article",{type:"expand",text:this.selectedText}),e=this.selectedText+"<p><strong>"+t+"</strong></p>";this.editor.commands.insertContent(e).run(),this.isChanged=!0}catch(t){}this.expanding=!1},async rewriteArticle(){try{this.rewriting=!0;const{data:{text:t}}=await Object(a["a"])().post("/doc/rewrite-article",{type:"rewrite",text:this.selectedText}),e=t;this.editor.commands.insertContent(e).run(),this.isChanged=!0}catch(t){}this.rewriting=!1},async shortenArticle(){try{this.shortening=!0;const{data:{text:t}}=await Object(a["a"])().post("/doc/rewrite-article",{type:"shorten",text:this.selectedText}),e=t;this.editor.commands.insertContent(e).run(),this.isChanged=!0}catch(t){}this.shortening=!1},async free_write(){try{this.writing=!0;const{data:{results:t}}=await Object(a["a"])().post("/doc/generate-article-free",{description:this.selectedText,type:"free-writing",source_lang:this.$store.state.input_language,target_lang:this.$store.state.output_language}),e=0!=t.length?t[0].text:"";this.editor.commands.insertContent(this.selectedText+"\n"+e).run(),this.isChanged=!0}catch(t){}this.writing=!1},addNewCollaborator(){this.$root.$emit("bv::hide::tooltip"),this.$root.$emit("selectArticle",this.docId),this.$bvModal.show("collaborator-modal")},toggleEditArticle(){this.editing=!this.editing,this.editor.setEditable(this.editing)},addTextToEditor({text:t,docId:e}){e===this.docId&&this.editor&&this.editor.commands.insertContent(t).run()},downloadDoc(){let t="<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>",e=t+this.fullContent,n="data:application/vnd.ms-word;charset=utf-8,"+encodeURIComponent(e);this.download(n)},downloadDocx(){Object(a["a"])().post("/doc/download-docx",{title:this.title,content:this.fullContent},{responseType:"arraybuffer",headers:{Accept:"application/docx"}}).then(t=>{const e=new Blob([t.data],{type:"application/docx"}),n=document.createElement("a");n.href=window.URL.createObjectURL(e),n.download=this.title+".docx",n.click()})},downloadPdf(){Object(a["a"])().post("/doc/download-pdf",{title:this.title,content:this.fullContent},{responseType:"arraybuffer",headers:{Accept:"application/pdf"}}).then(t=>{const e=new Blob([t.data],{type:"application/pdf"}),n=document.createElement("a");n.href=window.URL.createObjectURL(e),n.download=this.title+".pdf",n.click()})},download(t){var e=document.createElement("a");document.body.appendChild(e),e.href=t,e.download=this.title.trim()+".doc",e.click(),document.body.removeChild(e)},copyToClipboard(){Object(c["a"])(this.selectedText)},addTextToNotes(){this.$root.$emit("addToNotes",{slug:"",text:this.selectedText,category:ep["e"].FIRSTDRAFT,authors:"",url:"",year:"",baseData:{type:ep["e"].FIRSTDRAFT},publishedAt:(new Date).toLocaleDateString()})},toggle_popover(){this.$refs.popover.$emit("open")}},watch:{value(t){const e=this.editor.getHTML()===t;e||this.editor.commands.setContent(t,!1)}},created(){this.$root.$on("addTextToEditor",this.addTextToEditor),document.addEventListener("mouseup",this.selectEvent),document.addEventListener("touchend",this.selectEvent)},mounted(){const t=new mh["d"];this.socketProvider=new Wd["a"](Object({NODE_ENV:"production",VUE_APP_API_URL:"http://localhost:3001",VUE_APP_TINY_API_KEY:"kefffhm4cjnw3ct3tuopcsd6dyfuprfcfo1giwnzv7hj3v25",VUE_APP_CODOX_TINYMCE_API_KEY:"2242e59f-ca56-4163-ab05-8c22e6bf2780",VUE_APP_INTERCOM_APP_ID:"rqykcrq0",VUE_APP_HOTJAR_SITE_ID:"2403607",VUE_APP_GOOGLE_ANALYTICS_ID:"G-1KNG2RNTQ6",VUE_APP_GTM_ID:"GTM-PMZND6X",VUE_APP_AMPLITUDE_API_KEY:"d092d4bbc004a77f4608a3dc8b2f43e8",VUE_APP_STRIPE_TEST_PUBLISHABLE_KEY:"pk_test_51AL0N7BGZzvzQJFhpgU7E4loSdF3YrT1qpXCIR2sHm1UpOcjWnCAgiSxA17eHaOllCubpuyH6Dc6Y24nKPPpOaRp00ZTWi04Uq",VUE_APP_STRIPE_LIVE_PUBLISHABLE_KEY:"pk_live_51AL0N7BGZzvzQJFhVVCvZIKVchVPlMej91WC6XOcolkYe5s6xUk2UEk6gPFBugOEdhHcjhpQ8Cm40C6FkSdv2Wvn00nckwvDYk",BASE_URL:"/"}).VUE_APP_TIPTAP_SOCKET,this.docId,t),this.socketProvider.on("status",t=>{this.status=t.status}),this.editor=new A["b"]({extensions:[te,ee["a"],ne["a"],re["a"],ie["a"],oe["a"],ae,ue["a"].configure({levels:[1,2,3,4,5,6]}),he["a"],de["a"],pe["a"],fe["a"],ge["a"],me["a"],ve["a"],ye["a"],be["a"],we["a"],Ae["b"],De["a"],Go,Wo,Ko,Qo,Ja,Va.configure({placeholder:"My Custom Placeholder",emptyEditorClass:"is-editor-empty"}),qa,Wa,Ka.configure({types:["heading","paragraph"]}),tc,rc,Ec,Sc,xc,Tc,_c,Mc,ih,oh,id.configure({document:t}),hd.configure({provider:this.socketProvider,user:{name:this.currentUser.username,color:"#f783ac"},onUpdate:t=>{this.users=t||[]}}),dd],editable:this.editable,content:this.value,onUpdate:()=>{const t=this.editor.getHTML();this.$emit("input",t),this.$emit("changed",t),this.isChanged=!0}})},beforeDestroy(){this.editor.destroy(),this.socketProvider&&this.socketProvider.destroy(),this.$root.$off("addTextToEditor",this.addTextToEditor),document.removeEventListener("mouseup",this.selectEvent),document.removeEventListener("touchend",this.selectEvent)}},rp=np,ip=(n("aa25"),Object(d["a"])(rp,b,w,!1,null,"d6eff0d4",null)),op=ip.exports,sp=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{id:"collaborator-modal","hide-footer":"",title:"Add Collaborator"}},[n("b-form",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("b-form-group",{staticClass:"required",attrs:{label:"Collaborator Name"}},[n("b-form-input",{attrs:{placeholder:"Enter Collaborator Name"},model:{value:t.form.fullName,callback:function(e){t.$set(t.form,"fullName",e)},expression:"form.fullName"}})],1)],1),n("div",{staticClass:"col-12"},[n("b-form-group",{staticClass:"required",attrs:{label:"Collaborator Email"}},[n("b-form-input",{attrs:{type:"email",placeholder:"Enter Collaborator Email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)],1)]),n("b-alert",{attrs:{variant:"danger",show:!!t.errMsg}},[t._v(" "+t._s(t.errMsg)+" ")]),n("div",{staticClass:"d-flex justify-content-center"},[n("b-button",{staticClass:"mt-3",attrs:{pill:"",size:"lg",variant:"danger",disabled:t.loading||!t.form.fullName||!t.form.email},on:{click:t.inviteCollaborator}},[t.loading?n("b-spinner",{staticClass:"mr-2",attrs:{small:"",label:"Spinning"}}):t._e(),t._v(" SEND INVITATION")],1)],1)],1)],1)},ap=[],cp=n("a743"),lp={name:"AddCollaboratorModal",components:{},data(){return{form:{fullName:"",email:""},errMsg:"",loading:!1,show:!0,articleId:""}},methods:{async inviteCollaborator(){this.loading=!0,this.errMsg="";try{await Object(a["a"])().post("/doc/invite-collaborator",{...this.form,articleId:this.articleId}),this.onReset(),this.$bvModal.hide("collaborator-modal")}catch(t){this.errMsg=new Error(t).message}this.loading=!1},onReset(){this.form.fullName="",this.form.email="",this.show=!1,this.$nextTick(()=>{this.show=!0})},selectArticle(t){this.articleId=t}},computed:{isLetterOrMemo:function(){return this.form.documentType===cp["a"].LETTER||this.form.documentType===cp["a"].MEMO}},created(){this.$root.$on("selectArticle",this.selectArticle)},beforeDestroy(){this.$root.$off("selectArticle",this.selectArticle)}},up=lp,hp=(n("9fba"),Object(d["a"])(up,sp,ap,!1,null,"7258f1fd",null)),dp=hp.exports,pp={name:"ArticleEditor",data(){return{editings:[],loadings:[],selectedText:"",position:{left:0,top:0},show:!1,timer:null,selectedTab:0}},components:{TiptapRichEditor:op,AddCollaboratorModal:dp},methods:{...Object(v["b"])({addArticle:"articleStore/addArticle",updateArticle:"articleStore/updateArticle",removeArticle:"articleStore/removeArticle",changeCurrentArticleIdx:"articleStore/changeCurrentArticleIdx",addNewEmptyArticle:"articleStore/addNewEmptyArticle"}),addGeneratedArticle(t){this.addArticle({text:t.text,baseData:t.baseData,_id:this.articles.length.toString(),cites:[],ownerId:null})},addNewArticle(){this.addNewEmptyArticle()},removeArticleFromList(t){this.$bvModal.msgBoxConfirm("Do you want to delete this item?",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",cancelVariant:"primary",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then(e=>{e&&this.removeArticle(t)}).catch(t=>{})},isLoading(t){return this.loadings.includes(t)},toggleLoading(t){const e=this.loadings.indexOf(t);e>=0?this.loadings.splice(e,1):this.loadings.push(t)},changedEventHandler(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.saveArticle()},1500)},isEditing(t){return this.editings.includes(t)},toggleEditing(t){const e=this.editings.indexOf(t);e>=0?this.editings.splice(e,1):this.editings.push(t)},async refreshArticle(t){if(!this.isLoading(t)){this.toggleLoading(t);try{const{data:{article:e}}=await Object(a["a"])().post(y["a"],this.articles[t].baseData);this.updateArticle({id:t,article:{article:e,cites:[]}})}catch(e){}this.toggleLoading(t)}},saveArticle(){this.updateArticle({id:this.currentArticleIdx,article:this.articles[this.currentArticleIdx]})},saveArticleToDatabase(){this.isChanged(this.currentArticleIdx)&&this.updateArticle({id:this.currentArticleIdx,article:this.articles[this.currentArticleIdx],toDatabase:!0})},downloadArticle(t){const e="<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:v='urn:schemas-microsoft-com:vml' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>",n=this.articles[t].baseData.title.trim(),r=`\n        <head><meta charset='utf-8'><title>${n}</title></head>\n        <body>\n          <h1>${n}</h1>\n          ${this.articles[t].text}\n        </body></html>\n      `,i=e+r,o=new Blob(["\ufeff",i],{type:"application/msword"}),s="data:application/vnd.ms-word;charset=utf-8,"+encodeURIComponent(i);this.download(s,o,n)},download(t,e,n){if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(e,n+".doc");else{var r=document.createElement("a");document.body.appendChild(r),r.href=t,r.download=n+".doc",r.click(),document.body.removeChild(r)}},toggleEditArticle(t){this.isEditing(t)&&this.saveArticle(t),this.toggleEditing(t)},addArticleToDocument(t){if(this.articles.length<=0)return;let e="";if(t.url){const n=this.articles[this.currentArticleIdx].cites.length+1,r=`<p>${t.text}<sup><a href="${t.url}" target="_blank">[${n}]</a></sup></p>`;e=r,this.articles[this.currentArticleIdx].cites.push(t)}else e=`<p>${t.text}</p>`;this.$root.$emit("addTextToEditor",{text:e,docId:this.articles[this.currentArticleIdx]._id})},add_text_to_editor(t){this.$root.$emit("addTextToEditor",{text:t,docId:this.articles[this.currentArticleIdx]._id})}},computed:{...Object(v["c"])({articles:"articleStore/getArticles",currentArticleIdx:"articleStore/getCurrentArticleIdx"}),selectedArticleId(){return this.articles.length>0&&this.articles[this.currentArticleIdx]?this.articles[this.currentArticleIdx]._id:""}},created(){this.$root.$on("addToDocument",this.addArticleToDocument),this.$root.$on("add_text_to_editor",this.add_text_to_editor)},beforeDestroy(){this.$root.$off("addToDocument",this.addArticleToDocument),this.$root.$off("add_text_to_editor",this.add_text_to_editor)},watch:{selectedTab(){this.changeCurrentArticleIdx(this.selectedTab)}}},fp=pp,gp=(n("3650"),Object(d["a"])(fp,g,m,!1,null,"2f2e8dcf",null)),mp=gp.exports,vp=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"companion-tab fact-search-container custm-reserach"},[r("div",{staticClass:"searchbar-topp"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],attrs:{type:"text",placeholder:"Search verified sources"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),r("img",{attrs:{src:n("7a49")}})]),t.loading?r("div",{staticClass:"d-flex p-5 justify-content-center"},[r("b-spinner",{attrs:{variant:"primary",label:"Spinning"}})],1):t._e(),t._l(t.results,(function(e,n){return r("div",{key:n,staticClass:"item-info"},[r("div",{staticClass:"item-title"},[t._v(t._s(e.slug))]),r("div",{staticClass:"add-to-notes"},[r("article-actions",{on:{addToNotes:function(n){return t.addToNotes(e)},addToDocument:function(n){return t.addToDocument(e)},copyToClipboard:function(n){return t.copyToClipboard(e)}}})],1),r("div",{class:{truncated:!e.showMore}},[t._v(" "+t._s(e.showMore?e.description:t.$func.formttedSubstring(e.description,100))+" "),e.description!==t.$func.formttedSubstring(e.description,100)?r("span",{staticClass:"text-danger clickable",on:{click:function(e){return t.switchShowMore(n)}}},[t._v(" "+t._s(e.showMore?"less":"more"))]):t._e()]),r("div",{staticClass:"item-property"},[r("span",{staticClass:"label"},[t._v("Cite: ")]),r("a",{attrs:{href:e.url,target:"_blank"}},[t._v(t._s(e.url))])]),r("div",{staticClass:"item-property"},[r("span",{staticClass:"label"},[t._v("Authors: ")]),t._v(t._s(e.authors)+" ")]),r("div",{staticClass:"item-property"},[r("span",{staticClass:"label"},[t._v("Year: ")]),t._v(t._s(e.year)+" ")])])}))],2)},yp=[],bp={components:{ArticleActions:l["a"]},name:"FactSearchTab",props:{query:String},data(){return{abstract:null,results:[],loading:!1}},mounted(){this.loadData()},methods:{switchShowMore(t){this.results[t].showMore=!this.results[t].showMore},async loadData(){try{if(this.results=[],this.abstract=null,this.loading=!0,this.query){const{data:t}=await Object(a["a"])().post("/doc/google-info",{query:this.query||""});console.log(t),this.results=t.results.map(t=>({slug:t.title||"",description:t.description||t.clean_text||"",venue:t.clean_text,url:t.url||"",authors:t.author,year:t.date,showMore:!1}))}}catch(t){}this.loading=!1},addToDocument(t){this.$root.$emit("addToDocument",{slug:t.slug,text:t.description,authors:t.authors,url:t.url,year:t.year,publishedAt:(new Date).toLocaleDateString()})},addToNotes(t){this.$root.$emit("addToNotes",{slug:t.slug,category:"Article",text:t.description,authors:t.authors,url:t.url,year:t.year,publishedAt:(new Date).toLocaleDateString(),baseData:{type:"Article"}})},copyToClipboard(t){Object(c["a"])(t.description)}},watch:{query:function(){this.loadData()}}},wp=bp,Ap=Object(d["a"])(wp,vp,yp,!1,null,null,null),Dp=Ap.exports,Cp=n("b012"),kp=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form",[n("div",{staticClass:"row pt-4"},[n("div",{staticClass:"col-2 text-center pl-0 pr-0"},[n("span",{staticClass:"formcount-no"},[t._v("1")])]),n("div",{staticClass:"col-10"},[n("b-form-group",{attrs:{label:"Select Article Type"}},[n("b-form-select",{staticClass:"form-control",attrs:{options:t.documentTypes,required:""},model:{value:t.form.documentType,callback:function(e){t.$set(t.form,"documentType",e)},expression:"form.documentType"}})],1)],1),n("div",{staticClass:"col-2 text-center pl-0 pr-0"},[n("span",{staticClass:"formcount-no"},[t._v("2")])]),n("div",{staticClass:"col-10"},[n("b-form-group",{attrs:{label:"What is your article about?"}},[n("b-form-input",{attrs:{placeholder:"Give me an article about..."},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),n("div",{staticClass:"col-2 text-center pl-0 pr-0"},[n("span",{staticClass:"formcount-no"},[t._v("3")])]),n("div",{staticClass:"col-10"},[n("b-form-group",{attrs:{label:"Add Relevant Keywords"}},[n("b-form-tags",{attrs:{placeholder:"space, travel, mars, etc.","input-id":"tags-basic","remove-on-delete":"","tag-pills":"","tag-variant":"primary"},model:{value:t.form.keywords,callback:function(e){t.$set(t.form,"keywords",e)},expression:"form.keywords"}})],1)],1),n("div",{staticClass:"col-2 text-center pl-0 pr-0"},[n("span",{staticClass:"formcount-no"},[t._v("4")])]),n("div",{staticClass:"col-10"},[n("b-form-group",{attrs:{label:"Choose a Writing Style"}},[n("vue-typeahead-bootstrap",{attrs:{data:t.domains,placeholder:"Web address (e.g. forbes.com)"},model:{value:t.form.domain,callback:function(e){t.$set(t.form,"domain",e)},expression:"form.domain"}})],1)],1),n("div",{staticClass:"col-2 text-center pl-0 pr-0"}),n("div",{staticClass:"col-10"},[n("div",{staticClass:"gred-artile-btn"},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.advanced-option",modifiers:{"advanced-option":!0}}],staticClass:"d-flex align-items-center text-decoration-none mb-0",attrs:{variant:"link"}},[t._v(" Advanced Option "),n("span",{staticClass:"material-icons-outlined ml-3"},[t._v(" expand_more ")])]),n("b-collapse",{staticClass:"mt-3",attrs:{id:"advanced-option"}},[n("b-form-group",{staticClass:"pl-0 mb-0",attrs:{label:"Write in the style of..."}},[n("b-form-input",{attrs:{placeholder:"e.g. David Ogilvy"},model:{value:t.form.authors,callback:function(e){t.$set(t.form,"authors",e)},expression:"form.authors"}})],1)],1)],1)])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-2"}),n("div",{staticClass:"fluiddbtn col-10"},[n("b-button",{staticClass:"mt-3",attrs:{variant:"danger",pill:"",disabled:t.loading||!t.form.documentType||!t.form.title||!t.form.domain},on:{click:t.onSubmit}},[t.loading?n("b-spinner",{staticClass:"mr-2",attrs:{small:"",label:"Spinning"}}):t._e(),t._v(" GENERATE")],1),t.loading?n("div",{staticClass:"text-small mt-2 text-helper"},[t._v(" Making Magic✨ ")]):t._e()],1)])])},Ep=[],Sp=n("d726"),xp=n("9864");const Tp=["Acceptance Letter","Acknowledgement Letter","Apology Letter","Appeal Letter","Appreciation Letter","Appreciation Letter","Bank Transfer Letter","Billing Letter","Business Client Apology Letter","Cancellation Letter","Cease and Desist Letter","Certification Letter","Charity Letter","Claim Authorization Letter","Claim Letter","Collection Letter","College Acceptance Letter","Complaint Letter","Condolence Letter","Congratulations Letter","Contractual Appointment Letter","Cover Letter","Credit Letter","Criticism Letter","Deceased Estate Letter","Delay Apology Letter","Disciplinary Appeal Letter","Dismissal Letter","Dispute Letter","Distributor Announcement Letter","Document Collection Authorization Letter","Donation Letter","Endorsement Letter","Farewell Letter","Financial Appeal Letter","Follow Up Letter","Friendship Letter","Fundraising Letter","Grievance Letter","Health Insurance Appeal Letter","Inquiry Letter","Internal Audit Letter","Internship Acceptance Letter","Internship Letter","Interview Acceptance Letter","Interview Letter","Introduction Letter","Invitation Letter","Letter of Agreement","Letter of Intent","Marital Dissolution Agreement Letter","Marketing Letter","Medical Authorization Letter","Offer Announcement Letter","Operating Agreement Letter","Part-time Appointment Letter","Partnership Agreement Letter","Permanent Job Appointment Letter","Permission Letter","Personal Loan Letter","Product Complaint Letter","Promotion Letter","Property Tax Appeal Letter","Recommendation Letter","Renewal Letter","Request Letter","Request Letter","Restoration Letter","Retirement Announcement Letter","Retirement Letter","Sales Announcement Letter","Sales Appointment Letter","Sales Letter","Scholarship Acceptance Letter","Service Agreement Letter","Short Sales Authorization Letter","Sponsorship Letter","Temporary Appointment Letter","Termination Letter","Thank You Letter","Transfer Letter","Travel Authorization Letter","Travel Complaint Letter","Unemployment Appeal Letter","Warning Letter","Welcome Letter"];var _p=Tp,Mp={name:"GenerateForm",components:{VueTypeaheadBootstrap:Sp["a"]},data(){return{form:{date:"",documentType:cp["a"].BUSINESS,title:"",authors:"",domain:"",keywords:[]},isNew:!0,domains:xp["a"],loading:!1,documentTypes:[{value:"",text:"Select story type",disabled:!0},...cp["b"]],letterTypes:_p}},mounted(){this.loadCurrentArticleInfo()},methods:{...Object(v["b"])({generateArticle:"articleStore/generateArticle"}),async onSubmit(){this.loading=!0,this.form["source_lang"]=this.$store.state.input_language,this.form["target_lang"]=this.$store.state.output_language;try{const{data:{article:t}}=await Object(a["a"])().post("/doc/generate-article-draft",this.form);this.$emit("generated",{text:t,baseData:{...this.form}})}catch(t){console.log(t)}this.loading=!1},onReset(){this.form.date="",this.form.documentType="",this.form.title=null,this.form.authors="",this.form.domain="",this.isNew=!0},loadCurrentArticleInfo(){this.currentArticle?(this.isNew=!!this.currentArticle.isEmpty,this.form.documentType=this.currentArticle.baseData.documentType,this.form.title=this.currentArticle.isEmpty?"":this.currentArticle.baseData.title,this.form.authors=this.currentArticle.baseData.authors,this.form.domain=this.currentArticle.baseData.domain,this.form.keywords=this.currentArticle.baseData.keywords):this.onReset()}},computed:{...Object(v["c"])({currentArticle:"articleStore/currentArticleInfo",currentArticleIdx:"articleStore/getCurrentArticleIdx"}),isLetterOrMemo:function(){return this.form.documentType===cp["a"].LETTER||this.form.documentType===cp["a"].MEMO}},watch:{currentArticleIdx(){this.loadCurrentArticleInfo()}}},Op=Mp,Np=(n("0e0a"),Object(d["a"])(Op,kp,Ep,!1,null,"5e492118",null)),Fp=Np.exports,Ip=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"companion-tab academia-container custm-reserach"},[r("div",{staticClass:"searchbar-topp"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],attrs:{type:"text",placeholder:"Search verified sources"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),r("img",{attrs:{src:n("7a49")}})]),t.loading?r("div",{staticClass:"d-flex p-5 justify-content-center"},[r("b-spinner",{attrs:{variant:"primary",label:"Spinning"}})],1):t._e(),t._l(t.results,(function(e,n){return r("div",{key:n,staticClass:"item-info"},[r("div",{staticClass:"item-title"},[t._v(t._s(e.slug))]),r("div",{staticClass:"add-to-notes"},[r("article-actions",{on:{addToNotes:function(n){return t.addToNotes(e)},addToDocument:function(n){return t.addToDocument(e)},copyToClipboard:function(n){return t.copyToClipboard(e)}}})],1),r("div",{staticClass:"truncated"},[t._v(" "+t._s(e.showMore?e.description:t.$func.formttedSubstring(e.description,100))+" "),e.description!==t.$func.formttedSubstring(e.description,100)?r("span",{staticClass:"text-danger clickable",on:{click:function(e){return t.switchShowMore(n)}}},[t._v(" "+t._s(e.showMore?"less":"more"))]):t._e()]),r("div",{staticClass:"item-property"},[r("span",{staticClass:"label"},[t._v("Cite: ")]),r("a",{attrs:{href:e.url,target:"_blank"}},[t._v(t._s(e.url))])]),r("div",{staticClass:"item-property"},[r("span",{staticClass:"label"},[t._v("Authors: ")]),t._v(t._s(e.authors)+" ")]),r("div",{staticClass:"item-property"},[r("span",{staticClass:"label"},[t._v("Year: ")]),t._v(t._s(e.year)+" ")])])}))],2)},Rp=[],Bp={components:{ArticleActions:l["a"]},name:"SemanticScholarInfoTab",props:{query:String},data(){return{results:[],loading:!1}},mounted(){this.loadData()},methods:{switchShowMore(t){this.results[t].showMore=!this.results[t].showMore},addToDocument(t){this.$root.$emit("addToDocument",{slug:t.slug,text:t.description,authors:t.authors,url:t.url,year:t.year,publishedAt:(new Date).toLocaleDateString()})},addToNotes(t){this.$root.$emit("addToNotes",{slug:t.slug,category:"Article",text:t.description,authors:t.authors,url:t.url,year:t.year,publishedAt:(new Date).toLocaleDateString(),baseData:{type:"Article"}})},copyToClipboard(t){Object(c["a"])(t.description)},async loadData(){try{if(this.results=[],this.loading=!0,this.query){const{data:t}=await Object(a["a"])().post("/doc/semantic-scholar-academic-info",{query:this.query||""});t.forEach(t=>{this.results.push({id:t.paperId,slug:t.title||"",description:t.abstract||"",venue:t.venue,url:t.url||"",authors:t.authors.map(t=>t.name).join(", "),year:t.year,truncated:!1,showMore:!1})})}}catch(t){}this.loading=!1}},watch:{query:function(){this.loadData()}}},Lp=Bp,jp=Object(d["a"])(Lp,Ip,Rp,!1,null,"100f61b7",null),Pp=jp.exports,zp=n("6ca3"),Up=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-form",[r("div",{staticClass:"pt-3 smalltabs-article-compose genratetabs"},[r("b-tabs",{attrs:{"content-class":"mt-3"}},[r("b-tab",{attrs:{title:"Generate",active:0==t.tab_active}},[r("div",{staticClass:"col-12 mb-4",staticStyle:{position:"relative"}},[r("a",{staticClass:"addmore-notes",attrs:{href:""}},[r("img",{attrs:{src:n("6a93")}}),t._v(" "+t._s(t.form.available_tools[t.form.type]))]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.form.type,expression:"form.type"}],staticClass:"custom-selectview",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"type",e.target.multiple?n:n[0])}}},t._l(Object.keys(t.form.available_tools),(function(e,n){return r("option",{key:n,domProps:{value:e}},[t._v(" "+t._s(t.form.available_tools[e])+" ")])})),0)]),r("div",{staticClass:"col-12"},[r("b-form-group",{attrs:{label:"Choose a Tool. Describe what you want:"}},[r("b-form-textarea",{attrs:{rows:"6",placeholder:t.placeholders[t.form.type]},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),r("div",{staticClass:"text-right"},[r("small",{class:{"text-danger":t.form.description.length>=t.limit}},[t._v(t._s(t.form.description.length)+"/"+t._s(t.limit)+" characters")])])],1)],1),r("div",{staticClass:"col-12"},[r("div",{staticClass:"txtlenght"},[t.form.description.length>=60?r("p",[t._v(" Great Length ")]):t.form.description.length>=35?r("p",[t._v(" Fair Length ")]):t._e(),r("ul",[t.form.description.length>0?r("li"):t._e(),t.form.description.length>=35?r("li"):t._e(),t.form.description.length>=60?r("li"):t._e()])])]),r("div",{staticClass:"text-right flex-column fluiddbtn col-12"},[r("b-button",{staticClass:"mt-3",attrs:{variant:"danger",pill:"",disabled:t.loading||!t.form.description},on:{click:t.onSubmit}},[t.loading?r("b-spinner",{staticClass:"mr-2",attrs:{small:"",label:"Spinning"}}):t._e(),t._v(" GENERATE")],1),t.loading?r("div",{staticClass:"text-small mt-2 text-helper"},[t._v(" Making Magic✨ ")]):t._e()],1)]),r("b-tab",{attrs:{title:"See Results",active:0!=t.tab_active}},[r("div",{staticClass:"lastgen-wrap"},[r("div",{staticClass:"lastgen-data"},[r("h5",[t._v(" New paragraph "),r("img",{staticStyle:{cursor:"pointer"},attrs:{src:n("f84c")},on:{click:t.copy_result}})]),r("p",[t._v(" "+t._s(t.generated_results[t.result_index]?t.generated_results[t.result_index].text:"")+" ")])]),r("div",{staticClass:"pagination-lastgen"},[r("img",{staticStyle:{cursor:"pointer"},attrs:{src:n("94af")},on:{click:function(e){return t.result_index_changed(-1)}}}),r("ul",t._l(t.generated_results,(function(e,n){return r("li",{key:n,class:{active:n==t.result_index}})})),0),r("img",{staticStyle:{cursor:"pointer"},attrs:{src:n("8dc3")},on:{click:function(e){return t.result_index_changed(1)}}})]),r("div",{staticClass:"\n                            d-flex\n                            align-items-center\n                            flex-column\n                            fluuidd-btn\n                        "},[r("b-button",{staticClass:"mt-3",attrs:{pill:"",size:"lg",variant:"danger",disabled:0==t.generated_results.length},on:{click:t.add_to_editor}},[t._v(" Add to Document")])],1)])])],1)],1)])},Hp=[],$p=n("48f7"),Jp={name:"GenerateOutlineForm",data(){return{form:{date:"",type:$p["a"].BLOG_OUTLINE,available_tools:{...$p["b"]},description:""},isNew:!0,domains:xp["a"],loading:!1,letterTypes:_p,limit:1e3,generated_results:[],result_index:0,tab_active:0,placeholders:$p["c"]}},methods:{async onSubmit(){this.loading=!0,this.form["source_lang"]=this.$store.state.input_language,this.form["target_lang"]=this.$store.state.output_language;try{const{data:{results:t}}=await this.get_data();t.length&&(this.generated_results=t),this.result_index=0,this.tab_active=1}catch(t){}this.loading=!1},async get_data(){return await Object(a["a"])().post("/doc/generate-summary",this.form)},result_index_changed(t){-1===t?this.result_index=Math.max(0,this.result_index-1):1===t&&(this.result_index=Math.min(this.generated_results.length,this.result_index+1))},copy_result(){Object(c["a"])(this.generated_results[this.result_index].text)},add_to_editor(){this.$root.$emit("add_text_to_editor",this.generated_results[this.result_index].text)}}},Vp=Jp,qp=(n("5c57"),Object(d["a"])(Vp,Up,Hp,!1,null,"2e8adc50",null)),Gp=qp.exports,Wp={name:"Article",data(){return{articleTitle:"",selectedTab:0,searchString:"",baseData:"null",timer:null,tool_type:ep["e"].FIRSTDRAFT,project_id:null,selected_folder:"",file:null}},components:{NewsTab:f,ArticleEditor:mp,FactSearchTab:Dp,GenerateForm:Fp,SemanticScholarInfoTab:Pp,WritingToolbar:zp["a"],GenerateFreeFrom:Gp},methods:{...Object(v["b"])({setArticles:"articleStore/setArticles",addNewEmptyArticle:"articleStore/addNewEmptyArticle"}),searchTimeOut(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.searchData()},800)},searchData(){this.articleTitle=this.searchString},generatedArticle(t){this.$root.$emit("add_text_to_editor",t.text)}},mounted(){const t=localStorage.getItem(Cp["j"]);t||(localStorage.setItem(Cp["j"],"visited"),this.$swal.fire({position:"top-end",icon:"warning",title:"Heads Up",text:"Please verify dates, names, statistics, and events before publishing.",showConfirmButton:!0,timer:1e4}))},beforeMount(){this.$route.params&&(this.project_id=this.$route.params.project_id?this.$route.params.project_id:null,this.selected_folder=this.$route.params.selected_folder?this.$route.params.selected_folder:"",this.file=this.$route.params.file?this.$route.params.file:null),this.file?(this.project_id=this.file.project_id,this.baseData=this.file.base_data,this.save_flag="update",this.setArticles(this.file.contents)):this.addNewEmptyArticle()},computed:{...Object(v["c"])({articles:"articleStore/getArticles"})}},Kp=Wp,Qp=(n("6c41"),Object(d["a"])(Kp,r,i,!1,null,"516fd865",null));e["default"]=Qp.exports},"55a9":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return p})),n.d(e,"b",(function(){return g}));var r=n("dbda"),i=n("1b25"),o=n("7428");const s=0,a=1,c=2,l=(t,e)=>{r["n"](t,s);const n=o["v"](e);r["o"](t,n)},u=(t,e,n)=>{r["n"](t,a),r["o"](t,o["u"](e,n))},h=(t,e,n)=>u(e,n,i["l"](t)),d=(t,e,n)=>{try{o["m"](e,i["l"](t),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},p=(t,e)=>{r["n"](t,c),r["o"](t,e)},f=d,g=(t,e,n,r)=>{const o=i["k"](t);switch(o){case s:h(t,e,n);break;case a:d(t,n,r);break;case c:f(t,n,r);break;default:throw new Error("Unknown message type")}return o}},"5c57":function(t,e,n){"use strict";n("1458")},"5da9":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return c}));const r=String.fromCharCode,i=(String.fromCodePoint,t=>t.toLowerCase()),o=/^\s*/g,s=t=>t.replace(o,""),a=/([A-Z])/g,c=(t,e)=>s(t.replace(a,t=>`${e}${i(t)}`));"undefined"!==typeof TextEncoder&&new TextEncoder;let l="undefined"===typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});l&&1===l.decode(new Uint8Array).length&&(l=null)},"679d":function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"d",(function(){return u})),n.d(e,"c",(function(){return f})),n.d(e,"b",(function(){return m})),n.d(e,"e",(function(){return C}));var r=n("1d8c");const i=Symbol;var o=n("7749"),s=n("b6f5");JSON.stringify,JSON.parse;var a=n("2309"),c=(n("058a"),n("ca0e"),n("69a7"));n("2163");const l=i(),u=i(),h=i(),d=i(),p=i(),f=i(),g=i(),m=i(),v=i(),y={[l]:o["a"]("font-weight","bold"),[u]:o["a"]("font-weight","normal"),[h]:o["a"]("color","blue"),[p]:o["a"]("color","green"),[d]:o["a"]("color","grey"),[f]:o["a"]("color","red"),[g]:o["a"]("color","purple"),[m]:o["a"]("color","orange"),[v]:o["a"]("color","black")},b={[l]:"[1m",[u]:"[2m",[h]:"[34m",[p]:"[32m",[d]:"[37m",[f]:"[31m",[g]:"[35m",[m]:"[38;5;208m",[v]:"[0m"},w=t=>{const e=[],n=[],r=a["c"]();let i=[],o=0;for(;o<t.length;o++){const i=t[o],a=y[i];if(void 0!==a)r.set(a.left,a.right);else{if(i.constructor!==String&&i.constructor!==Number)break;{const t=s["e"](r);o>0||t.length>0?(e.push("%c"+i),n.push(t)):e.push(i)}}}for(o>0&&(i=n,i.unshift(e.join("")));o<t.length;o++){const e=t[o];e instanceof Symbol||i.push(e)}return i},A=t=>{const e=[],n=[];let r=0;for(;r<t.length;r++){const n=t[r],i=b[n];if(void 0!==i)e.push(i);else{if(n.constructor!==String&&n.constructor!==Number)break;e.push(n)}}for(r>0&&(e.push("[0m"),n.push(e.join("")));r<t.length;r++){const e=t[r];e instanceof Symbol||n.push(e)}return n},D=r["c"]?A:w,C=(...t)=>{console.log(...D(t)),k.forEach(e=>e.print(t))},k=new Set;c["a"]()},"69a7":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("ca0e");const r=Date.now},"69c1":function(t,e,n){},"6a93":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADkSURBVHgBtZJBDoIwEEVnEA1LFuxl2SXeAE+insAjcBWP4A3kBsYdy7InkZ1daGtbWlNItDXGnzTD9PfN0EkBftQs5BBJSJ5F2T6bZ21373rXwxAYBJzkZy4XlcS6YQ21fhQIAzyg1FHmet9XYNIZIIZWdZ8Wib7prCPCThflsBnST7C572jPynjogx2vNN5okBgIv/XQPSCESDHCVSisZIeYq4WIqRzONhRWit0EBR4FioosiCp98MHuH2hx5LUMtQQq5Hj2wYMtVaRFym7sOvGoD34VUDIva2lzlrAL7WkP/9YTWJ1/Xv1LUyAAAAAASUVORK5CYII="},"6c41":function(t,e,n){"use strict";n("69c1")},"6dde":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("dbda");var r=n("1b25");const i=0,o=(t,e,n)=>{switch(r["k"](t)){case i:n(e,r["j"](t))}}},"70ee":function(t,e,n){},7428:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return Nn})),n.d(e,"b",(function(){return jn})),n.d(e,"c",(function(){return Wn})),n.d(e,"d",(function(){return I})),n.d(e,"e",(function(){return tr})),n.d(e,"f",(function(){return mt})),n.d(e,"g",(function(){return kt})),n.d(e,"h",(function(){return cn})),n.d(e,"i",(function(){return Yt})),n.d(e,"j",(function(){return pn})),n.d(e,"k",(function(){return hn})),n.d(e,"l",(function(){return yn})),n.d(e,"m",(function(){return Q})),n.d(e,"n",(function(){return Ct})),n.d(e,"o",(function(){return Dt})),n.d(e,"p",(function(){return T})),n.d(e,"q",(function(){return pt})),n.d(e,"r",(function(){return vt})),n.d(e,"s",(function(){return At})),n.d(e,"t",(function(){return Et})),n.d(e,"u",(function(){return Z})),n.d(e,"v",(function(){return ot})),n.d(e,"w",(function(){return ft})),n.d(e,"x",(function(){return k})),n.d(e,"y",(function(){return gt})),n.d(e,"z",(function(){return D})),n.d(e,"A",(function(){return St})),n.d(e,"B",(function(){return ke}));var r=n("e6c4"),i=n("fca1"),o=n("ca0e"),s=n("2309"),a=n("dbda"),c=n("1b25"),l=n("c893"),u=n("9c2b"),h=n("d72c"),d=n("1e58"),p=n("c77f"),f=n("2163"),g=n("4aa6"),m=n("679d"),v=n("69a7"),y=n("4113"),b=n("1d2f");r["a"];class w{constructor(t,e){this.clock=t,this.len=e}}class A{constructor(){this.clients=new Map}}const D=(t,e,n)=>e.clients.forEach((e,r)=>{const i=t.doc.store.clients.get(r);for(let o=0;o<e.length;o++){const r=e[o];zt(t,i,r.clock,r.len,n)}}),C=(t,e)=>{let n=0,r=t.length-1;while(n<=r){const i=o["c"]((n+r)/2),s=t[i],a=s.clock;if(a<=e){if(e<a+s.len)return i;n=i+1}else r=i-1}return null},k=(t,e)=>{const n=t.clients.get(e.client);return void 0!==n&&null!==C(n,e.clock)},E=t=>{t.clients.forEach(t=>{let e,n;for(t.sort((t,e)=>t.clock-e.clock),e=1,n=1;e<t.length;e++){const r=t[n-1],i=t[e];r.clock+r.len>=i.clock?r.len=o["f"](r.len,i.clock+i.len-r.clock):(n<e&&(t[n]=i),n++)}t.length=n})},S=t=>{const e=new A;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,o)=>{if(!e.clients.has(o)){const s=r.slice();for(let e=n+1;e<t.length;e++)i["a"](s,t[e].clients.get(o)||[]);e.clients.set(o,s)}});return E(e),e},x=(t,e,n,r)=>{s["e"](t.clients,e,()=>[]).push(new w(n,r))},T=()=>new A,_=t=>{const e=T();return t.clients.forEach((t,n)=>{const r=[];for(let e=0;e<t.length;e++){const n=t[e];if(n.deleted){const i=n.id.clock;let o=n.length;if(e+1<t.length)for(let n=t[e+1];e+1<t.length&&n.deleted;n=t[1+ ++e])o+=n.length;r.push(new w(i,o))}}r.length>0&&e.clients.set(n,r)}),e},M=(t,e)=>{a["n"](t.restEncoder,e.clients.size),e.clients.forEach((e,n)=>{t.resetDsCurVal(),a["n"](t.restEncoder,n);const r=e.length;a["n"](t.restEncoder,r);for(let i=0;i<r;i++){const n=e[i];t.writeDsClock(n.clock),t.writeDsLen(n.len)}})},O=t=>{const e=new A,n=c["k"](t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const n=c["k"](t.restDecoder),r=c["k"](t.restDecoder);if(r>0){const i=s["e"](e.clients,n,()=>[]);for(let e=0;e<r;e++)i.push(new w(t.readDsClock(),t.readDsLen()))}}return e},N=(t,e,n)=>{const r=new A,i=c["k"](t.restDecoder);for(let o=0;o<i;o++){t.resetDsCurVal();const i=c["k"](t.restDecoder),o=c["k"](t.restDecoder),s=n.clients.get(i)||[],a=Ot(n,i);for(let n=0;n<o;n++){const n=t.readDsClock(),o=n+t.readDsLen();if(n<a){a<o&&x(r,i,a,o-a);let t=Ft(s,n),c=s[t];!c.deleted&&c.id.clock<n&&(s.splice(t+1,0,Xn(e,c,n-c.id.clock)),t++);while(t<s.length){if(c=s[t++],!(c.id.clock<o))break;c.deleted||(o<c.id.clock+c.length&&s.splice(t,0,Xn(e,c,o-c.id.clock)),c.delete(e))}}else x(r,i,n,o-n)}}if(r.clients.size>0){const t=new H;return a["n"](t.restEncoder,0),M(t,r),t.toUint8Array()}return null},F=l["b"];class I extends r["a"]{constructor({guid:t=l["c"](),collectionid:e=null,gc:n=!0,gcFilter:r=(()=>!0),meta:i=null,autoLoad:o=!1,shouldLoad:s=!0}={}){super(),this.gc=n,this.gcFilter=r,this.clientID=F(),this.guid=t,this.collectionid=e,this.share=new Map,this.store=new _t,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=s,this.autoLoad=o,this.meta=i,this.isLoaded=!1,this.whenLoaded=u["a"](t=>{this.on("load",()=>{this.isLoaded=!0,t(this)})})}load(){const t=this._item;null===t||this.shouldLoad||Wt(t.parent.doc,t=>{t.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Array.from(this.subdocs).map(t=>t.guid))}transact(t,e=null){Wt(this,t,e)}get(t,e=Ae){const n=s["e"](this.share,t,()=>{const t=new e;return t._integrate(this,null),t}),r=n.constructor;if(e!==Ae&&r!==e){if(r===Ae){const r=new e;r._map=n._map,n._map.forEach(t=>{for(;null!==t;t=t.left)t.parent=r}),r._start=n._start;for(let t=r._start;null!==t;t=t.right)t.parent=r;return r._length=n._length,this.share.set(t,r),r._integrate(this,null),r}throw new Error(`Type with the name ${t} has already been defined with a different constructor`)}return n}getArray(t=""){return this.get(t,Ue)}getText(t=""){return this.get(t,cn)}getMap(t=""){return this.get(t,Je)}getXmlFragment(t=""){return this.get(t,hn)}toJSON(){const t={};return this.share.forEach((e,n)=>{t[n]=e.toJSON()}),t}destroy(){i["c"](this.subdocs).forEach(t=>t.destroy());const t=this._item;if(null!==t){this._item=null;const e=t.content;e.doc=new I({guid:this.guid,...e.opts,shouldLoad:!1}),e.doc._item=t,Wt(t.parent.doc,n=>{const r=e.doc;t.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(t,e){super.on(t,e)}off(t,e){super.off(t,e)}}class R{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return c["k"](this.restDecoder)}readDsLen(){return c["k"](this.restDecoder)}}class B extends R{readLeftID(){return pt(c["k"](this.restDecoder),c["k"](this.restDecoder))}readRightID(){return pt(c["k"](this.restDecoder),c["k"](this.restDecoder))}readClient(){return c["k"](this.restDecoder)}readInfo(){return c["h"](this.restDecoder)}readString(){return c["j"](this.restDecoder)}readParentInfo(){return 1===c["k"](this.restDecoder)}readTypeRef(){return c["k"](this.restDecoder)}readLen(){return c["k"](this.restDecoder)}readAny(){return c["g"](this.restDecoder)}readBuf(){return h["a"](c["l"](this.restDecoder))}readJSON(){return JSON.parse(c["j"](this.restDecoder))}readKey(){return c["j"](this.restDecoder)}}class L{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=c["k"](this.restDecoder),this.dsCurrVal}readDsLen(){const t=c["k"](this.restDecoder)+1;return this.dsCurrVal+=t,t}}class j extends L{constructor(t){super(t),this.keys=[],c["k"](t),this.keyClockDecoder=new c["a"](c["l"](t)),this.clientDecoder=new c["d"](c["l"](t)),this.leftClockDecoder=new c["a"](c["l"](t)),this.rightClockDecoder=new c["a"](c["l"](t)),this.infoDecoder=new c["b"](c["l"](t),c["h"]),this.stringDecoder=new c["c"](c["l"](t)),this.parentInfoDecoder=new c["b"](c["l"](t),c["h"]),this.typeRefDecoder=new c["d"](c["l"](t)),this.lenDecoder=new c["d"](c["l"](t))}readLeftID(){return new ht(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new ht(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return 1===this.parentInfoDecoder.read()}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return c["g"](this.restDecoder)}readBuf(){return c["l"](this.restDecoder)}readJSON(){return c["g"](this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const t=this.stringDecoder.read();return this.keys.push(t),t}}}class P{constructor(){this.restEncoder=a["e"]()}toUint8Array(){return a["g"](this.restEncoder)}resetDsCurVal(){}writeDsClock(t){a["n"](this.restEncoder,t)}writeDsLen(t){a["n"](this.restEncoder,t)}}class z extends P{writeLeftID(t){a["n"](this.restEncoder,t.client),a["n"](this.restEncoder,t.clock)}writeRightID(t){a["n"](this.restEncoder,t.client),a["n"](this.restEncoder,t.clock)}writeClient(t){a["n"](this.restEncoder,t)}writeInfo(t){a["j"](this.restEncoder,t)}writeString(t){a["m"](this.restEncoder,t)}writeParentInfo(t){a["n"](this.restEncoder,t?1:0)}writeTypeRef(t){a["n"](this.restEncoder,t)}writeLen(t){a["n"](this.restEncoder,t)}writeAny(t){a["h"](this.restEncoder,t)}writeBuf(t){a["o"](this.restEncoder,t)}writeJSON(t){a["m"](this.restEncoder,JSON.stringify(t))}writeKey(t){a["m"](this.restEncoder,t)}}class U{constructor(){this.restEncoder=a["e"](),this.dsCurrVal=0}toUint8Array(){return a["g"](this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const e=t-this.dsCurrVal;this.dsCurrVal=t,a["n"](this.restEncoder,e)}writeDsLen(t){0===t&&d["c"](),a["n"](this.restEncoder,t-1),this.dsCurrVal+=t}}class H extends U{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new a["a"],this.clientEncoder=new a["d"],this.leftClockEncoder=new a["a"],this.rightClockEncoder=new a["a"],this.infoEncoder=new a["b"](a["j"]),this.stringEncoder=new a["c"],this.parentInfoEncoder=new a["b"](a["j"]),this.typeRefEncoder=new a["d"],this.lenEncoder=new a["d"]}toUint8Array(){const t=a["e"]();return a["n"](t,0),a["o"](t,this.keyClockEncoder.toUint8Array()),a["o"](t,this.clientEncoder.toUint8Array()),a["o"](t,this.leftClockEncoder.toUint8Array()),a["o"](t,this.rightClockEncoder.toUint8Array()),a["o"](t,a["g"](this.infoEncoder)),a["o"](t,this.stringEncoder.toUint8Array()),a["o"](t,a["g"](this.parentInfoEncoder)),a["o"](t,this.typeRefEncoder.toUint8Array()),a["o"](t,this.lenEncoder.toUint8Array()),a["k"](t,a["g"](this.restEncoder)),a["g"](t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){a["h"](this.restEncoder,t)}writeBuf(t){a["o"](this.restEncoder,t)}writeJSON(t){a["h"](this.restEncoder,t)}writeKey(t){const e=this.keyMap.get(t);void 0===e?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(this.keyClock++)}}const $=(t,e,n,r)=>{r=o["f"](r,e[0].id.clock);const i=Ft(e,r);a["n"](t.restEncoder,e.length-i),t.writeClient(n),a["n"](t.restEncoder,r);const s=e[i];s.write(t,r-s.id.clock);for(let o=i+1;o<e.length;o++)e[o].write(t,0)},J=(t,e,n)=>{const r=new Map;n.forEach((t,n)=>{Ot(e,n)>t&&r.set(n,t)}),Mt(e).forEach((t,e)=>{n.has(e)||r.set(e,0)}),a["n"](t.restEncoder,r.size),Array.from(r.entries()).sort((t,e)=>e[0]-t[0]).forEach(([n,r])=>{$(t,e.clients.get(n),n,r)})},V=(t,e)=>{const n=s["c"](),r=c["k"](t.restDecoder);for(let i=0;i<r;i++){const r=c["k"](t.restDecoder),i=new Array(r),o=t.readClient();let s=c["k"](t.restDecoder);n.set(o,{i:0,refs:i});for(let n=0;n<r;n++){const r=t.readInfo();switch(p["i"]&r){case 0:{const e=t.readLen();i[n]=new Dn(pt(o,s),e),s+=e;break}case 10:{const e=c["k"](t.restDecoder);i[n]=new ir(pt(o,s),e),s+=e;break}default:{const a=0===(r&(p["f"]|p["g"])),c=new tr(pt(o,s),null,(r&p["g"])===p["g"]?t.readLeftID():null,null,(r&p["f"])===p["f"]?t.readRightID():null,a?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,a&&(r&p["e"])===p["e"]?t.readString():null,er(t,r));i[n]=c,s+=c.length}}}}return n},q=(t,e,n)=>{const r=[];let i=Array.from(n.keys()).sort((t,e)=>t-e);if(0===i.length)return null;const o=()=>{if(0===i.length)return null;let t=n.get(i[i.length-1]);while(t.refs.length===t.i){if(i.pop(),!(i.length>0))return null;t=n.get(i[i.length-1])}return t};let c=o();if(null===c&&0===r.length)return null;const l=new _t,u=new Map,h=(t,e)=>{const n=u.get(t);(null==n||n>e)&&u.set(t,e)};let d=c.refs[c.i++];const p=new Map,f=()=>{for(const t of r){const e=t.id.client,r=n.get(e);r?(r.i--,l.clients.set(e,r.refs.slice(r.i)),n.delete(e),r.i=0,r.refs=[]):l.clients.set(e,[t]),i=i.filter(t=>t!==e)}r.length=0};while(1){if(d.constructor!==ir){const i=s["e"](p,d.id.client,()=>Ot(e,d.id.client)),o=i-d.id.clock;if(o<0)r.push(d),h(d.id.client,d.id.clock-1),f();else{const i=d.getMissing(t,e);if(null!==i){r.push(d);const t=n.get(i)||{refs:[],i:0};if(t.refs.length!==t.i){d=t.refs[t.i++];continue}h(i,Ot(e,i)),f()}else(0===o||o<d.length)&&(d.integrate(t,o),p.set(d.id.client,d.id.clock+d.length))}}if(r.length>0)d=r.pop();else if(null!==c&&c.i<c.refs.length)d=c.refs[c.i++];else{if(c=o(),null===c)break;d=c.refs[c.i++]}}if(l.clients.size>0){const t=new H;return J(t,l,new Map),a["n"](t.restEncoder,0),{missing:u,update:t.toUint8Array()}}return null},G=(t,e)=>J(t,e.doc.store,e.beforeState),W=(t,e,n,r=new j(t))=>Wt(e,t=>{t.local=!1;let e=!1;const n=t.doc,i=n.store,o=V(r,n),s=q(t,i,o),a=i.pendingStructs;if(a){for(const[t,n]of a.missing)if(n<Ot(i,t)){e=!0;break}if(s){for(const[t,e]of s.missing){const n=a.missing.get(t);(null==n||n>e)&&a.missing.set(t,e)}a.update=re([a.update,s.update])}}else i.pendingStructs=s;const l=N(r,t,i);if(i.pendingDs){const e=new j(c["e"](i.pendingDs));c["k"](e.restDecoder);const n=N(e,t,i);i.pendingDs=l&&n?re([l,n]):l||n}else i.pendingDs=l;if(e){const e=i.pendingStructs.update;i.pendingStructs=null,K(t.doc,e)}},n,!1),K=(t,e,n,r=j)=>{const i=c["e"](e);W(i,t,n,new r(i))},Q=(t,e,n)=>K(t,e,n,B),Y=(t,e,n=new Map)=>{J(t,e.store,n),M(t,_(e.store))},X=(t,e=new Uint8Array([0]),n=new H)=>{const r=et(e);Y(n,t,r);const i=[n.toUint8Array()];if(t.store.pendingDs&&i.push(t.store.pendingDs),t.store.pendingStructs&&i.push(ie(t.store.pendingStructs.update,e)),i.length>1){if(n.constructor===z)return ee(i.map((t,e)=>0===e?t:le(t)));if(n.constructor===H)return re(i)}return i[0]},Z=(t,e)=>X(t,e,new z),tt=t=>{const e=new Map,n=c["k"](t.restDecoder);for(let r=0;r<n;r++){const n=c["k"](t.restDecoder),r=c["k"](t.restDecoder);e.set(n,r)}return e},et=t=>tt(new R(c["e"](t))),nt=(t,e)=>(a["n"](t.restEncoder,e.size),Array.from(e.entries()).sort((t,e)=>e[0]-t[0]).forEach(([e,n])=>{a["n"](t.restEncoder,e),a["n"](t.restEncoder,n)}),t),rt=(t,e)=>nt(t,Mt(e.store)),it=(t,e=new U)=>(t instanceof Map?nt(e,t):rt(e,t),e.toUint8Array()),ot=t=>it(t,new P);class st{constructor(){this.l=[]}}const at=()=>new st,ct=(t,e)=>t.l.push(e),lt=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(t=>e!==t),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},ut=(t,e,n)=>f["a"](t.l,[e,n]);class ht{constructor(t,e){this.client=t,this.clock=e}}const dt=(t,e)=>t===e||null!==t&&null!==e&&t.client===e.client&&t.clock===e.clock,pt=(t,e)=>new ht(t,e),ft=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw d["c"]()},gt=(t,e)=>{while(null!==e){if(e.parent===t)return!0;e=e.parent._item}return!1};class mt{constructor(t,e,n,r=0){this.type=t,this.tname=e,this.item=n,this.assoc=r}}const vt=t=>new mt(null==t.type?null:pt(t.type.client,t.type.clock),t.tname||null,null==t.item?null:pt(t.item.client,t.item.clock),null==t.assoc?0:t.assoc);class yt{constructor(t,e,n=0){this.type=t,this.index=e,this.assoc=n}}const bt=(t,e,n=0)=>new yt(t,e,n),wt=(t,e,n)=>{let r=null,i=null;return null===t._item?i=ft(t):r=pt(t._item.id.client,t._item.id.clock),new mt(r,i,e,n)},At=(t,e,n=0)=>{let r=t._start;if(n<0){if(0===e)return wt(t,null,n);e--}while(null!==r){if(!r.deleted&&r.countable){if(r.length>e)return wt(t,pt(r.id.client,r.id.clock+e),n);e-=r.length}if(null===r.right&&n<0)return wt(t,r.lastId,n);r=r.right}return wt(t,null,n)},Dt=(t,e)=>{const n=e.store,r=t.item,i=t.type,o=t.tname,s=t.assoc;let a=null,c=0;if(null!==r){if(Ot(n,r.client)<=r.clock)return null;const t=Qn(n,r),e=t.item;if(!(e instanceof tr))return null;if(a=e.parent,null===a._item||!a._item.deleted){c=e.deleted||!e.countable?0:t.diff+(s>=0?0:1);let n=e.left;while(null!==n)!n.deleted&&n.countable&&(c+=n.length),n=n.left}}else{if(null!==o)a=e.get(o);else{if(null===i)throw d["c"]();{if(Ot(n,i.client)<=i.clock)return null;const{item:t}=Qn(n,i);if(!(t instanceof tr&&t.content instanceof Wn))return null;a=t.content.type}}c=s>=0?a._length:0}return bt(a,c,t.assoc)},Ct=(t,e)=>t===e||null!==t&&null!==e&&t.tname===e.tname&&dt(t.item,e.item)&&dt(t.type,e.type)&&t.assoc===e.assoc;class kt{constructor(t,e){this.ds=t,this.sv=e}}const Et=(t,e)=>new kt(t,e),St=(Et(T(),new Map),t=>Et(_(t.store),Mt(t.store))),xt=(t,e)=>void 0===e?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!k(e.ds,t.id),Tt=(t,e)=>{const n=s["e"](t.meta,Tt,g["a"]),r=t.doc.store;n.has(e)||(e.sv.forEach((e,n)=>{e<Ot(r,n)&&Lt(t,pt(n,e))}),D(t,e.ds,t=>{}),n.add(e))};class _t{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Mt=t=>{const e=new Map;return t.clients.forEach((t,n)=>{const r=t[t.length-1];e.set(n,r.id.clock+r.length)}),e},Ot=(t,e)=>{const n=t.clients.get(e);if(void 0===n)return 0;const r=n[n.length-1];return r.id.clock+r.length},Nt=(t,e)=>{let n=t.clients.get(e.id.client);if(void 0===n)n=[],t.clients.set(e.id.client,n);else{const t=n[n.length-1];if(t.id.clock+t.length!==e.id.clock)throw d["c"]()}n.push(e)},Ft=(t,e)=>{let n=0,r=t.length-1,i=t[r],s=i.id.clock;if(s===e)return r;let a=o["c"](e/(s+i.length-1)*r);while(n<=r){if(i=t[a],s=i.id.clock,s<=e){if(e<s+i.length)return a;n=a+1}else r=a-1;a=o["c"]((n+r)/2)}throw d["c"]()},It=(t,e)=>{const n=t.clients.get(e.client);return n[Ft(n,e.clock)]},Rt=It,Bt=(t,e,n)=>{const r=Ft(e,n),i=e[r];return i.id.clock<n&&i instanceof tr?(e.splice(r+1,0,Xn(t,i,n-i.id.clock)),r+1):r},Lt=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[Bt(t,n,e.clock)]},jt=(t,e,n)=>{const r=e.clients.get(n.client),i=Ft(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==Dn&&r.splice(i+1,0,Xn(t,o,n.clock-o.id.clock+1)),o},Pt=(t,e,n)=>{const r=t.clients.get(e.id.client);r[Ft(r,e.id.clock)]=n},zt=(t,e,n,r,i)=>{if(0===r)return;const o=n+r;let s,a=Bt(t,e,n);do{s=e[a++],o<s.id.clock+s.length&&Bt(t,e,o),i(s)}while(a<e.length&&e[a].id.clock<o)};class Ut{constructor(t,e,n){this.doc=t,this.deleteSet=new A,this.beforeState=Mt(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=e,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set}}const Ht=(t,e)=>!(0===e.deleteSet.clients.size&&!s["a"](e.afterState,(t,n)=>e.beforeState.get(n)!==t))&&(E(e.deleteSet),G(t,e),M(t,e.deleteSet),!0),$t=(t,e,n)=>{const r=e._item;(null===r||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&s["e"](t.changed,e,g["a"]).add(n)},Jt=(t,e)=>{const n=t[e-1],r=t[e];n.deleted===r.deleted&&n.constructor===r.constructor&&n.mergeWith(r)&&(t.splice(e,1),r instanceof tr&&null!==r.parentSub&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,n))},Vt=(t,e,n)=>{for(const[r,i]of t.clients.entries()){const t=e.clients.get(r);for(let r=i.length-1;r>=0;r--){const o=i[r],s=o.clock+o.len;for(let r=Ft(t,o.clock),i=t[r];r<t.length&&i.id.clock<s;i=t[++r]){const i=t[r];if(o.clock+o.len<=i.id.clock)break;i instanceof tr&&i.deleted&&!i.keep&&n(i)&&i.gc(e,!1)}}}},qt=(t,e)=>{t.clients.forEach((t,n)=>{const r=e.clients.get(n);for(let e=t.length-1;e>=0;e--){const n=t[e],i=o["g"](r.length-1,1+Ft(r,n.clock+n.len-1));for(let t=i,e=r[t];t>0&&e.id.clock>=n.clock;e=r[--t])Jt(r,t)}})},Gt=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,i=r.store,s=n.deleteSet,a=n._mergeStructs;try{E(s),n.afterState=Mt(n.doc.store),r._transaction=null,r.emit("beforeObserverCalls",[n,r]);const c=[];n.changed.forEach((t,e)=>c.push(()=>{null!==e._item&&e._item.deleted||e._callObserver(n,t)})),c.push(()=>{n.changedParentTypes.forEach((t,e)=>c.push(()=>{null!==e._item&&e._item.deleted||(t=t.filter(t=>null===t.target._item||!t.target._item.deleted),t.forEach(t=>{t.currentTarget=e}),t.sort((t,e)=>t.path.length-e.path.length),ut(e._dEH,t,n))})),c.push(()=>r.emit("afterTransaction",[n,r]))}),Object(f["a"])(c,[])}finally{r.gc&&Vt(s,i,r.gcFilter),qt(s,i),n.afterState.forEach((t,e)=>{const r=n.beforeState.get(e)||0;if(r!==t){const t=i.clients.get(e),n=o["f"](Ft(t,r),1);for(let e=t.length-1;e>=n;e--)Jt(t,e)}});for(let t=0;t<a.length;t++){const{client:e,clock:n}=a[t].id,r=i.clients.get(e),o=Ft(r,n);o+1<r.length&&Jt(r,o+1),o>0&&Jt(r,o)}if(n.local||n.afterState.get(r.clientID)===n.beforeState.get(r.clientID)||(m["e"](m["b"],m["a"],"[yjs] ",m["d"],m["c"],"Changed the client-id because another client seems to be using it."),r.clientID=F()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const t=new z,e=Ht(t,n);e&&r.emit("update",[t.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const t=new H,e=Ht(t,n);e&&r.emit("updateV2",[t.toUint8Array(),n.origin,r,n])}const{subdocsAdded:c,subdocsLoaded:l,subdocsRemoved:u}=n;(c.size>0||u.size>0||l.size>0)&&(c.forEach(t=>{t.clientID=r.clientID,null==t.collectionid&&(t.collectionid=r.collectionid),r.subdocs.add(t)}),u.forEach(t=>r.subdocs.delete(t)),r.emit("subdocs",[{loaded:l,added:c,removed:u},r,n]),u.forEach(t=>t.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):Gt(t,e+1)}}},Wt=(t,e,n=null,r=!0)=>{const i=t._transactionCleanups;let o=!1;null===t._transaction&&(o=!0,t._transaction=new Ut(t,n,r),i.push(t._transaction),1===i.length&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{e(t._transaction)}finally{o&&i[0]===t._transaction&&Gt(i,0)}};class Kt{constructor(t,e){this.insertions=e,this.deletions=t,this.meta=new Map}}const Qt=(t,e,n)=>{let r=null,i=null;const o=t.doc,s=t.scope;if(Wt(o,n=>{while(e.length>0&&null===r){const i=o.store,a=e.pop(),c=new Set,l=[];let u=!1;D(n,a.insertions,t=>{if(t instanceof tr){if(null!==t.redone){let{item:e,diff:r}=Qn(i,t.id);r>0&&(e=Lt(n,pt(e.id.client,e.id.clock+r))),t=e}!t.deleted&&s.some(e=>gt(e,t))&&l.push(t)}}),D(n,a.deletions,t=>{t instanceof tr&&s.some(e=>gt(e,t))&&!k(a.insertions,t.id)&&c.add(t)}),c.forEach(t=>{u=null!==Zn(n,t,c,l)||u});for(let e=l.length-1;e>=0;e--){const r=l[e];t.deleteFilter(r)&&(r.delete(n),u=!0)}r=u?a:null}n.changed.forEach((t,e)=>{t.has(null)&&e._searchMarker&&(e._searchMarker.length=0)}),i=n},t),null!=r){const e=i.changedParentTypes;t.emit("stack-item-popped",[{stackItem:r,type:n,changedParentTypes:e},t])}return r};class Yt extends r["a"]{constructor(t,{captureTimeout:e=500,deleteFilter:n=(()=>!0),trackedOrigins:r=new Set([null])}={}){super(),this.scope=t instanceof Array?t:[t],this.deleteFilter=n,r.add(this),this.trackedOrigins=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.doc=this.scope[0].doc,this.lastChange=0,this.doc.on("afterTransaction",t=>{if(!this.scope.some(e=>t.changedParentTypes.has(e))||!this.trackedOrigins.has(t.origin)&&(!t.origin||!this.trackedOrigins.has(t.origin.constructor)))return;const n=this.undoing,r=this.redoing,i=n?this.redoStack:this.undoStack;n?this.stopCapturing():r||(this.redoStack=[]);const o=new A;t.afterState.forEach((e,n)=>{const r=t.beforeState.get(n)||0,i=e-r;i>0&&x(o,n,r,i)});const s=v["a"]();if(s-this.lastChange<e&&i.length>0&&!n&&!r){const e=i[i.length-1];e.deletions=S([e.deletions,t.deleteSet]),e.insertions=S([e.insertions,o])}else i.push(new Kt(t.deleteSet,o));n||r||(this.lastChange=s),D(t,t.deleteSet,t=>{t instanceof tr&&this.scope.some(e=>gt(e,t))&&Yn(t,!0)}),this.emit("stack-item-added",[{stackItem:i[i.length-1],origin:t.origin,type:n?"redo":"undo",changedParentTypes:t.changedParentTypes},this])})}clear(){this.doc.transact(t=>{const e=e=>{D(t,e.deletions,t=>{t instanceof tr&&this.scope.some(e=>gt(e,t))&&Yn(t,!1)})};this.undoStack.forEach(e),this.redoStack.forEach(e)}),this.undoStack=[],this.redoStack=[]}stopCapturing(){this.lastChange=0}undo(){let t;this.undoing=!0;try{t=Qt(this,this.undoStack,"undo")}finally{this.undoing=!1}return t}redo(){let t;this.redoing=!0;try{t=Qt(this,this.redoStack,"redo")}finally{this.redoing=!1}return t}}function*Xt(t){const e=c["k"](t.restDecoder);for(let n=0;n<e;n++){const e=c["k"](t.restDecoder),n=t.readClient();let r=c["k"](t.restDecoder);for(let i=0;i<e;i++){const e=t.readInfo();if(10===e){const e=c["k"](t.restDecoder);yield new ir(pt(n,r),e),r+=e}else if(0!==(p["i"]&e)){const i=0===(e&(p["f"]|p["g"])),o=new tr(pt(n,r),null,(e&p["g"])===p["g"]?t.readLeftID():null,null,(e&p["f"])===p["f"]?t.readRightID():null,i?t.readParentInfo()?t.readString():t.readLeftID():null,i&&(e&p["e"])===p["e"]?t.readString():null,er(t,e));yield o,r+=o.length}else{const e=t.readLen();yield new Dn(pt(n,r),e),r+=e}}}}class Zt{constructor(t,e){this.gen=Xt(t),this.curr=null,this.done=!1,this.filterSkips=e,this.next()}next(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===ir);return this.curr}}class te{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const ee=t=>re(t,B,z),ne=(t,e)=>{if(t.constructor===Dn){const{client:n,clock:r}=t.id;return new Dn(pt(n,r+e),t.length-e)}if(t.constructor===ir){const{client:n,clock:r}=t.id;return new ir(pt(n,r+e),t.length-e)}{const n=t,{client:r,clock:i}=n.id;return new tr(pt(r,i+e),null,pt(r,i+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},re=(t,e=j,n=H)=>{if(1===t.length)return t[0];const r=t.map(t=>new e(c["e"](t)));let i=r.map(t=>new Zt(t,!0)),o=null;const s=new n,a=new te(s);while(1){if(i=i.filter(t=>null!==t.curr),i.sort((t,e)=>{if(t.curr.id.client===e.curr.id.client){const n=t.curr.id.clock-e.curr.id.clock;return 0===n?t.curr.constructor===e.curr.constructor?0:t.curr.constructor===ir?1:-1:n}return e.curr.id.client-t.curr.id.client}),0===i.length)break;const t=i[0],e=t.curr.id.client;if(null!==o){let n=t.curr,r=!1;while(null!==n&&n.id.clock+n.length<=o.struct.id.clock+o.struct.length&&n.id.client>=o.struct.id.client)n=t.next(),r=!0;if(null===n||n.id.client!==e||r&&n.id.clock>o.struct.id.clock+o.struct.length)continue;if(e!==o.struct.id.client)se(a,o.struct,o.offset),o={struct:n,offset:0},t.next();else if(o.struct.id.clock+o.struct.length<n.id.clock)if(o.struct.constructor===ir)o.struct.length=n.id.clock+n.length-o.struct.id.clock;else{se(a,o.struct,o.offset);const t=n.id.clock-o.struct.id.clock-o.struct.length,r=new ir(pt(e,o.struct.id.clock+o.struct.length),t);o={struct:r,offset:0}}else{const e=o.struct.id.clock+o.struct.length-n.id.clock;e>0&&(o.struct.constructor===ir?o.struct.length-=e:n=ne(n,e)),o.struct.mergeWith(n)||(se(a,o.struct,o.offset),o={struct:n,offset:0},t.next())}}else o={struct:t.curr,offset:0},t.next();for(let n=t.curr;null!==n&&n.id.client===e&&n.id.clock===o.struct.id.clock+o.struct.length&&n.constructor!==ir;n=t.next())se(a,o.struct,o.offset),o={struct:n,offset:0}}null!==o&&(se(a,o.struct,o.offset),o=null),ae(a);const l=r.map(t=>O(t)),u=S(l);return M(s,u),s.toUint8Array()},ie=(t,e,n=j,r=H)=>{const i=et(e),s=new r,a=new te(s),l=new n(c["e"](t)),u=new Zt(l,!1);while(u.curr){const t=u.curr,e=t.id.client,n=i.get(e)||0;if(u.curr.constructor!==ir)if(t.id.clock+t.length>n){se(a,t,o["f"](n-t.id.clock,0)),u.next();while(u.curr&&u.curr.id.client===e)se(a,u.curr,0),u.next()}else while(u.curr&&u.curr.id.client===e&&u.curr.id.clock+u.curr.length<=n)u.next();else u.next()}ae(a);const h=O(l);return M(s,h),s.toUint8Array()},oe=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:a["g"](t.encoder.restEncoder)}),t.encoder.restEncoder=a["e"](),t.written=0)},se=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&oe(t),0===t.written&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),a["n"](t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},ae=t=>{oe(t);const e=t.encoder.restEncoder;a["n"](e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];a["n"](e,r.written),a["k"](e,r.restEncoder)}},ce=(t,e,n)=>{const r=new e(c["e"](t)),i=new Zt(r,!1),o=new n,s=new te(o);for(let c=i.curr;null!==c;c=i.next())se(s,c,0);ae(s);const a=O(r);return M(o,a),o.toUint8Array()},le=t=>ce(t,j,z);class ue{constructor(t,e){this.target=t,this.currentTarget=t,this.transaction=e,this._changes=null,this._keys=null,this._delta=null}get path(){return he(this.currentTarget,this.target)}deletes(t){return k(this.transaction.deleteSet,t.id)}get keys(){if(null===this._keys){const t=new Map,e=this.target,n=this.transaction.changed.get(e);n.forEach(n=>{if(null!==n){const r=e._map.get(n);let o,s;if(this.adds(r)){let t=r.left;while(null!==t&&this.adds(t))t=t.left;if(this.deletes(r)){if(null===t||!this.deletes(t))return;o="delete",s=i["d"](t.content.getContent())}else null!==t&&this.deletes(t)?(o="update",s=i["d"](t.content.getContent())):(o="add",s=void 0)}else{if(!this.deletes(r))return;o="delete",s=i["d"](r.content.getContent())}t.set(n,{action:o,oldValue:s})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(null===t){const e=this.target,n=g["a"](),r=g["a"](),i=[];t={added:n,deleted:r,delta:i,keys:this.keys};const o=this.transaction.changed.get(e);if(o.has(null)){let t=null;const o=()=>{t&&i.push(t)};for(let i=e._start;null!==i;i=i.right)i.deleted?this.deletes(i)&&!this.adds(i)&&(null!==t&&void 0!==t.delete||(o(),t={delete:0}),t.delete+=i.length,r.add(i)):this.adds(i)?(null!==t&&void 0!==t.insert||(o(),t={insert:[]}),t.insert=t.insert.concat(i.content.getContent()),n.add(i)):(null!==t&&void 0!==t.retain||(o(),t={retain:0}),t.retain+=i.length);null!==t&&void 0===t.retain&&o()}this._changes=t}return t}}const he=(t,e)=>{const n=[];while(null!==e._item&&e!==t){if(null!==e._item.parentSub)n.unshift(e._item.parentSub);else{let t=0,r=e._item.parent._start;while(r!==e._item&&null!==r)r.deleted||t++,r=r.right;n.unshift(t)}e=e._item.parent}return n},de=80;let pe=0;class fe{constructor(t,e){t.marker=!0,this.p=t,this.index=e,this.timestamp=pe++}}const ge=t=>{t.timestamp=pe++},me=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=pe++},ve=(t,e,n)=>{if(t.length>=de){const r=t.reduce((t,e)=>t.timestamp<e.timestamp?t:e);return me(r,e,n),r}{const r=new fe(e,n);return t.push(r),r}},ye=(t,e)=>{if(null===t._start||0===e||null===t._searchMarker)return null;const n=0===t._searchMarker.length?null:t._searchMarker.reduce((t,n)=>o["a"](e-t.index)<o["a"](e-n.index)?t:n);let r=t._start,i=0;null!==n&&(r=n.p,i=n.index,ge(n));while(null!==r.right&&i<e){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}while(null!==r.left&&i>e)r=r.left,!r.deleted&&r.countable&&(i-=r.length);while(null!==r.left&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return null!==n&&o["a"](n.index-i)<r.parent.length/de?(me(n,r,i),n):ve(t._searchMarker,r,i)},be=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const i=t[r];if(n>0){let e=i.p;e.marker=!1;while(e&&(e.deleted||!e.countable))e=e.left,e&&!e.deleted&&e.countable&&(i.index-=e.length);if(null===e||!0===e.marker){t.splice(r,1);continue}i.p=e,e.marker=!0}(e<i.index||n>0&&e===i.index)&&(i.index=o["f"](e,i.index+n))}},we=(t,e,n)=>{const r=t,i=e.changedParentTypes;while(1){if(s["e"](i,t,()=>[]).push(n),null===t._item)break;t=t._item.parent}ut(r._eH,n,e)};class Ae{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=at(),this._dEH=at(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,e){this.doc=t,this._item=e}_copy(){throw d["b"]()}clone(){throw d["b"]()}_write(t){}get _first(){let t=this._start;while(null!==t&&t.deleted)t=t.right;return t}_callObserver(t,e){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){ct(this._eH,t)}observeDeep(t){ct(this._dEH,t)}unobserve(t){lt(this._eH,t)}unobserveDeep(t){lt(this._dEH,t)}toJSON(){}}const De=(t,e,n)=>{e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const i=[];let o=t._start;while(null!==o&&r>0){if(o.countable&&!o.deleted){const t=o.content.getContent();if(t.length<=e)e-=t.length;else{for(let n=e;n<t.length&&r>0;n++)i.push(t[n]),r--;e=0}}o=o.right}return i},Ce=t=>{const e=[];let n=t._start;while(null!==n){if(n.countable&&!n.deleted){const t=n.content.getContent();for(let n=0;n<t.length;n++)e.push(t[n])}n=n.right}return e},ke=(t,e)=>{const n=[];let r=t._start;while(null!==r){if(r.countable&&xt(r,e)){const t=r.content.getContent();for(let e=0;e<t.length;e++)n.push(t[e])}r=r.right}return n},Ee=(t,e)=>{let n=0,r=t._start;while(null!==r){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let r=0;r<i.length;r++)e(i[r],n++,t)}r=r.right}},Se=(t,e)=>{const n=[];return Ee(t,(r,i)=>{n.push(e(r,i,t))}),n},xe=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(null===n){while(null!==e&&e.deleted)e=e.right;if(null===e)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const t=n[r++];return n.length<=r&&(n=null),{done:!1,value:t}}}},Te=(t,e)=>{const n=ye(t,e);let r=t._start;for(null!==n&&(r=n.p,e-=n.index);null!==r;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},_e=(t,e,n,r)=>{let i=n;const o=t.doc,s=o.clientID,a=o.store,c=null===n?e._start:n.right;let l=[];const u=()=>{l.length>0&&(i=new tr(pt(s,Ot(a,s)),i,i&&i.lastId,c,c&&c.id,e,null,new Bn(l)),i.integrate(t,0),l=[])};r.forEach(n=>{if(null===n)l.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:l.push(n);break;default:switch(u(),n.constructor){case Uint8Array:case ArrayBuffer:i=new tr(pt(s,Ot(a,s)),i,i&&i.lastId,c,c&&c.id,e,null,new Cn(new Uint8Array(n))),i.integrate(t,0);break;case I:i=new tr(pt(s,Ot(a,s)),i,i&&i.lastId,c,c&&c.id,e,null,new Tn(n)),i.integrate(t,0);break;default:if(!(n instanceof Ae))throw new Error("Unexpected content type in insert operation");i=new tr(pt(s,Ot(a,s)),i,i&&i.lastId,c,c&&c.id,e,null,new Wn(n)),i.integrate(t,0)}}}),u()},Me=d["a"]("Length exceeded!"),Oe=(t,e,n,r)=>{if(n>e._length)throw Me;if(0===n)return e._searchMarker&&be(e._searchMarker,n,r.length),_e(t,e,null,r);const i=n,o=ye(e,n);let s=e._start;for(null!==o&&(s=o.p,n-=o.index,0===n&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));null!==s;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&Lt(t,pt(s.id.client,s.id.clock+n));break}n-=s.length}return e._searchMarker&&be(e._searchMarker,i,r.length),_e(t,e,s,r)},Ne=(t,e,n)=>{const r=(e._searchMarker||[]).reduce((t,e)=>e.index>t.index?e:t,{index:0,p:e._start});let i=r.p;if(i)while(i.right)i=i.right;return _e(t,e,i,n)},Fe=(t,e,n,r)=>{if(0===r)return;const i=n,o=r,s=ye(e,n);let a=e._start;for(null!==s&&(a=s.p,n-=s.index);null!==a&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&Lt(t,pt(a.id.client,a.id.clock+n)),n-=a.length);while(r>0&&null!==a)a.deleted||(r<a.length&&Lt(t,pt(a.id.client,a.id.clock+r)),a.delete(t),r-=a.length),a=a.right;if(r>0)throw Me;e._searchMarker&&be(e._searchMarker,i,-o+r)},Ie=(t,e,n)=>{const r=e._map.get(n);void 0!==r&&r.delete(t)},Re=(t,e,n,r)=>{const i=e._map.get(n)||null,o=t.doc,s=o.clientID;let a;if(null==r)a=new Bn([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:a=new Bn([r]);break;case Uint8Array:a=new Cn(r);break;case I:a=new Tn(r);break;default:if(!(r instanceof Ae))throw new Error("Unexpected content type");a=new Wn(r)}new tr(pt(s,Ot(o.store,s)),i,i&&i.lastId,null,null,e,n,a).integrate(t,0)},Be=(t,e)=>{const n=t._map.get(e);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},Le=t=>{const e={};return t._map.forEach((t,n)=>{t.deleted||(e[n]=t.content.getContent()[t.length-1])}),e},je=(t,e)=>{const n=t._map.get(e);return void 0!==n&&!n.deleted},Pe=t=>y["a"](t.entries(),t=>!t[1].deleted);class ze extends ue{constructor(t,e){super(t,e),this._transaction=e}}class Ue extends Ae{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const e=new Ue;return e.push(t),e}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ue}clone(){const t=new Ue;return t.insert(0,this.toArray().map(t=>t instanceof Ae?t.clone():t)),t}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}_callObserver(t,e){super._callObserver(t,e),we(this,t,new ze(this,t))}insert(t,e){null!==this.doc?Wt(this.doc,n=>{Oe(n,this,t,e)}):this._prelimContent.splice(t,0,...e)}push(t){null!==this.doc?Wt(this.doc,e=>{Ne(e,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,e=1){null!==this.doc?Wt(this.doc,n=>{Fe(n,this,t,e)}):this._prelimContent.splice(t,e)}get(t){return Te(this,t)}toArray(){return Ce(this)}slice(t=0,e=this.length){return De(this,t,e)}toJSON(){return this.map(t=>t instanceof Ae?t.toJSON():t)}map(t){return Se(this,t)}forEach(t){Ee(this,t)}[Symbol.iterator](){return xe(this)}_write(t){t.writeTypeRef(Un)}}const He=t=>new Ue;class $e extends ue{constructor(t,e,n){super(t,e),this.keysChanged=n}}class Je extends Ae{constructor(t){super(),this._prelimContent=null,this._prelimContent=void 0===t?new Map:new Map(t)}_integrate(t,e){super._integrate(t,e),this._prelimContent.forEach((t,e)=>{this.set(e,t)}),this._prelimContent=null}_copy(){return new Je}clone(){const t=new Je;return this.forEach((e,n)=>{t.set(n,e instanceof Ae?e.clone():e)}),t}_callObserver(t,e){we(this,t,new $e(this,t,e))}toJSON(){const t={};return this._map.forEach((e,n)=>{if(!e.deleted){const r=e.content.getContent()[e.length-1];t[n]=r instanceof Ae?r.toJSON():r}}),t}get size(){return[...Pe(this._map)].length}keys(){return y["b"](Pe(this._map),t=>t[0])}values(){return y["b"](Pe(this._map),t=>t[1].content.getContent()[t[1].length-1])}entries(){return y["b"](Pe(this._map),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){const e={};return this._map.forEach((e,n)=>{e.deleted||t(e.content.getContent()[e.length-1],n,this)}),e}[Symbol.iterator](){return this.entries()}delete(t){null!==this.doc?Wt(this.doc,e=>{Ie(e,this,t)}):this._prelimContent.delete(t)}set(t,e){return null!==this.doc?Wt(this.doc,n=>{Re(n,this,t,e)}):this._prelimContent.set(t,e),e}get(t){return Be(this,t)}has(t){return je(this,t)}clear(){null!==this.doc?Wt(this.doc,t=>{this.forEach((function(e,n,r){Ie(t,r,n)}))}):this._prelimContent.clear()}_write(t){t.writeTypeRef(Hn)}}const Ve=t=>new Je,qe=(t,e)=>t===e||"object"===typeof t&&"object"===typeof e&&t&&e&&b["a"](t,e);class Ge{constructor(t,e,n,r){this.left=t,this.right=e,this.index=n,this.currentAttributes=r}forward(){switch(null===this.right&&d["c"](),this.right.content.constructor){case Nn:this.right.deleted||Ye(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const We=(t,e,n)=>{while(null!==e.right&&n>0){switch(e.right.content.constructor){case Nn:e.right.deleted||Ye(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&Lt(t,pt(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},Ke=(t,e,n)=>{const r=new Map,i=ye(e,n);if(i){const e=new Ge(i.p.left,i.p,i.index,r);return We(t,e,n-i.index)}{const i=new Ge(null,e._start,0,r);return We(t,i,n)}},Qe=(t,e,n,r)=>{while(null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===Nn&&qe(r.get(n.right.content.key),n.right.content.value)))n.right.deleted||r.delete(n.right.content.key),n.forward();const i=t.doc,o=i.clientID;r.forEach((r,s)=>{const a=n.left,c=n.right,l=new tr(pt(o,Ot(i.store,o)),a,a&&a.lastId,c,c&&c.id,e,null,new Nn(s,r));l.integrate(t,0),n.right=l,n.forward()})},Ye=(t,e)=>{const{key:n,value:r}=e;null===r?t.delete(n):t.set(n,r)},Xe=(t,e)=>{while(1){if(null===t.right)break;if(!(t.right.deleted||t.right.content.constructor===Nn&&qe(e[t.right.content.key]||null,t.right.content.value)))break;t.forward()}},Ze=(t,e,n,r)=>{const i=t.doc,o=i.clientID,s=new Map;for(const a in r){const c=r[a],l=n.currentAttributes.get(a)||null;if(!qe(l,c)){s.set(a,l);const{left:r,right:u}=n;n.right=new tr(pt(o,Ot(i.store,o)),r,r&&r.lastId,u,u&&u.id,e,null,new Nn(a,c)),n.right.integrate(t,0),n.forward()}}return s},tn=(t,e,n,r,i)=>{n.currentAttributes.forEach((t,e)=>{void 0===i[e]&&(i[e]=null)});const o=t.doc,s=o.clientID;Xe(n,i);const a=Ze(t,e,n,i),c=r.constructor===String?new jn(r):r instanceof Ae?new Wn(r):new Mn(r);let{left:l,right:u,index:h}=n;e._searchMarker&&be(e._searchMarker,n.index,c.getLength()),u=new tr(pt(s,Ot(o.store,s)),l,l&&l.lastId,u,u&&u.id,e,null,c),u.integrate(t,0),n.right=u,n.index=h,n.forward(),Qe(t,e,n,a)},en=(t,e,n,r,i)=>{const o=t.doc,s=o.clientID;Xe(n,i);const a=Ze(t,e,n,i);while(r>0&&null!==n.right){if(!n.right.deleted)switch(n.right.content.constructor){case Nn:{const{key:e,value:r}=n.right.content,o=i[e];void 0!==o&&(qe(o,r)?a.delete(e):a.set(e,r),n.right.delete(t));break}default:r<n.right.length&&Lt(t,pt(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let i="";for(;r>0;r--)i+="\n";n.right=new tr(pt(s,Ot(o.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new jn(i)),n.right.integrate(t,0),n.forward()}Qe(t,e,n,a)},nn=(t,e,n,r,i)=>{while(n&&(!n.countable||n.deleted))n.deleted||n.content.constructor!==Nn||Ye(i,n.content),n=n.right;let o=0;while(e!==n){if(!e.deleted){const n=e.content;switch(n.constructor){case Nn:{const{key:s,value:a}=n;(i.get(s)||null)===a&&(r.get(s)||null)!==a||(e.delete(t),o++);break}}}e=e.right}return o},rn=(t,e)=>{while(e&&e.right&&(e.right.deleted||!e.right.countable))e=e.right;const n=new Set;while(e&&(e.deleted||!e.countable)){if(!e.deleted&&e.content.constructor===Nn){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},on=t=>{let e=0;return Wt(t.doc,n=>{let r=t._start,i=t._start,o=s["c"]();const a=s["b"](o);while(i){if(!1===i.deleted)switch(i.content.constructor){case Nn:Ye(a,i.content);break;default:e+=nn(n,r,i,o,a),o=s["b"](a),r=i;break}i=i.right}}),e},sn=(t,e,n)=>{const r=n,i=s["b"](e.currentAttributes),o=e.right;while(n>0&&null!==e.right){if(!1===e.right.deleted)switch(e.right.content.constructor){case Wn:case Mn:case jn:n<e.right.length&&Lt(t,pt(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}o&&nn(t,o,e.right,i,s["b"](e.currentAttributes));const a=(e.left||e.right).parent;return a._searchMarker&&be(a._searchMarker,e.index,-r+n),e};class an extends ue{constructor(t,e,n){super(t,e),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(t=>{null===t?this.childListChanged=!0:this.keysChanged.add(t)})}get changes(){if(null===this._changes){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(null===this._delta){const t=this.target.doc,e=[];Wt(t,t=>{const n=new Map,r=new Map;let i=this.target._start,o=null;const s={};let a="",c=0,l=0;const u=()=>{if(null!==o){let t;switch(o){case"delete":t={delete:l},l=0;break;case"insert":t={insert:a},n.size>0&&(t.attributes={},n.forEach((e,n)=>{null!==e&&(t.attributes[n]=e)})),a="";break;case"retain":if(t={retain:c},Object.keys(s).length>0){t.attributes={};for(const e in s)t.attributes[e]=s[e]}c=0;break}e.push(t),o=null}};while(null!==i){switch(i.content.constructor){case Wn:case Mn:this.adds(i)?this.deletes(i)||(u(),o="insert",a=i.content.getContent()[0],u()):this.deletes(i)?("delete"!==o&&(u(),o="delete"),l+=1):i.deleted||("retain"!==o&&(u(),o="retain"),c+=1);break;case jn:this.adds(i)?this.deletes(i)||("insert"!==o&&(u(),o="insert"),a+=i.content.str):this.deletes(i)?("delete"!==o&&(u(),o="delete"),l+=i.length):i.deleted||("retain"!==o&&(u(),o="retain"),c+=i.length);break;case Nn:{const{key:e,value:a}=i.content;if(this.adds(i)){if(!this.deletes(i)){const c=n.get(e)||null;qe(c,a)?i.delete(t):("retain"===o&&u(),qe(a,r.get(e)||null)?delete s[e]:s[e]=a)}}else if(this.deletes(i)){r.set(e,a);const t=n.get(e)||null;qe(t,a)||("retain"===o&&u(),s[e]=t)}else if(!i.deleted){r.set(e,a);const n=s[e];void 0!==n&&(qe(n,a)?i.delete(t):("retain"===o&&u(),null===a?delete s[e]:s[e]=a))}i.deleted||("insert"===o&&u(),Ye(n,i.content));break}}i=i.right}u();while(e.length>0){const t=e[e.length-1];if(void 0===t.retain||void 0!==t.attributes)break;e.pop()}}),this._delta=e}return this._delta}}class cn extends Ae{constructor(t){super(),this._pending=void 0!==t?[()=>this.insert(0,t)]:[],this._searchMarker=[]}get length(){return this._length}_integrate(t,e){super._integrate(t,e);try{this._pending.forEach(t=>t())}catch(n){console.error(n)}this._pending=null}_copy(){return new cn}clone(){const t=new cn;return t.applyDelta(this.toDelta()),t}_callObserver(t,e){super._callObserver(t,e);const n=new an(this,t,e),r=t.doc;if(we(this,t,n),!t.local){let e=!1;for(const[n,i]of t.afterState.entries()){const o=t.beforeState.get(n)||0;if(i!==o&&(zt(t,r.store.clients.get(n),o,i,t=>{t.deleted||t.content.constructor!==Nn||(e=!0)}),e))break}e||D(t,t.deleteSet,t=>{t instanceof Dn||e||t.parent===this&&t.content.constructor===Nn&&(e=!0)}),Wt(r,t=>{e?on(this):D(t,t.deleteSet,e=>{e instanceof Dn||e.parent===this&&rn(t,e)})})}}toString(){let t="",e=this._start;while(null!==e)!e.deleted&&e.countable&&e.content.constructor===jn&&(t+=e.content.str),e=e.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:e=!0}={}){null!==this.doc?Wt(this.doc,n=>{const r=new Ge(null,this._start,0,new Map);for(let i=0;i<t.length;i++){const o=t[i];if(void 0!==o.insert){const s=e||"string"!==typeof o.insert||i!==t.length-1||null!==r.right||"\n"!==o.insert.slice(-1)?o.insert:o.insert.slice(0,-1);("string"!==typeof s||s.length>0)&&tn(n,this,r,s,o.attributes||{})}else void 0!==o.retain?en(n,this,r,o.retain,o.attributes||{}):void 0!==o.delete&&sn(n,r,o.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,e,n){const r=[],i=new Map,o=this.doc;let s="",a=this._start;function c(){if(s.length>0){const t={};let e=!1;i.forEach((n,r)=>{e=!0,t[r]=n});const n={insert:s};e&&(n.attributes=t),r.push(n),s=""}}return Wt(o,o=>{t&&Tt(o,t),e&&Tt(o,e);while(null!==a){if(xt(a,t)||void 0!==e&&xt(a,e))switch(a.content.constructor){case jn:{const r=i.get("ychange");void 0===t||xt(a,t)?void 0===e||xt(a,e)?void 0!==r&&(c(),i.delete("ychange")):void 0!==r&&r.user===a.id.client&&"added"===r.state||(c(),i.set("ychange",n?n("added",a.id):{type:"added"})):void 0!==r&&r.user===a.id.client&&"removed"===r.state||(c(),i.set("ychange",n?n("removed",a.id):{type:"removed"})),s+=a.content.str;break}case Wn:case Mn:{c();const t={insert:a.content.getContent()[0]};if(i.size>0){const e={};t.attributes=e,i.forEach((t,n)=>{e[n]=t})}r.push(t);break}case Nn:xt(a,t)&&(c(),Ye(i,a.content));break}a=a.right}c()},Tt),r}insert(t,e,n){if(e.length<=0)return;const r=this.doc;null!==r?Wt(r,r=>{const i=Ke(r,this,t);n||(n={},i.currentAttributes.forEach((t,e)=>{n[e]=t})),tn(r,this,i,e,n)}):this._pending.push(()=>this.insert(t,e,n))}insertEmbed(t,e,n={}){const r=this.doc;null!==r?Wt(r,r=>{const i=Ke(r,this,t);tn(r,this,i,e,n)}):this._pending.push(()=>this.insertEmbed(t,e,n))}delete(t,e){if(0===e)return;const n=this.doc;null!==n?Wt(n,n=>{sn(n,Ke(n,this,t),e)}):this._pending.push(()=>this.delete(t,e))}format(t,e,n){if(0===e)return;const r=this.doc;null!==r?Wt(r,r=>{const i=Ke(r,this,t);null!==i.right&&en(r,this,i,e,n)}):this._pending.push(()=>this.format(t,e,n))}removeAttribute(t){null!==this.doc?Wt(this.doc,e=>{Ie(e,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,e){null!==this.doc?Wt(this.doc,n=>{Re(n,this,t,e)}):this._pending.push(()=>this.setAttribute(t,e))}getAttribute(t){return Be(this,t)}getAttributes(t){return Le(this)}_write(t){t.writeTypeRef($n)}}const ln=t=>new cn;class un{constructor(t,e=(()=>!0)){this._filter=e,this._root=t,this._currentNode=t._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let t=this._currentNode,e=t&&t.content&&t.content.type;if(null!==t&&(!this._firstCall||t.deleted||!this._filter(e)))do{if(e=t.content.type,t.deleted||e.constructor!==pn&&e.constructor!==hn||null===e._start)while(null!==t){if(null!==t.right){t=t.right;break}t=t.parent===this._root?null:t.parent._item}else t=e._start}while(null!==t&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,null===t?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class hn extends Ae{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new hn}clone(){const t=new hn;return t.insert(0,this.toArray().map(t=>t instanceof Ae?t.clone():t)),t}get length(){return null===this._prelimContent?this._length:this._prelimContent.length}createTreeWalker(t){return new un(this,t)}querySelector(t){t=t.toUpperCase();const e=new un(this,e=>e.nodeName&&e.nodeName.toUpperCase()===t),n=e.next();return n.done?null:n.value}querySelectorAll(t){return t=t.toUpperCase(),Array.from(new un(this,e=>e.nodeName&&e.nodeName.toUpperCase()===t))}_callObserver(t,e){we(this,t,new gn(this,e,t))}toString(){return Se(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,e={},n){const r=t.createDocumentFragment();return void 0!==n&&n._createAssociation(r,this),Ee(this,i=>{r.insertBefore(i.toDOM(t,e,n),null)}),r}insert(t,e){null!==this.doc?Wt(this.doc,n=>{Oe(n,this,t,e)}):this._prelimContent.splice(t,0,...e)}insertAfter(t,e){if(null!==this.doc)Wt(this.doc,n=>{const r=t&&t instanceof Ae?t._item:t;_e(n,this,r,e)});else{const n=this._prelimContent,r=null===t?0:n.findIndex(e=>e===t)+1;if(0===r&&null!==t)throw d["a"]("Reference item not found");n.splice(r,0,...e)}}delete(t,e=1){null!==this.doc?Wt(this.doc,n=>{Fe(n,this,t,e)}):this._prelimContent.splice(t,e)}toArray(){return Ce(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return Te(this,t)}slice(t=0,e=this.length){return De(this,t,e)}_write(t){t.writeTypeRef(Vn)}}const dn=t=>new hn;class pn extends hn{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,e){super._integrate(t,e),this._prelimAttrs.forEach((t,e)=>{this.setAttribute(e,t)}),this._prelimAttrs=null}_copy(){return new pn(this.nodeName)}clone(){const t=new pn(this.nodeName),e=this.getAttributes();for(const n in e)t.setAttribute(n,e[n]);return t.insert(0,this.toArray().map(t=>t instanceof Ae?t.clone():t)),t}toString(){const t=this.getAttributes(),e=[],n=[];for(const s in t)n.push(s);n.sort();const r=n.length;for(let s=0;s<r;s++){const r=n[s];e.push(r+'="'+t[r]+'"')}const i=this.nodeName.toLocaleLowerCase(),o=e.length>0?" "+e.join(" "):"";return`<${i}${o}>${super.toString()}</${i}>`}removeAttribute(t){null!==this.doc?Wt(this.doc,e=>{Ie(e,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,e){null!==this.doc?Wt(this.doc,n=>{Re(n,this,t,e)}):this._prelimAttrs.set(t,e)}getAttribute(t){return Be(this,t)}hasAttribute(t){return je(this,t)}getAttributes(t){return Le(this)}toDOM(t=document,e={},n){const r=t.createElement(this.nodeName),i=this.getAttributes();for(const o in i)r.setAttribute(o,i[o]);return Ee(this,i=>{r.appendChild(i.toDOM(t,e,n))}),void 0!==n&&n._createAssociation(r,this),r}_write(t){t.writeTypeRef(Jn),t.writeKey(this.nodeName)}}const fn=t=>new pn(t.readKey());class gn extends ue{constructor(t,e,n){super(t,n),this.childListChanged=!1,this.attributesChanged=new Set,e.forEach(t=>{null===t?this.childListChanged=!0:this.attributesChanged.add(t)})}}class mn extends Je{constructor(t){super(),this.hookName=t}_copy(){return new mn(this.hookName)}clone(){const t=new mn(this.hookName);return this.forEach((e,n)=>{t.set(n,e)}),t}toDOM(t=document,e={},n){const r=e[this.hookName];let i;return i=void 0!==r?r.createDom(this):document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),void 0!==n&&n._createAssociation(i,this),i}_write(t){t.writeTypeRef(qn),t.writeKey(this.hookName)}}const vn=t=>new mn(t.readKey());class yn extends cn{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new yn}clone(){const t=new yn;return t.applyDelta(this.toDelta()),t}toDOM(t=document,e,n){const r=t.createTextNode(this.toString());return void 0!==n&&n._createAssociation(r,this),r}toString(){return this.toDelta().map(t=>{const e=[];for(const r in t.attributes){const n=[];for(const e in t.attributes[r])n.push({key:e,value:t.attributes[r][e]});n.sort((t,e)=>t.key<e.key?-1:1),e.push({nodeName:r,attrs:n})}e.sort((t,e)=>t.nodeName<e.nodeName?-1:1);let n="";for(let r=0;r<e.length;r++){const t=e[r];n+="<"+t.nodeName;for(let e=0;e<t.attrs.length;e++){const r=t.attrs[e];n+=` ${r.key}="${r.value}"`}n+=">"}n+=t.insert;for(let r=e.length-1;r>=0;r--)n+=`</${e[r].nodeName}>`;return n}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(Gn)}}const bn=t=>new yn;class wn{constructor(t,e){this.id=t,this.length=e}get deleted(){throw d["b"]()}mergeWith(t){return!1}write(t,e,n){throw d["b"]()}integrate(t,e){throw d["b"]()}}const An=0;class Dn extends wn{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor===t.constructor&&(this.length+=t.length,!0)}integrate(t,e){e>0&&(this.id.clock+=e,this.length-=e),Nt(t.doc.store,this)}write(t,e){t.writeInfo(An),t.writeLen(this.length-e)}getMissing(t,e){return null}}class Cn{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Cn(this.content)}splice(t){throw d["b"]()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeBuf(this.content)}getRef(){return 3}}const kn=t=>new Cn(t.readBuf());class En{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new En(this.len)}splice(t){const e=new En(this.len-t);return this.len=t,e}mergeWith(t){return this.len+=t.len,!0}integrate(t,e){x(t.deleteSet,e.id.client,e.id.clock,this.len),e.markDeleted()}delete(t){}gc(t){}write(t,e){t.writeLen(this.len-e)}getRef(){return 1}}const Sn=t=>new En(t.readLen()),xn=(t,e)=>new I({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class Tn{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const e={};this.opts=e,t.gc||(e.gc=!1),t.autoLoad&&(e.autoLoad=!0),null!==t.meta&&(e.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Tn(xn(this.doc.guid,this.opts))}splice(t){throw d["b"]()}mergeWith(t){return!1}integrate(t,e){this.doc._item=e,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,e){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const _n=t=>new Tn(xn(t.readString(),t.readAny()));class Mn{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Mn(this.embed)}splice(t){throw d["b"]()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeJSON(this.embed)}getRef(){return 5}}const On=t=>new Mn(t.readJSON());class Nn{constructor(t,e){this.key=t,this.value=e}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Nn(this.key,this.value)}splice(t){throw d["b"]()}mergeWith(t){return!1}integrate(t,e){e.parent._searchMarker=null}delete(t){}gc(t){}write(t,e){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const Fn=t=>new Nn(t.readString(),t.readJSON());class In{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new In(this.arr)}splice(t){const e=new In(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let r=e;r<n;r++){const e=this.arr[r];t.writeString(void 0===e?"undefined":JSON.stringify(e))}}getRef(){return 2}}const Rn=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const e=t.readString();"undefined"===e?n.push(void 0):n.push(JSON.parse(e))}return new In(n)};class Bn{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Bn(this.arr)}splice(t){const e=new Bn(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let r=e;r<n;r++){const e=this.arr[r];t.writeAny(e)}}getRef(){return 8}}const Ln=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new Bn(n)};class jn{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new jn(this.str)}splice(t){const e=new jn(this.str.slice(t));this.str=this.str.slice(0,t);const n=this.str.charCodeAt(t-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,t-1)+"�",e.str="�"+e.str.slice(1)),e}mergeWith(t){return this.str+=t.str,!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeString(0===e?this.str:this.str.slice(e))}getRef(){return 4}}const Pn=t=>new jn(t.readString()),zn=[He,Ve,ln,fn,dn,vn,bn],Un=0,Hn=1,$n=2,Jn=3,Vn=4,qn=5,Gn=6;class Wn{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Wn(this.type._copy())}splice(t){throw d["b"]()}mergeWith(t){return!1}integrate(t,e){this.type._integrate(t.doc,e)}delete(t){let e=this.type._start;while(null!==e)e.deleted?t._mergeStructs.push(e):e.delete(t),e=e.right;this.type._map.forEach(e=>{e.deleted?t._mergeStructs.push(e):e.delete(t)}),t.changed.delete(this.type)}gc(t){let e=this.type._start;while(null!==e)e.gc(t,!0),e=e.right;this.type._start=null,this.type._map.forEach(e=>{while(null!==e)e.gc(t,!0),e=e.left}),this.type._map=new Map}write(t,e){this.type._write(t)}getRef(){return 7}}const Kn=t=>new Wn(zn[t.readTypeRef()](t)),Qn=(t,e)=>{let n,r=e,i=0;do{i>0&&(r=pt(r.client,r.clock+i)),n=Rt(t,r),i=r.clock-n.id.clock,r=n.redone}while(null!==r&&n instanceof tr);return{item:n,diff:i}},Yn=(t,e)=>{while(null!==t&&t.keep!==e)t.keep=e,t=t.parent._item},Xn=(t,e,n)=>{const{client:r,clock:i}=e.id,o=new tr(pt(r,i+n),e,pt(r,i+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&o.markDeleted(),e.keep&&(o.keep=!0),null!==e.redone&&(o.redone=pt(e.redone.client,e.redone.clock+n)),e.right=o,null!==o.right&&(o.right.left=o),t._mergeStructs.push(o),null!==o.parentSub&&null===o.right&&o.parent._map.set(o.parentSub,o),e.length=n,o},Zn=(t,e,n,r)=>{const i=t.doc,o=i.store,s=i.clientID,a=e.redone;if(null!==a)return Lt(t,a);let c,l,u=e.parent._item;if(null===e.parentSub)c=e.left,l=e;else{c=e;while(null!==c.right)if(c=c.right,c.id.client!==s)return null;null!==c.right&&(c=e.parent._map.get(e.parentSub)),l=null}if(null!==u&&!0===u.deleted&&null===u.redone&&(!n.has(u)||null===Zn(t,u,n,r)))return null;if(null!==u&&null!==u.redone){while(null!==u.redone)u=Lt(t,u.redone);while(null!==c){let e=c;while(null!==e&&e.parent._item!==u)e=null===e.redone?null:Lt(t,e.redone);if(null!==e&&e.parent._item===u){c=e;break}c=c.left}while(null!==l){let e=l;while(null!==e&&e.parent._item!==u)e=null===e.redone?null:Lt(t,e.redone);if(null!==e&&e.parent._item===u){l=e;break}l=l.right}while(null!==c&&null!==c.right&&c.right!==l&&r.findIndex(t=>t===c.right)>=0)c=c.right}const h=Ot(o,s),d=pt(s,h),p=new tr(d,c,c&&c.lastId,l,l&&l.id,null===u?e.parent:u.content.type,e.parentSub,e.content.copy());return e.redone=d,Yn(p,!0),p.integrate(t,0),p};class tr extends wn{constructor(t,e,n,r,i,o,s,a){super(t,a.getLength()),this.origin=n,this.left=e,this.right=r,this.rightOrigin=i,this.parent=o,this.parentSub=s,this.redone=null,this.content=a,this.info=this.content.isCountable()?p["b"]:0}set marker(t){(this.info&p["d"])>0!==t&&(this.info^=p["d"])}get marker(){return(this.info&p["d"])>0}get keep(){return(this.info&p["a"])>0}set keep(t){this.keep!==t&&(this.info^=p["a"])}get countable(){return(this.info&p["b"])>0}get deleted(){return(this.info&p["c"])>0}set deleted(t){this.deleted!==t&&(this.info^=p["c"])}markDeleted(){this.info|=p["c"]}getMissing(t,e){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Ot(e,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Ot(e,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===ht&&this.id.client!==this.parent.client&&this.parent.clock>=Ot(e,this.parent.client))return this.parent.client;if(this.origin&&(this.left=jt(t,e,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Lt(t,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===Dn||this.right&&this.right.constructor===Dn)&&(this.parent=null),this.parent){if(this.parent.constructor===ht){const t=Rt(e,this.parent);t.constructor===Dn?this.parent=null:this.parent=t.content.type}}else this.left&&this.left.constructor===tr&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===tr&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}integrate(t,e){if(e>0&&(this.id.clock+=e,this.left=jt(t,t.doc.store,pt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(e),this.length-=e),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){let e,n=this.left;if(null!==n)e=n.right;else if(null!==this.parentSub){e=this.parent._map.get(this.parentSub)||null;while(null!==e&&null!==e.left)e=e.left}else e=this.parent._start;const r=new Set,i=new Set;while(null!==e&&e!==this.right){if(i.add(e),r.add(e),dt(this.origin,e.origin)){if(e.id.client<this.id.client)n=e,r.clear();else if(dt(this.rightOrigin,e.rightOrigin))break}else{if(null===e.origin||!i.has(Rt(t.doc.store,e.origin)))break;r.has(Rt(t.doc.store,e.origin))||(n=e,r.clear())}e=e.right}this.left=n}if(null!==this.left){const t=this.left.right;this.right=t,this.left.right=this}else{let t;if(null!==this.parentSub){t=this.parent._map.get(this.parentSub)||null;while(null!==t&&null!==t.left)t=t.left}else t=this.parent._start,this.parent._start=this;this.right=t}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(t)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Nt(t.doc.store,this),this.content.integrate(t,this),$t(t,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(t)}else new Dn(this.id,this.length).integrate(t,0)}get next(){let t=this.right;while(null!==t&&t.deleted)t=t.right;return t}get prev(){let t=this.left;while(null!==t&&t.deleted)t=t.left;return t}get lastId(){return 1===this.length?this.id:pt(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&dt(t.origin,this.lastId)&&this.right===t&&dt(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&null===this.redone&&null===t.redone&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const e=this.parent._searchMarker;return e&&e.forEach(e=>{e.p===t&&(e.p=this,!this.deleted&&this.countable&&(e.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,null!==this.right&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const e=this.parent;this.countable&&null===this.parentSub&&(e._length-=this.length),this.markDeleted(),x(t.deleteSet,this.id.client,this.id.clock,this.length),$t(t,e,this.parentSub),this.content.delete(t)}}gc(t,e){if(!this.deleted)throw d["c"]();this.content.gc(t),e?Pt(t,this,new Dn(this.id,this.length)):this.content=new En(this.length)}write(t,e){const n=e>0?pt(this.id.client,this.id.clock+e-1):this.origin,r=this.rightOrigin,i=this.parentSub,o=this.content.getRef()&p["i"]|(null===n?0:p["g"])|(null===r?0:p["f"])|(null===i?0:p["e"]);if(t.writeInfo(o),null!==n&&t.writeLeftID(n),null!==r&&t.writeRightID(r),null===n&&null===r){const e=this.parent;if(void 0!==e._item){const n=e._item;if(null===n){const n=ft(e);t.writeParentInfo(!0),t.writeString(n)}else t.writeParentInfo(!1),t.writeLeftID(n.id)}else e.constructor===String?(t.writeParentInfo(!0),t.writeString(e)):e.constructor===ht?(t.writeParentInfo(!1),t.writeLeftID(e)):d["c"]();null!==i&&t.writeString(i)}this.content.write(t,e)}}const er=(t,e)=>nr[e&p["i"]](t),nr=[()=>{d["c"]()},Sn,Rn,kn,Pn,On,Fn,Kn,Ln,_n,()=>{d["c"]()}],rr=10;class ir extends wn{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor===t.constructor&&(this.length+=t.length,!0)}integrate(t,e){d["c"]()}write(t,e){t.writeInfo(rr),a["n"](t.restEncoder,this.length-e)}getMissing(t,e){return null}}const or="undefined"!==typeof window?window:"undefined"!==typeof t?t:{},sr="__ $YJS$ __";!0===or[sr]&&console.warn("Yjs was already imported. Importing different versions of Yjs often leads to issues."),or[sr]=!0}).call(this,n("c8ba"))},7749:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));class r{constructor(t,e){this.left=t,this.right=e}}const i=(t,e)=>new r(t,e),o=(t,e)=>t.forEach(t=>e(t.left,t.right))},"7a49":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAF7SURBVHgBrVIxTsNAELx1CC1+gvkACVTuEB0d4QUYlER07PkDCQ9IuAYJiSCZHyQvIKUr8A8wP3BFAeSOOUeBOHKwBIx0uvPu7NzsnoX4I2g1wMwuvRKTpoYW2nXISbXWE3WnxpUC3GYmoh6OrhEmIUGZMKIJlouVGsccqBuVlgrIruyD3CNDY/2hpYq+iXzGAdXoCuzMvJld5LKCAJ+zRzN6tsXD0fC4zCp3uAlHT8aYvhqpy0XcyVVmdGR3e7NYA3WrErQVoUXmgN2CANCC/WTZdim0mNj5iLrwVgVQbzJRBcxgvtFWQQDFKaw1K+uJGjn/3bwUBKBwb63hJU5+VhC82mougKlOsU2RVHbaZbWyLSPkPctZjm8sDrB1SnV6sE8VdsLI/n2259z2/GYv55HZXhaoLQ5xEmf+jj9BxAW5RQ4FKA6QOsTbJ/aMleK77+/5FD/G03lXayA7cj/vcdNJB9eDr6GF3bBnfyYsidaV+A2sCC64EP+BT3tPoLLPOqbAAAAAAElFTkSuQmCC"},"7b62":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACrSURBVHgB1ZIxDsIwDEVth4i1bIxlqzpxlZy0R+AKTJU6sTJVmalqE0sEpTDgTsDLkFiRv+KfD/BtHKyk9e2xctV+5PGq9cbS1Gyby8xz8OCBiTvPPuQ7k0CiJqQTI0diCv3Un9cKACJWIgJTWiVkahaMWcSR6+CnwLJQt9NW6znNG4fbsPsksPBAHS7nBQNvJgpKzCIWnt+oCdOQ6CseQia3Fzl4CckB/oI7cUM56dYszaQAAAAASUVORK5CYII="},"7d93":function(t,e,n){},"7f35":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAQCAYAAADJViUEAAAABmJLR0QA/wD/AP+gvaeTAAAA0ElEQVQokdXSMUtCURjG8d/VuzVF1CC0NDQaRDTa4KBbU0M0ReAHcHdvbGpoUfwE9hkq3ZzFVUSIvkBQ3QYvdDnIvd6xZzvve/7neQ48EXZxgx35muE5O4jwgmMscsAIdXTQzy6+cFfgCq94yg7i9NWf9LyHR5yiEsC11L2JD/Ti4EIXF3hAkpOigUEI72OO+4IvvKMdRiulfwrHWFo37AAn+CzjfI1vXOGojHMFb2jhDKOycFYJqltySViSCW4x9VfZTTrEONqwuMR5QYIVhr86Gx+gusufQAAAAABJRU5ErkJggg=="},"7ff2":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC5SURBVHgBrZLtDYJADIZfDf/FCegG6ASygY6iE8AKTuII6ga6gRvABtjGXlIbxOPjTZ5crt+UAyZqERm3YVJnu2GAaqZ1SFEkJigNRqOXsmUy5sTs1beygdTRQbiYmEptVz13dgLS88g8TNLTJJd63pkCToWt6lSpr9S7fGYdmib4r0YnO+tdJlwPmSCI8NnJ1+9cIl7EHJh8bIFOTS7glygb/vW8c/RIFtNGQjbRdhNHhn7Jw2owp97JWC5Zc05shAAAAABJRU5ErkJggg=="},"8dc3":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADkAAAATCAYAAAAqL6XVAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALcSURBVHgB7VZvbhJBFH8zW5qoabr9UCxKt+sJ5AalJxBPIAVM/FZ6AuAE4jcTW6AnaD0B9ATqCViByh8/SDQxkWXn+R6yCNsi2JVELb9kMrNv3pud37zfm12AJZZY4q9E03xmVs207rWzjefgH4YcDZRdva2+VL2EyPac5z49SO7AH8DFdjLWNpLFqh7XwQdaRirdDKey8/hKz7MuHLsIC8SKwIfUxfUNbR18QYGUmJmH6IrXIAREPxiJ9L1aIT8tqGmmohLxABXoUoDlyEAuZL20OubTCCrnUR/Fu/v147OBb5h8pdpVSp5rkggiRFEA2H1Mt41E13a01+GLV2/hN7FF+/toJNYpTVl6B4QaR9lpvpOZFEAbQ0sDkZlWh20jlZUKywKRNk/eQL2y37B/AGyL9h9bEVDkZ2502qyMOPT7lkLcQ4GDdYloVAgR1QReW7abtUJOAmZnZXSSJEJXSbkPU2T7gzhm+CCCtcJG8P3xnuqpPfYnopkNq9R1euqx4IVV71QjGw1NOpR4qFWytuqFGD2XeK1VTcQ4njJQAR+Yh6i3JiFkHVUoS3mWbcdIPplwduzIcNTly4ObXNUyRKpLxKODeCKjAHMkiwhyBhVmNxvFc1ggxolyqXnn5VVBAU3lOFu0yTxldyQn2vxwrHQ6BNNtJHOqKVFx/VCunv2MkQslOPYeFhBoCi5daFeSZNm5siUCsdGEJi3uBBFiqbnNVvDiq1w7HC2q7LIA5OxaXJN+PxezwPfEoIxINXcbhZx3Xk4LdGV7ySagwjIkKReb24l4ZydZpovm9I7zmesPyM4xJh1FenhQ5q017dRdgw6oy32vD3mO9/ujMYvgL0kyXNmO25xvzj5J+IyJSiGKSJ8EPoxgvXDImyb7ASCWgrXjk/H6dmslIJ2TwZqkEI6ny2kXFkjQF1iCHTMeua4UOc7PXxQTpIsP2+FEBv5XtEgZrXDyAJa4QfgOPlZ0F8uQdI4AAAAASUVORK5CYII="},"94af":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADkAAAATCAYAAAAqL6XVAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMrSURBVHgB7VVdUhpBEO6ZRcvEmKxVUWNK1/UGeIKQE6gncAVS5RvrCVhPgL7lQRFPoJ5APIF6Ala0gpAHt6S0LGSn071kKcS/lCjxga9qYGemp3u+6T+AHnro4S1BQBdQMpfM1vk1DHjT7qoHLwi28ZBe+S8Kzoyk/cuI2/BMSHVTaB3vVfW8PJXYbif/XJRMy/yrN3PffuQpBWUj6QBgWlPgQEfAQ/rZaXyCSUFkCXWj0+w7vDIeJRkSBIXO2Gl2BTqCOBwrbjR1VIx4FISIhnP2qqbqKYUYrEkBucsLf3fayzXDrzQZt6QUs6hAl0Ic+jKyNu7+dO+zFsgKmFI1tSW7Q/A2KuaPKIIgL6IbrlG47SGgLQTqNEwEyL0b0rabZ4zEKhHbFIixxj7afKagW3q7fk4vluWIGT/LuZEuErTKRsLiD1QqWKijmOf/c9PSaz7mhRD50WJ2KyA1ldijvxh/l8xkDBWmAHFn9CQbnKlMxjNUNq2BDxHyfN0NjXBEUBpk+AGvqmqZ10Q3CBI5bM1JRCBvwRybv7rwZzgkC6atD6rqAgnSpTEqQLA3dQpxUTbiaZJ1NBRzn0/Wd9v1NwqPViCdedJtCkDdr6kZ9iLv3/EkgvLIACjOihfF7ZyknDkiC5uDH7XZkr60r6nqAZOiS+Zpm7yKMToTvXU39B9tO4ho0hl+HPf6Gpqyd0h+KWZXfxvxT9RcnNJEEsZP1x14RUgUHqhainNU1fzp8PWDcMWGjEI45idXIGI03Q/2Ka9BqW++7NvlztuAyFOuHpGTMoNDWoZoLgarDxknomlS6iglVjol2ghXcGnkwzUyPMeeY2Jav2SStg+4LGT/jqZubNpLsRyHa5CzSh4APwTgGpF3qbBQCAOFqYrVI3jM4UrzHMkvlicTOTKwEN79weo6UsyuSEBHSkyTRx3oHCYNKxz04m4dYZ49R/mzxoVCIw9wU6e9Wa4J4cFhN+dRK6B+ip4EkQ6qLOUdtRJ75HRzv91Qv+bbrI/vTlV54cm8Cz3Kr/yVQhleERXTivYJ7Xy4sHH8mAz/X3rgtvbQjsFEzyYSKeihh/+KPwLLsGJgssSaAAAAAElFTkSuQmCC"},"9c2b":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("69a7");const r=t=>new Promise(t)},"9fba":function(t,e,n){"use strict";n("4384")},aa25:function(t,e,n){"use strict";n("4e46")},b6f5:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return h})),n.d(e,"a",(function(){return d})),n.d(e,"d",(function(){return p})),n.d(e,"f",(function(){return f})),n.d(e,"e",(function(){return g}));var r=n("7749"),i=n("2309");const o="undefined"!==typeof document?document:{},s=t=>o.createElement(t),a=()=>o.createDocumentFragment(),c=t=>o.createTextNode(t),l=("undefined"!==typeof DOMParser&&new DOMParser,(t,e)=>(r["b"](e,(e,n)=>{!1===n?t.removeAttribute(e):!0===n?t.setAttribute(e,""):t.setAttribute(e,n)}),t)),u=t=>{const e=a();for(let n=0;n<t.length;n++)m(e,t[n]);return e},h=(t,e)=>(m(t,u(e)),t),d=(t,e,n)=>t.addEventListener(e,n),p=(t,e=[],n=[])=>h(l(s(t),e),n),f=c,g=t=>i["d"](t,(t,e)=>`${e}:${t};`).join(""),m=(t,e)=>t.appendChild(e);o.ELEMENT_NODE,o.TEXT_NODE,o.CDATA_SECTION_NODE,o.COMMENT_NODE,o.DOCUMENT_NODE,o.DOCUMENT_TYPE_NODE,o.DOCUMENT_FRAGMENT_NODE},b8cb:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAB2AAAAdgB+lymcgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAzgSURBVHicxZt7cFzVfcc/59y7Lz1X0kqyLBvLWH7UduPHwKRlGpJ2HEqcB+GPuIGQpOCJaZjQOIVMM6FpVCa0SROnpE1CkA3GDaQdKEkoGaZm2hJK7BqwwTbGGGP5KUur1a52V49daffec/qH3trn3V013xmN7t5zzu/8znd/55zf73fOChYZI4+0ttimulGjNwjBOq1ZAzQAfqBmqtooEAOiAt7VgjNCybcNW7xS+8WB0GLqJxZDaLy76XqFuA0hPgx6Qxn9aBBvI/SLQvAv/p3ho5XUEypIQOTJxjpjXO5Cc5eG36mU3HnQnBaS/WnBo807wyOVEFk2AfF9dY1Kub+M4F4mTXseRiZMeqLVGFLjkpo6T5pGXxqvaZfTbRT4R5FO/8B/TzxajqCSCdAaEdvX9FkQ3wOas9UZtyQPvbKOnmh1Rlm1y2JZ3TiDsQTXLU+yfU2MlpqUUzWG0OJBf9/gP4kulPNRlEhAfF9zp9LqAIgbctXRGn7waiev9WUYxTyEQrNrXGON5I/XJfjslhBuQztR6ZBQ8vP+u0M9ThpBCQREu5tuRYjHmVzFc+JgTwsHTqwoKG8uAdNwmZJbNia4+/0DiOI1HNGaXY27wv9adAscEKC7kLH2wB5gd6G6wTEvX/vPDaRsWVBuNgKmEag1+M72PlY0jBerJgi+7+8Nf7XYKVFYQ0A/jTveHniSIgYP8NTJZUUNvhDCIzZ/9mwbx/sz15Cc0PxFvD3wU/0ormKqF9RSP407Hg/8QsNtxQg8G6nhWH/+ee8EaUvxtV81cz5sFt1Gw+0xEfhFMSTkJUBrRCzevFfD9mI7P9jTWmzVomHZmr98YRnpCQdbp+CjcRk4oLvyjzFvYWxf4PugP1dsn4m0wdG+vGtjyYgmNPtfq8dOF0+ChtuiSwPfyVcnJwGxfc2fosg5P413wnWkVflzPxcOng8QH4o7IkEI7h/aG8g5fbNqG3u0ZZXWeq9TBS/HfU6bOEI8qQmOeZyTAI/EHm+9NltZBgFaI7S0/xmod6pgaMzrtIljHL7ajFLKKQn12raf0Dpz288gIP5YYGc+D++3jcGkB6AUEj4Qe6wpYz2bt7fE99U1Ks3flapcoGoi6/sljTV85qZNXLu0gUg8wZG3e3nr/ACR4QRSSmp8bn73mga2b1nKyuYqXjkT5olf95CcyIwNxi1j5nmahPrGegyXkVE3A1r8fXS//7mGO2Ox6VfzCFDavRsIFDvgjIHWZHpsddUe9nzpZhpqJ9eHlW0NXLeufbZC/zsZbda01fKRzUu49XsvY9vzHbrW6vl9OCShBdv8c+DB6RczUyDyZGMd8KVCEvKhLQsB239vzczgnWBpg4/rO1sy3q9uGM1452g6aL48+FigdvrjDAHGuNxFlni+aAiDVZs/lfH6/euXlSzy5k1t87sQgm0fvhMpMx08ByQ0mjZfmP4wQ4DW4vMlawp42j5I/dKt877taq+L1cubSpZ58+Y2DDm7TpuGpMHnpXXjHVnrOyBh5/SDhMkcHuiNJWsKuBreB8Cy5rqZd5tXtyEdxLMLYUpo8VfNfK71uQHw1eS2qqJIEKyP7mveAlMEKERRgU4+iCmzbF9AQLnYurJx5jlQN+lniAJRfDEkaKVvh+ldQHBTuYpqOwHAjj/ayAfeN5kIWXNNyRvKDO65qZO1SydJXb9s8r+icLao0O4gBNsAxMgjrS2WaQcpM0FaveYuXE2bi66vhYHtqiYRjVCd6MWwik96WDrNxSPfLqqulDIXCdpQ7hbTNtWNVCA7rNLxouumfC0ka5ahpUn/2CWk5xoadZTm8AkoIpFjOyArjyUIW07cKHWZi9800pHjk5nQPLBNH2MNa0jUdaDlrA+mtCJMPReXfJBEVYF8goDh4OuOdMu9JogNphCsLaB3UbCGexg9ewDXkj/ErFkCHj8IiZJulOkl7a7HcteSz9iSluZS1Xq8teupUqN40sO4rTGEncZtjyKtBMPhU8R7DznWTylFPBqnrrEe05yxhLWm1qwuacRZYA29wWjvYXTHDnw3fL1EKZpxG8apBrN6xlmvGzpC8tCD+ZsWgLIVw5F502GNpAzfPxu8VV5k2Pk3VAgTJ7srImfBdAhIoLZAG8fwqAgkghWT55YKNXKpYvJmSbD8ktkj6sri3M8qJkq8VzlZ01BKMRwd9kuKPBtwjEv/DsmBssV4SKJO76+AQplQthISTWJRpNvjcPSvQZV+CmxIif6feyuo1AJIoSWCzAC7UoicgKPfKOgfZINhSMz/vR8dv7AIik1CCKEkcHXRegDo+29qel5Epoo3NK+EwLsHUaFji6gYCCGTEnTlltccMEeD1L77S7z9byCtZC5tcBuCxqGzNJx8Fjk+vNhqIYSImgLerYAjOA+n4xvoDaWneoEdHSDsNN6Bt/CGTmH7GrGqAmjTR11KYCRjuMLvYSTnxxP7T30INRUarG1L8gfNr1ZUT8OQF02tOVbJq1JX1PWcqf4M5yYucuHcZYSAHdvmVNAaIxHBSEQAqA5Gcso6GWpBKViytAV39VLaLJtVZgXvSUnxslRCO4ss8qBfb+SYug0QdK5bSceq5WXLbF3azPKOdgSCV9O3ctmuSOwGgDCNZ2TTF4Z6BWTmph1iUK3mVftOFLMhZ+e6lSzraM/TKj8CrU0sn9NeaclvJj5Nv11++GKYxvjy3WMnTQANL+DgattQqpHQeICEXYVFNbK2g6tsRc0/ZkAIwbr1nRwfGWFzW/YYvro1+7n/f70nWbHSYGH0qDB4aeJP8RMmnRjAVGPUukbp8F3gGu/5YoeAaRonwJ7UWEn1rFTyvnwNbG1wKraBo5GtRNMLjsCD0NA4QkNTlqy6gDeCtSh3DVs7Mp1O12jmGvDiWYMjV3JfiIjFxrg8bAFNU39wmPW4TcF6/3m2NR7ElOl8w8EwZPeUelNC9wbe0bAuW+Voys9zvR8jPJE/cGxbtgSfL/chyJblNls6FgxswcnQi2cMDl91kytvkJpIERqIQJ68oMel2dH+PO3e7Du8YRipax+wPTA/Dng8W+XwRICnLn664OABBoODGUdZc/HmZYM3Llg5y184Izjc6yHX4LVSRMJR8g0eYCIteOryLVxIdmYtN13mf0w/zxBg+9SjTF5YnkHS9vLzK59g3C7u2NuybAaDg7k9XwHHrxgcPZ9pns+/LXit15c3Ozk0FMO2i4stlNL8/OpHGLbmT1chhTYMOXMEOENA0x1DwwL947mVfzN4A8PpOpwgkUgwEs/jxQk42Wvy+rnZk99fviU5FvTmHfzY6BjJhIPrckDagucGbpn3zu1xH2q/L3ll+vO8VSktxbcFBAHGrGreipa250bCQ6SyHG3PQMDJPpPXzqX4txOS4wO5zR7ASqeJRUtzja+O1hFOT97klVIqQ8rb55bPI6B5Z3hEaf4G4OxIJ6rEVIHWmoHgICpPFCiE4PWeNEd7Id91UK014XAMXWrmVsPrsd8HwONx/2zutw9ZkiENfeFu4OWridIdGIB0KsXQ4FDO8onxCQb6Q0QGo3mtJR4dxkrn39IK4WqyFdNlDLePjd+5sCyDANGFEkrujE3UlnT7ei6G48OMjoxlvE+nUgT7giilJ7/hwQjpLINMJscZHc1s7xQJy4PL7fuk6CJjC8pq4/67Qz0rvKefF6L8ODEcCmNZs/1alkV/X3DedqmUJhwawrZmV3jbtolG5m1KJUKwyh86vuy+0Zeyleac5J/45kufXOd7s+wYQSnFYDCE1pOD6r8axMpyamvbNqFQBDVFzFAkhlJlGyHX+EdCux9+ekuu8ryr3B3fenZDq6vvXLlKJJMTDEWG6O8Nkk7lns+2ZTE4GCYeizMxnv3ClRPU+9TIN3+8Iu8ZfYFlXuhT0U3rq+Xor8tVJh6Nk0oV/kVIOmUxMlz+vK/yGKFRo3kJdOU1o4L7XHf33ek3L23dhuBA2Vr9P8HtcV9q0v4V3d1dBRORRW30zzyzw3bVWncJob9LIUf8twqBz+M90rqitrPria6i3EbHybAHvvKtj09ZQ0V+FBAMln94AiCE0F6vZ88PH/vuV520c+zqPfQPf/W8rY3rBPoVp20XCy6XGa+u8X3I6eChzJshU9bwI6Dk5F85FiClVG6vZ9+P9lV9sdBilwtl54O77u2qs1zG/VqIe9A4vhRYCgFSSuVyuQ+56/1/8vDDD/Q7FjAHFUuId+3qqkpXm59DshvN2mLbOSFAGkbK63I/4zbt3Xu694RLUnQBFuXH09/4yoMbbGF8TKI+riev3ufspxABpmlMuAzXm5jGT3+41/uTUk09FxaFgLn4+u6H2qRQm5SQm6RQm5WSK4XUfjR+oH4gGPIKQyiBsKQgJQwjIoRx2hDisCGNXz2892+PL6Z+/wdaf0YPXa7OJwAAAABJRU5ErkJggg=="},bfc0:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEQSURBVHgBnVIxTgMxEFzvncACIblIGQl3SarcD4COEn7ADwI/4AmUdJAXABUleYLprsMPSOGGyCcRmzFw4e4kiHQj3a13vbPeHZuoB0Q3oJVW8l2eYecwUHhlZlP60jZzsqYz2Z1c5h/53Y/rmPgU9naQDcTwYGhUVM/L9XKe14RCFapaVUfEdFJWv5XHcqxhXvzKa5ye1rQhGWcczHm3XV6zCiIsQLiAa1ukvxCyoCggOdI1Pkt98aVeEiDGOP3uh+ZQa/EfidMvUpzVPWMGR1vAm1Wk+0TEDC1SUm+0M3pI91fHaiGs3/NX0ssZyG9IehQkDOIa/jGK3VhnXWumbmUOPMVrKJJaft8/NQm98Qn0RF5T6m8LJQAAAABJRU5ErkJggg=="},c757:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("1d2f");const i=t=>r["e"](t,(t,e)=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`).join("&")},c77f:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return a})),n.d(e,"f",(function(){return c})),n.d(e,"g",(function(){return l})),n.d(e,"i",(function(){return u})),n.d(e,"j",(function(){return h})),n.d(e,"k",(function(){return d})),n.d(e,"l",(function(){return p})),n.d(e,"h",(function(){return f}));const r=1,i=2,o=4,s=8,a=32,c=64,l=128,u=31,h=63,d=127,p=255,f=2147483647},c823:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return a}));class r{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}}let i=new r,o=!0;try{"undefined"!==typeof localStorage&&(i=localStorage,o=!1)}catch(c){}const s=i,a=t=>o||addEventListener("storage",t)},c893:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return u}));var r=n("ca0e");"undefined"===typeof window||"undefined"!==typeof window.performance&&window.performance;const i="undefined"===typeof crypto?null:crypto,o=null!==i?t=>{const e=new ArrayBuffer(t),n=new Uint8Array(e);return i.getRandomValues(n),e}:t=>{const e=new ArrayBuffer(t),n=new Uint8Array(e);for(let r=0;r<t;r++)n[r]=Math.ceil(4294967295*Math.random()>>>0);return e},s=Math.random,a=()=>new Uint32Array(o(4))[0],c=t=>t[r["c"](s()*t.length)],l=[1e7]+-1e3+-4e3+-8e3+-1e11,u=()=>l.replace(/[018]/g,t=>(t^a()&15>>t/4).toString(16))},ca0e:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"h",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"g",(function(){return a})),n.d(e,"f",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return u}));const r=Math.floor,i=(Math.ceil,Math.abs),o=(Math.imul,Math.round),s=Math.log10,a=(Math.log2,Math.log,Math.sqrt,(t,e)=>t<e?t:e),c=(t,e)=>t>e?t:e,l=(Number.isNaN,Math.pow,t=>Math.pow(10,t)),u=(Math.sign,t=>0!==t?t<0:1/t<0)},d72c:function(t,e,n){"use strict";(function(t){n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"e",(function(){return d})),n.d(e,"d",(function(){return p})),n.d(e,"a",(function(){return f}));var r=n("5da9"),i=n("1d8c");n("dbda"),n("1b25");const o=t=>new Uint8Array(t),s=(t,e,n)=>new Uint8Array(t,e,n),a=t=>new Uint8Array(t),c=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=r["b"](t[n]);return btoa(e)},l=e=>t.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),u=t=>{const e=atob(t),n=o(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},h=e=>{const n=t.from(e,"base64");return new Uint8Array(n.buffer,n.byteOffset,n.byteLength)},d=i["b"]?c:l,p=i["b"]?u:h,f=t=>{const e=o(t.byteLength);return e.set(t),e}}).call(this,n("1c35").Buffer)},dbda:function(t,e,n){"use strict";n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return u})),n.d(e,"j",(function(){return p})),n.d(e,"n",(function(){return f})),n.d(e,"l",(function(){return g})),n.d(e,"m",(function(){return m})),n.d(e,"i",(function(){return v})),n.d(e,"k",(function(){return y})),n.d(e,"o",(function(){return b})),n.d(e,"h",(function(){return S})),n.d(e,"b",(function(){return x})),n.d(e,"d",(function(){return _})),n.d(e,"a",(function(){return O})),n.d(e,"c",(function(){return N}));var r=n("d72c"),i=n("ca0e"),o=n("c77f");Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,o["h"];const s=Number.isInteger||(t=>"number"===typeof t&&isFinite(t)&&i["c"](t)===t);Number.isNaN,Number.parseInt;class a{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const c=()=>new a,l=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},u=t=>{const e=new Uint8Array(l(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(r["c"](t.cbuf.buffer,0,t.cpos),n),e},h=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(r["c"](t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(2*i["f"](n,e)),t.cpos=0)},d=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(2*n),t.cpos=0),t.cbuf[t.cpos++]=e},p=d,f=(t,e)=>{while(e>o["k"])d(t,o["g"]|o["k"]&e),e>>>=7;d(t,o["k"]&e)},g=(t,e)=>{const n=i["d"](e);n&&(e=-e),d(t,(e>o["j"]?o["g"]:0)|(n?o["f"]:0)|o["j"]&e),e>>>=6;while(e>0)d(t,(e>o["k"]?o["g"]:0)|o["k"]&e),e>>>=7},m=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;f(t,r);for(let i=0;i<r;i++)d(t,n.codePointAt(i))},v=(t,e)=>y(t,u(e)),y=(t,e)=>{const n=t.cbuf.length,r=t.cpos,o=i["g"](n-r,e.length),s=e.length-o;t.cbuf.set(e.subarray(0,o),r),t.cpos+=o,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(i["f"](2*n,s)),t.cbuf.set(e.subarray(o)),t.cpos=s)},b=(t,e)=>{f(t,e.byteLength),y(t,e)},w=(t,e)=>{h(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},A=(t,e)=>w(t,4).setFloat32(0,e,!1),D=(t,e)=>w(t,8).setFloat64(0,e,!1),C=(t,e)=>w(t,8).setBigInt64(0,e,!1),k=new DataView(new ArrayBuffer(4)),E=t=>(k.setFloat32(0,t),k.getFloat32(0)===t),S=(t,e)=>{switch(typeof e){case"string":d(t,119),m(t,e);break;case"number":s(e)&&e<=o["h"]?(d(t,125),g(t,e)):E(e)?(d(t,124),A(t,e)):(d(t,123),D(t,e));break;case"bigint":d(t,122),C(t,e);break;case"object":if(null===e)d(t,126);else if(e instanceof Array){d(t,117),f(t,e.length);for(let n=0;n<e.length;n++)S(t,e[n])}else if(e instanceof Uint8Array)d(t,116),b(t,e);else{d(t,118);const n=Object.keys(e);f(t,n.length);for(let r=0;r<n.length;r++){const i=n[r];m(t,i),S(t,e[i])}}break;case"boolean":d(t,e?120:121);break;default:d(t,127)}};class x extends a{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&f(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const T=t=>{t.count>0&&(g(t.encoder,1===t.count?t.s:-t.s),t.count>1&&f(t.encoder,t.count-2))};class _{constructor(){this.encoder=new a,this.s=0,this.count=0}write(t){this.s===t?this.count++:(T(this),this.count=1,this.s=t)}toUint8Array(){return T(this),u(this.encoder)}}const M=t=>{if(t.count>0){const e=t.diff<<1|(1===t.count?0:1);g(t.encoder,e),t.count>1&&f(t.encoder,t.count-2)}};class O{constructor(){this.encoder=new a,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(M(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return M(this),u(this.encoder)}}class N{constructor(){this.sarr=[],this.s="",this.lensE=new _}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new a;return this.sarr.push(this.s),this.s="",m(t,this.sarr.join("")),y(t,this.lensE.toUint8Array()),u(t)}}},e394:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>void 0===t?null:t},e6c4:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("2309"),i=n("4aa6"),o=n("fca1");class s{constructor(){this._observers=r["c"]()}on(t,e){r["e"](this._observers,t,i["a"]).add(e)}once(t,e){const n=(...r)=>{this.off(t,n),e(...r)};this.on(t,n)}off(t,e){const n=this._observers.get(t);void 0!==n&&(n.delete(e),0===n.size&&this._observers.delete(t))}emit(t,e){return o["c"]((this._observers.get(t)||r["c"]()).values()).forEach(t=>t(...e))}destroy(){this._observers=r["c"]()}}},f248:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"d",(function(){return h})),n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return p}));var r=n("dbda"),i=n("1b25"),o=n("69a7"),s=n("ca0e"),a=n("e6c4"),c=n("2163");const l=3e4;class u extends a["a"]{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const t=o["a"]();null!==this.getLocalState()&&l/2<=t-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const e=[];this.meta.forEach((n,r)=>{r!==this.clientID&&l<=t-n.lastUpdated&&this.states.has(r)&&e.push(r)}),e.length>0&&h(this,e,"timeout")},s["c"](l/10)),t.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const e=this.clientID,n=this.meta.get(e),r=void 0===n?0:n.clock+1,i=this.states.get(e);null===t?this.states.delete(e):this.states.set(e,t),this.meta.set(e,{clock:r,lastUpdated:o["a"]()});const s=[],a=[],l=[],u=[];null===t?u.push(e):null==i?null!=t&&s.push(e):(a.push(e),c["b"](i,t)||l.push(e)),(s.length>0||l.length>0||u.length>0)&&this.emit("change",[{added:s,updated:l,removed:u},"local"]),this.emit("update",[{added:s,updated:a,removed:u},"local"])}setLocalStateField(t,e){const n=this.getLocalState();null!==n&&this.setLocalState({...n,[t]:e})}getStates(){return this.states}}const h=(t,e,n)=>{const r=[];for(let i=0;i<e.length;i++){const n=e[i];if(t.states.has(n)){if(t.states.delete(n),n===t.clientID){const e=t.meta.get(n);t.meta.set(n,{clock:e.clock+1,lastUpdated:o["a"]()})}r.push(n)}}r.length>0&&(t.emit("change",[{added:[],updated:[],removed:r},n]),t.emit("update",[{added:[],updated:[],removed:r},n]))},d=(t,e,n=t.states)=>{const i=e.length,o=r["e"]();r["n"](o,i);for(let s=0;s<i;s++){const i=e[s],a=n.get(i)||null,c=t.meta.get(i).clock;r["n"](o,i),r["n"](o,c),r["m"](o,JSON.stringify(a))}return r["g"](o)},p=(t,e,n)=>{const r=i["e"](e),s=o["a"](),a=[],l=[],u=[],h=[],d=i["k"](r);for(let o=0;o<d;o++){const e=i["k"](r);let n=i["k"](r);const o=JSON.parse(i["j"](r)),d=t.meta.get(e),p=t.states.get(e),f=void 0===d?0:d.clock;(f<n||f===n&&null===o&&t.states.has(e))&&(null===o?e===t.clientID&&null!=t.getLocalState()?n++:t.states.delete(e):t.states.set(e,o),t.meta.set(e,{clock:n,lastUpdated:s}),void 0===d&&null!==o?a.push(e):void 0!==d&&null===o?h.push(e):null!==o&&(c["b"](o,p)||u.push(e),l.push(e)))}(a.length>0||u.length>0||h.length>0)&&t.emit("change",[{added:a,updated:u,removed:h},n]),(a.length>0||l.length>0||h.length>0)&&t.emit("update",[{added:a,updated:l,removed:h},n])}},f433:function(t,e,n){},f4a0:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAAmJLR0QA/4ePzL8AAAEiSURBVBgZBcFNS5MBAADgZ9PhDDQ1wYoEKVzKJhNEGDQoMUGlLS85ieHHQC8eQnF+wQ6t9b7NNwQ3h6cSb6NrdOriH+g/9TwAFKRAUsW1NStuZAEYEKgIXWqZxq22wFdZgB0p8NyJUKCMGYEbiCu4Ayxr6xoDtLyjomnTHrZsm3KlagmU/FDkO44Ng5RzB7oODBn1xagj1rwSIO/YMzF1J35Z1DVo3zhxf6yCYbPqyiLjrrTRBCK9nqibd6jswrmGdasy7qFfDSQU/VP1AHEZ1Dz0lI9mxNSUpE1gwxubYno0xHXoyIK0M5G3YngpYcVPTXmSFsz55DESikJVI/hmEgBe+y30QR8eGTPkFAAg0qPhr89y2PUCAKAokkPCe6FrgP8+uz1xkK13VQAAAABJRU5ErkJggg=="},f84c:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAD6SURBVHgB7ZPNasJAEMdnxk0pvTSPsI9Qz9KSUCi0S0GfTN9EQWLES+LX3UfQJzBHEbPjBiEmmmgOOXjwf9qZ2f0xMzsDUJOwyOl5yw/S2oYK+v3/DAtBQT+w9y9iCxV1gENTKXclLgNux40mo5lzD6A1NxGpa2HjPbFTkD+cO0Ask3PMtyG7fTx4FQIxU08KahD0GbBSX94sizXzJutLQSYJm5l7JtVeGSDGWDJjWBTL9cjkGn2r1qYM5PsBEovCGEFNeoKupYmiWkBKtcxakPz5+5om9sVfYnvsLWTZY2TODWx2VMT5EoSMWpqpd8pAcFqdNWG+rMfUEXf5SJycNdsaAAAAAElFTkSuQmCC"},fca1:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return a}));const r=t=>t[t.length-1],i=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},o=Array.from,s=(t,e)=>t.every(e),a=(t,e)=>t.length===e.length&&s(t,(t,n)=>t===e[n])},fd28:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABmSURBVHgB7Y6xEYAwDAOtHAVlRqDMODAKE3CZgPVSMkJKqhjFxwBJBUVU2NafTyeRoe+FOsIcFi16QpDFSUx3ulrZZDFFDgBrPfngubZW5szAzFuJ6R3MGjB1Z3om9Oo09rChP+gB7KFCdQHrooUAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=chunk-3a2d6889.c56e8310.js.map